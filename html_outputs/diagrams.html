<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>35 Sơ đồ và biểu đồ | Cẩm nang dịch tễ học với R</title>

    <meta name="author" content="the handbook team" />
  
   <meta name="description" content="The Epi R Handbook is a R reference manual for applied epidemiology and public health." />
   <meta name="generator" content="placeholder" />
  <meta property="og:title" content="35 Sơ đồ và biểu đồ | Cẩm nang dịch tễ học với R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="The Epi R Handbook is a R reference manual for applied epidemiology and public health." />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="35 Sơ đồ và biểu đồ | Cẩm nang dịch tễ học với R" />
  
  <meta name="twitter:description" content="The Epi R Handbook is a R reference manual for applied epidemiology and public health." />
  
  <!-- JS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script>
  <script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script>
    <script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet" />
    <script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script>
    <script src="libs/bs3compat-0.6.1/transition.js"></script>
    <script src="libs/bs3compat-0.6.1/tabs.js"></script>
    <script src="libs/bs3compat-0.6.1/bs3compat.js"></script>
    <link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet" />
    <script src="libs/bs4_book-1.0.0/bs4_book.js"></script>
    <script src="libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
    <link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
    <script src="libs/datatables-binding-0.31/datatables.js"></script>
    <link href="libs/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet" />
    <link href="libs/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet" />
    <script src="libs/dt-core-1.13.6/js/jquery.dataTables.min.js"></script>
    <link href="libs/nouislider-7.0.10/jquery.nouislider.min.css" rel="stylesheet" />
    <script src="libs/nouislider-7.0.10/jquery.nouislider.min.js"></script>
    <link href="libs/selectize-0.12.0/selectize.bootstrap3.css" rel="stylesheet" />
    <script src="libs/selectize-0.12.0/selectize.min.js"></script>
    <link href="libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet" />
    <script src="libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>
    <script src="libs/kePrint-0.0.1/kePrint.js"></script>
    <link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
    <link href="libs/tabwid-1.1.3/tabwid.css" rel="stylesheet" />
    <script src="libs/tabwid-1.1.3/tabwid.js"></script>
    <link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
    <script src="libs/leaflet-1.3.1/leaflet.js"></script>
    <link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
    <script src="libs/proj4-2.6.2/proj4.min.js"></script>
    <script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
    <link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
    <script src="libs/leaflet-binding-2.2.1/leaflet.js"></script>
    <script src="libs/leaflet-providers-2.0.0/leaflet-providers_2.0.0.js"></script>
    <script src="libs/leaflet-providers-plugin-2.2.1/leaflet-providers-plugin.js"></script>
    <script src="libs/viz-1.8.2/viz.js"></script>
    <link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet" />
    <script src="libs/grViz-binding-1.0.11/grViz.js"></script>
    <script src="libs/d3-4.5.0/d3.min.js"></script>
    <script src="libs/sankey-1/sankey.js"></script>
    <script src="libs/sankeyNetwork-binding-0.4/sankeyNetwork.js"></script>
    <script src="libs/plotly-binding-4.10.4/plotly.js"></script>
    <script src="libs/typedarray-0.1/typedarray.min.js"></script>
    <link href="libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet" />
    <script src="libs/plotly-main-2.11.1/plotly-latest.min.js"></script>
    <link href="libs/vis-9.1.0/vis-network.min.css" rel="stylesheet" />
    <script src="libs/vis-9.1.0/vis-network.min.js"></script>
    <script src="libs/visNetwork-binding-2.1.2/visNetwork.js"></script>
    <link href="libs/font-awesome-4.7.0/css/font-awesome.min.css" rel="stylesheet" />
    <script src="libs/plotly-basic-2.11.1/plotly-basic-2.11.1.min.js"></script>
    <script src="libs/plotly-cartesian-2.11.1/plotly-cartesian-2.11.1.min.js"></script>
    <script src="libs/proj4js-2.3.15/proj4.js"></script>
    <link href="libs/highcharts-9.3.1/css/motion.css" rel="stylesheet" />
    <script src="libs/highcharts-9.3.1/highcharts.js"></script>
    <script src="libs/highcharts-9.3.1/highcharts-3d.js"></script>
    <script src="libs/highcharts-9.3.1/highcharts-more.js"></script>
    <script src="libs/highcharts-9.3.1/modules/stock.js"></script>
    <script src="libs/highcharts-9.3.1/modules/map.js"></script>
    <script src="libs/highcharts-9.3.1/modules/data.js"></script>
    <script src="libs/highcharts-9.3.1/modules/exporting.js"></script>
    <script src="libs/highcharts-9.3.1/modules/offline-exporting.js"></script>
    <script src="libs/highcharts-9.3.1/modules/drilldown.js"></script>
    <script src="libs/highcharts-9.3.1/modules/item-series.js"></script>
    <script src="libs/highcharts-9.3.1/modules/overlapping-datalabels.js"></script>
    <script src="libs/highcharts-9.3.1/modules/annotations.js"></script>
    <script src="libs/highcharts-9.3.1/modules/export-data.js"></script>
    <script src="libs/highcharts-9.3.1/modules/funnel.js"></script>
    <script src="libs/highcharts-9.3.1/modules/heatmap.js"></script>
    <script src="libs/highcharts-9.3.1/modules/treemap.js"></script>
    <script src="libs/highcharts-9.3.1/modules/sankey.js"></script>
    <script src="libs/highcharts-9.3.1/modules/dependency-wheel.js"></script>
    <script src="libs/highcharts-9.3.1/modules/organization.js"></script>
    <script src="libs/highcharts-9.3.1/modules/solid-gauge.js"></script>
    <script src="libs/highcharts-9.3.1/modules/streamgraph.js"></script>
    <script src="libs/highcharts-9.3.1/modules/sunburst.js"></script>
    <script src="libs/highcharts-9.3.1/modules/vector.js"></script>
    <script src="libs/highcharts-9.3.1/modules/wordcloud.js"></script>
    <script src="libs/highcharts-9.3.1/modules/xrange.js"></script>
    <script src="libs/highcharts-9.3.1/modules/tilemap.js"></script>
    <script src="libs/highcharts-9.3.1/modules/venn.js"></script>
    <script src="libs/highcharts-9.3.1/modules/gantt.js"></script>
    <script src="libs/highcharts-9.3.1/modules/timeline.js"></script>
    <script src="libs/highcharts-9.3.1/modules/parallel-coordinates.js"></script>
    <script src="libs/highcharts-9.3.1/modules/bullet.js"></script>
    <script src="libs/highcharts-9.3.1/modules/coloraxis.js"></script>
    <script src="libs/highcharts-9.3.1/modules/dumbbell.js"></script>
    <script src="libs/highcharts-9.3.1/modules/lollipop.js"></script>
    <script src="libs/highcharts-9.3.1/modules/series-label.js"></script>
    <script src="libs/highcharts-9.3.1/plugins/motion.js"></script>
    <script src="libs/highcharts-9.3.1/custom/reset.js"></script>
    <script src="libs/highcharts-9.3.1/modules/boost.js"></script>
    <script src="libs/highchart-binding-0.9.4/highchart.js"></script>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-QXDW878QLX"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-QXDW878QLX');
    </script>

    <div class="alert alert-info alert-dismissible">
      <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
      <strong>Bạn cần trợ giúp khi học R?</strong> Hãy tham gia <a href="https://www.appliedepi.org/live/" class="alert-link">khóa học</a>, trải nghiệm <a href="https://www.appliedepi.org/tutorial/" class="alert-link">các học phần miễn phí</a>, gửi bài viết <a href="https://community.appliedepi.org/" class="alert-link">trên trang Cộng đồng</a>, hoặc liên hệ <a href="mailto:contact@appliedepi.org" class="alert-link">dịch vụ hỗ trợ của chúng tôi</a>.
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script>

  <!-- CSS -->
  <style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
      <link rel="stylesheet" href="style_bs4.css" />
  
</head>

<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book">
    <a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Cẩm nang dịch tễ học với R</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
      </form>

      <nav aria-label="Table of contents">
        <h2>Table of contents</h2>
        <div id="book-toc"></div>

        <div class="book-extra">
          <p><a id="book-repo" href="#">View book source <i class="fab fa-github"></i></a></li></p>
        </div>
      </nav>
    </div>
  </header>

  <main class="col-sm-12 col-md-9 col-lg-7" id="content">
<div id="diagrams" class="section level1" number="35">
<h1><span class="header-section-number">35</span> Sơ đồ và biểu đồ</h1>
<p><img src="images/flow_chart.png" width="50%" /><img src="images/sankey_diagram.png" width="50%" /></p>
<p>Chương này này bao gồm hướng dẫn sử dụng code để vẽ:</p>
<ul>
<li>Biểu đồ flow diagram bằng <strong>DiagrammeR</strong> và ngôn ngữ DOT<br />
</li>
<li>Biểu đồ Alluvial/Sankey<br />
</li>
<li>Chuỗi sự kiện theo thời gian</li>
</ul>
<!-- * DAGs (Directed Acyclic Graphs)   -->
<!-- * GANTT charts   -->
<!-- ======================================================= -->
<div id="chuẩn-bị-27" class="section level2" number="35.1">
<h2><span class="header-section-number">35.1</span> Chuẩn bị</h2>
<div id="gọi-packages-12" class="section level3 unnumbered">
<h3>Gọi packages</h3>
<p>Đoạn code dưới đây hiển thị cách gọi các packages cần thiết cho các phân tích. Trong cuốn sách này, chúng tôi nhấn mạnh đến hàm <code>p_load()</code> từ package <strong>pacman</strong>, cài đặt gói nếu cần <em>và</em> gọi nó ra để sử dụng. Bạn cũng có thể gọi các packages đã cài đặt với hàm <code>library()</code> từ <strong>base</strong> R. Xem chương <a href="basics.html#basics">R Cơ bản</a> để biết thêm thông tin về các package R.</p>
<div class="sourceCode" id="cb1621"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1621-1"><a href="diagrams.html#cb1621-1" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(</span>
<span id="cb1621-2"><a href="diagrams.html#cb1621-2" tabindex="-1"></a>  DiagrammeR,     <span class="co"># for flow diagrams</span></span>
<span id="cb1621-3"><a href="diagrams.html#cb1621-3" tabindex="-1"></a>  networkD3,      <span class="co"># For alluvial/Sankey diagrams</span></span>
<span id="cb1621-4"><a href="diagrams.html#cb1621-4" tabindex="-1"></a>  tidyverse)      <span class="co"># data management and visualization</span></span></code></pre></div>
</div>
<div id="nhập-dữ-liệu-19" class="section level3 unnumbered">
<h3>Nhập dữ liệu</h3>
<p>Hầu hết nội dung trong chương này không yêu cầu bộ dữ liệu. Tuy nhiên, trong phần sơ đồ Sankey, chúng ta sẽ sử dụng bộ dữ liệu linelist từ một vụ dịch Ebola mô phỏng. Để tiện theo dõi, hãy <a href='https://github.com/appliedepi/epirhandbook_eng/raw/master/data/case_linelists/linelist_cleaned.rds' class='download-button'>bấm để tải bộ dữ liệu linelist “đã làm sạch” ở đây</a> (as .rds file). Nhập dữ liệu bằng hàm <code>import ()</code> từ package <strong>rio</strong> (có thể xử lý nhiều loại tệp như .xlsx, .csv, .rds - xem chương <a href="importing.html#importing">Nhập xuất dữ liệu</a> để biết chi tiết).</p>
<div class="sourceCode" id="cb1622"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1622-1"><a href="diagrams.html#cb1622-1" tabindex="-1"></a><span class="co"># import the linelist</span></span>
<span id="cb1622-2"><a href="diagrams.html#cb1622-2" tabindex="-1"></a>linelist <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="st">&quot;linelist_cleaned.rds&quot;</span>)</span></code></pre></div>
<p>50 hàng đầu tiên của linelist được hiển thị bên dưới:</p>
<div class="datatables html-widget html-fill-item" id="htmlwidget-973abe7f072a0c694336" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-973abe7f072a0c694336">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"2\" data-max=\"13\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"date\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"1399075200000\" data-max=\"1406419200000\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"date\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"1399939200000\" data-max=\"1407024000000\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"date\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"1400025600000\" data-max=\"1407110400000\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"date\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"1400371200000\" data-max=\"1410566400000\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"0\" data-max=\"67\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\" disabled=\"\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"0\" data-max=\"67\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;0-4&quot;,&quot;5-9&quot;,&quot;10-14&quot;,&quot;15-19&quot;,&quot;20-29&quot;,&quot;30-49&quot;,&quot;50-69&quot;,&quot;70+&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;0-4&quot;,&quot;5-9&quot;,&quot;10-14&quot;,&quot;15-19&quot;,&quot;20-24&quot;,&quot;25-29&quot;,&quot;30-34&quot;,&quot;35-39&quot;,&quot;40-44&quot;,&quot;45-49&quot;,&quot;50-54&quot;,&quot;55-59&quot;,&quot;60-64&quot;,&quot;65-69&quot;,&quot;70-74&quot;,&quot;75-79&quot;,&quot;80-84&quot;,&quot;85+&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"-13.2697246824573\" data-max=\"-13.209391925612\" data-scale=\"13\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"8.45171855856465\" data-max=\"8.48802917129884\" data-scale=\"14\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"0\" data-max=\"100\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"11\" data-max=\"241\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"20\" data-max=\"24\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"35.9\" data-max=\"38\" data-scale=\"1\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"0\" data-max=\"428.994082840237\" data-scale=\"14\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"0\" data-max=\"2\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","data":[["5fe599","8689b7","11f8ea","b8812a","893f25","be99c8","07e3e8","369449","f393b4","1389ca","2978ac","57a565","fc15ef","2eaa9a","bbfa93","c97dd9","f50e8a","3a7673","7f5a01","ddddee","99e8fa","567136","9371a9","bc2adf","403057","8bd1e8","f327be","42e1a9","90e5fe","959170","8ebf6e","e56412","6d788e","a47529","67be4e","da8ecb","148f18","2cb9a5","f5c142","70a9fe","3ad520","062638","c76676","baacc1","497372","23e499","38cc4a","3789ee","c71dcd","6b70f0"],[4,4,2,3,3,3,4,4,4,4,4,4,6,5,6,9,10,8,7,6,7,6,8,6,10,8,6,12,5,8,7,9,11,5,8,5,6,11,7,9,7,8,9,12,13,9,8,10,8,7],["2014-05-08",null,null,"2014-05-04","2014-05-18","2014-05-03","2014-05-22","2014-05-28",null,null,"2014-05-30","2014-05-28","2014-06-14","2014-06-07","2014-06-09",null,null,null,"2014-06-23","2014-06-18","2014-06-24",null,null,"2014-07-03",null,"2014-07-10","2014-06-14",null,"2014-06-18","2014-06-29","2014-07-02","2014-07-12","2014-07-12","2014-06-13","2014-07-15","2014-06-20",null,null,"2014-07-20",null,"2014-07-12","2014-07-19","2014-07-18","2014-07-18","2014-07-27",null,"2014-07-19","2014-07-26","2014-07-24",null],["2014-05-13","2014-05-13","2014-05-16","2014-05-18","2014-05-21","2014-05-22","2014-05-27","2014-06-02","2014-06-05","2014-06-05","2014-06-06","2014-06-13","2014-06-16","2014-06-17","2014-06-18","2014-06-19","2014-06-22","2014-06-23","2014-06-25","2014-06-26","2014-06-28","2014-07-02","2014-07-08","2014-07-09","2014-07-09","2014-07-10","2014-07-12","2014-07-12","2014-07-13","2014-07-13","2014-07-14","2014-07-15","2014-07-16","2014-07-17","2014-07-17","2014-07-18","2014-07-19","2014-07-22","2014-07-22","2014-07-24","2014-07-24","2014-07-25","2014-07-25","2014-07-27","2014-07-29","2014-07-30",null,"2014-08-01","2014-08-02","2014-08-03"],["2014-05-15","2014-05-14","2014-05-18","2014-05-20","2014-05-22","2014-05-23","2014-05-29","2014-06-03","2014-06-06","2014-06-07","2014-06-08","2014-06-15","2014-06-17","2014-06-17","2014-06-20","2014-06-19","2014-06-23","2014-06-24","2014-06-27","2014-06-28","2014-06-29","2014-07-03","2014-07-09","2014-07-09","2014-07-11","2014-07-11","2014-07-13","2014-07-14","2014-07-14","2014-07-13","2014-07-14","2014-07-17","2014-07-17","2014-07-18","2014-07-19","2014-07-20","2014-07-20","2014-07-22","2014-07-24","2014-07-26","2014-07-24","2014-07-27","2014-07-25","2014-07-27","2014-07-31","2014-08-01","2014-08-03","2014-08-02","2014-08-02","2014-08-04"],[null,"2014-05-18","2014-05-30",null,"2014-05-29","2014-05-24","2014-06-01","2014-06-07","2014-06-18","2014-06-09","2014-06-15",null,"2014-07-09",null,"2014-06-30","2014-07-11","2014-07-01","2014-06-25","2014-07-06","2014-07-02","2014-07-09","2014-07-07","2014-07-20",null,"2014-07-22","2014-07-16","2014-07-14","2014-07-20","2014-07-16","2014-07-19","2014-07-27","2014-07-19",null,"2014-07-26","2014-08-14","2014-08-01","2014-07-23","2014-08-28","2014-07-28","2014-07-19",null,"2014-08-03",null,null,null,"2014-08-06","2014-08-21","2014-09-13","2014-08-04",null],[null,"Recover","Recover",null,"Recover","Recover","Recover","Death","Recover","Death","Death","Death","Recover","Recover",null,"Recover",null,null,"Death","Death","Recover",null,null,null,"Death",null,"Death","Death",null,"Death","Recover","Death","Recover","Death","Recover",null,"Death","Recover","Recover","Death",null,null,"Death","Death","Death","Death","Recover",null,"Death","Death"],["m","f","m","f","m","f","f","f","m","f","m","m","m","f","f","m","f","f","f","f","m","m","f","m","f","m","m","f","m","f","f","f","m","m","f","m","f","f","f","m","f","m","f","m","m","f","m","f","m","m"],[2,3,56,18,3,16,16,0,61,27,12,42,19,7,7,13,35,17,11,11,19,54,14,28,6,3,31,6,67,14,10,21,20,45,1,12,3,15,20,36,7,13,14,3,10,1,0,20,26,14],["years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years"],[2,3,56,18,3,16,16,0,61,27,12,42,19,7,7,13,35,17,11,11,19,54,14,28,6,3,31,6,67,14,10,21,20,45,1,12,3,15,20,36,7,13,14,3,10,1,0,20,26,14],["0-4","0-4","50-69","15-19","0-4","15-19","15-19","0-4","50-69","20-29","10-14","30-49","15-19","5-9","5-9","10-14","30-49","15-19","10-14","10-14","15-19","50-69","10-14","20-29","5-9","0-4","30-49","5-9","50-69","10-14","10-14","20-29","20-29","30-49","0-4","10-14","0-4","15-19","20-29","30-49","5-9","10-14","10-14","0-4","10-14","0-4","0-4","20-29","20-29","10-14"],["0-4","0-4","55-59","15-19","0-4","15-19","15-19","0-4","60-64","25-29","10-14","40-44","15-19","5-9","5-9","10-14","35-39","15-19","10-14","10-14","15-19","50-54","10-14","25-29","5-9","0-4","30-34","5-9","65-69","10-14","10-14","20-24","20-24","45-49","0-4","10-14","0-4","15-19","20-24","35-39","5-9","10-14","10-14","0-4","10-14","0-4","0-4","20-24","25-29","10-14"],["Other","Missing","St. Mark's Maternity Hospital (SMMH)","Port Hospital","Military Hospital","Port Hospital","Missing","Missing","Missing","Missing","Port Hospital","Military Hospital","Missing","Missing","Other","Port Hospital","Port Hospital","Port Hospital","Missing","Other","Port Hospital","Port Hospital","St. Mark's Maternity Hospital (SMMH)","Missing","Other","Missing","St. Mark's Maternity Hospital (SMMH)","Military Hospital","Port Hospital","Central Hospital","Military Hospital","Central Hospital","Missing","Military Hospital","Other","Missing","Missing","Port Hospital","Port Hospital","Port Hospital","Missing","Central Hospital","Military Hospital","Other","Other","Other","Missing","St. Mark's Maternity Hospital (SMMH)","St. Mark's Maternity Hospital (SMMH)","Missing"],[-13.2157351064963,-13.2152339775486,-13.212910703914,-13.2363711169728,-13.2228638912441,-13.222625321098,-13.2331547837254,-13.2320975453153,-13.2225511595637,-13.2572163655863,-13.2206286746001,-13.253989309478,-13.2385127873491,-13.209391925612,-13.2157278814899,-13.2243437095992,-13.2336087079551,-13.21422143145,-13.2339681355349,-13.2535640411465,-13.2250089377786,-13.2160657166043,-13.2680671272333,-13.2266742923612,-13.2160179088168,-13.2482584611565,-13.2156319199566,-13.2142410663192,-13.2614879104088,-13.2452992638476,-13.2630592726116,-13.2343341712241,-13.2199077448676,-13.2227293309912,-13.2343062806506,-13.218781651651,-13.2483677722899,-13.2097478342339,-13.2680867723786,-13.2587535457526,-13.262635786914,-13.2697246824573,-13.2209026809759,-13.2330734719715,-13.2680923666905,-13.2547212675054,-13.2573683214693,-13.2137356012883,-13.2175973322257,-13.2486407324245],[8.46897295100924,8.45171855856465,8.46481700596819,8.4754761613651,8.46082377490923,8.461830626007281,8.462729314626459,8.461443675342711,8.46191259217774,8.472923276435059,8.48401630165138,8.458371253408441,8.477617055125091,8.47570184950483,8.477799468789719,8.47145134147474,8.478048406853629,8.48528034195779,8.469575303958671,8.45957352078114,8.474048895115439,8.488029171298839,8.473437335922,8.484082637344621,8.46242233645879,8.470268221265719,8.463984474805329,8.464134789434199,8.456230946296071,8.48334624336805,8.47493999153642,8.47832062438022,8.469393389176499,8.48480589906514,8.47121232619015,8.48438437371817,8.484661585743391,8.477141599844281,8.462381270106089,8.455685978131131,8.4632880274758,8.47940722413856,8.46353857052336,8.461789681588639,8.47508713872833,8.458258081280711,8.4532568143863,8.4732571907655,8.479115866419329,8.48480340615605],["f547d6",null,null,"f90f5f","11f8ea","aec8ec","893f25","133ee7",null,null,"996f3a","133ee7","37a6f6","9f6884","4802b1",null,null,null,"a75c7f","8e104d","ab634e",null,null,"b799eb",null,"5d9e4d","a15e13",null,"ea3740","beb26e","567136","894024","36e2e7","a2086d","7baf73","eb2277",null,null,"d6584f",null,"312ecf","52ea64","cfd79c","d145b7","174288",null,"53608c","3b096b","f5c142",null],["other",null,null,"other","other","other","other","other",null,null,"other","other","other","other","other",null,null,null,"other","other","other",null,null,"other",null,"other","other",null,"other","funeral","other","funeral","other","other","other","funeral",null,null,"other",null,"other","other","other","other","other",null,"funeral","other","other",null],[27,25,91,41,36,56,47,0,86,69,67,84,68,44,34,66,78,47,53,47,71,86,53,69,38,46,68,37,100,56,50,57,65,72,29,69,37,48,54,71,47,61,47,35,53,16,13,59,69,67],[48,59,238,135,71,116,87,11,226,174,112,186,174,90,91,152,214,137,117,131,150,241,131,161,80,69,188,66,233,142,110,182,164,214,26,157,39,154,133,168,100,125,123,67,134,31,36,125,183,169],[22,22,21,23,23,21,21,22,22,22,22,22,22,21,23,22,23,21,22,23,21,23,21,24,23,22,24,23,20,24,24,20,24,21,22,21,23,22,23,23,23,22,23,22,22,22,23,22,22,22],["no",null,null,"no","no","no",null,"no","no","no","no","no","no","no","no","no","no","no",null,"no","no","no","no","no",null,"no","no","no",null,null,"no","no",null,"no","no",null,null,"no","no",null,"no","no",null,"no","no","no","no","no","no",null],["no",null,null,"no","no","no",null,"no","no","no","no","no","no","no","no","no","yes","no",null,"no","no","no","yes","no",null,"no","no","yes",null,null,"no","no",null,"no","no",null,null,"no","no",null,"no","no",null,"no","yes","no","no","no","no",null],["yes",null,null,"no","yes","yes",null,"yes","yes","yes","yes","yes","yes","yes","yes","yes","yes","yes",null,"yes","yes","yes","yes","yes",null,"yes","yes","yes",null,null,"yes","yes",null,"yes","yes",null,null,"yes","yes",null,"yes","yes",null,"yes","yes","yes","yes","yes","no",null],["no",null,null,"no","no","no",null,"no","no","no","no","no","no","no","no","yes","no","no",null,"no","no","no","no","no",null,"no","no","no",null,null,"no","no",null,"no","no",null,null,"yes","yes",null,"no","no",null,"no","no","no","no","no","no",null],["yes",null,null,"no","yes","yes",null,"yes","yes","no","yes","no","no","no","yes","no","no","no",null,"no","yes","no","no","no",null,"no","no","no",null,null,"no","yes",null,"yes","yes",null,null,"yes","yes",null,"yes","yes",null,"yes","yes","no","yes","yes","yes",null],[36.8,36.9,36.9,36.8,36.9,37.6,37.3,37,36.4,35.9,36.5,36.9,36.5,37.1,36.5,37.3,37,38,38,36,37,36.7,36.9,36.5,37,36.5,37.6,36.6,36.6,36.2,36.4,37.1,37.5,37.5,37.4,36.9,36.4,37.3,37,37.8,36.5,37.5,36.7,37,37.3,36.6,36.5,36.6,37.6,36.8],[null,"09:36","16:48","11:22","12:60","14:13","14:33","09:25","11:16","10:55","16:03","11:14","12:42","11:06","09:10","08:45",null,"15:41","13:34","18:58","12:43","16:33","14:29","07:18","08:11","16:32","16:17","07:32","17:45",null,"13:24","14:43","02:33","11:36","17:28","16:27",null,"20:49",null,"11:38","14:25","13:42","21:22","13:33","19:06","17:14","20:09",null,"10:23","09:09"],[117.1875,71.81844297615629,16.06524962926347,22.49657064471879,71.41440190438405,41.61712247324614,62.09538908706566,0,16.83765369253662,22.79032897344431,53.41198979591836,24.28026361429067,22.46003435064077,54.32098765432099,41.05784325564545,28.56648199445983,17.03205520132763,25.04129149128882,38.7172182043977,27.3876813705495,31.55555555555556,14.80690759456621,30.88398111998135,26.61934338952972,59.37499999999999,96.61835748792272,19.23947487550928,84.94031221303948,18.41993774061044,27.77226740726046,41.32231404958677,17.20806665861611,24.16716240333135,15.72189710891781,428.9940828402366,27.99302202929125,243.2610124917817,20.23950075898128,30.52744643563797,25.15589569160998,47,39.04,31.06616432017979,77.96836711962574,29.51659612385831,166.4932362122789,100.3086419753086,37.76,20.60378034578518,23.45856237526698],[2,1,2,2,1,1,2,1,1,2,2,2,1,0,2,0,1,1,2,2,1,1,1,0,2,1,1,2,1,0,0,2,1,1,2,2,1,0,2,2,0,2,0,0,2,2,null,1,0,1]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>case_id<\/th>\n      <th>generation<\/th>\n      <th>date_infection<\/th>\n      <th>date_onset<\/th>\n      <th>date_hospitalisation<\/th>\n      <th>date_outcome<\/th>\n      <th>outcome<\/th>\n      <th>gender<\/th>\n      <th>age<\/th>\n      <th>age_unit<\/th>\n      <th>age_years<\/th>\n      <th>age_cat<\/th>\n      <th>age_cat5<\/th>\n      <th>hospital<\/th>\n      <th>lon<\/th>\n      <th>lat<\/th>\n      <th>infector<\/th>\n      <th>source<\/th>\n      <th>wt_kg<\/th>\n      <th>ht_cm<\/th>\n      <th>ct_blood<\/th>\n      <th>fever<\/th>\n      <th>chills<\/th>\n      <th>cough<\/th>\n      <th>aches<\/th>\n      <th>vomit<\/th>\n      <th>temp<\/th>\n      <th>time_admission<\/th>\n      <th>bmi<\/th>\n      <th>days_onset_hosp<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":[1,8,10,14,15,18,19,20,26,28,29]},{"name":"case_id","targets":0},{"name":"generation","targets":1},{"name":"date_infection","targets":2},{"name":"date_onset","targets":3},{"name":"date_hospitalisation","targets":4},{"name":"date_outcome","targets":5},{"name":"outcome","targets":6},{"name":"gender","targets":7},{"name":"age","targets":8},{"name":"age_unit","targets":9},{"name":"age_years","targets":10},{"name":"age_cat","targets":11},{"name":"age_cat5","targets":12},{"name":"hospital","targets":13},{"name":"lon","targets":14},{"name":"lat","targets":15},{"name":"infector","targets":16},{"name":"source","targets":17},{"name":"wt_kg","targets":18},{"name":"ht_cm","targets":19},{"name":"ct_blood","targets":20},{"name":"fever","targets":21},{"name":"chills","targets":22},{"name":"cough","targets":23},{"name":"aches","targets":24},{"name":"vomit","targets":25},{"name":"temp","targets":26},{"name":"time_admission","targets":27},{"name":"bmi","targets":28},{"name":"days_onset_hosp","targets":29}],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true,"lengthMenu":[5,10,25,50,100]},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script>
<!-- ======================================================= -->
</div>
</div>
<div id="sơ-đồ-flow" class="section level2" number="35.2">
<h2><span class="header-section-number">35.2</span> Sơ đồ flow</h2>
<p>Chúng ta có thể sử dụng package R <strong>DiagrammeR</strong> để vẽ biểu đồ/sơ đồ flow. Chúng có thể là sơ đồ tĩnh hoặc có động dựa thay đổi theo những thay đổi trong tập dữ liệu.</p>
<p><strong>Công cụ</strong></p>
<p>Hàm <code>grViz()</code> được sử dụng để tạo sơ đồ “Graphviz”. Hàm này chấp nhận một <em>chuỗi ký tự đầu vào chứa các hướng dẫn</em> để tạo sơ đồ. Trong chuỗi đó, các hướng dẫn được viết bằng một ngôn ngữ khác, được gọi là ngôn ngữ <a href="https://graphviz.org/doc/info/lang.html">DOT</a> - khá dễ dàng để học những điều cơ bản.</p>
<p><strong>Cấu trúc cơ bản</strong></p>
<ol style="list-style-type: decimal">
<li>Mở hướng dẫn <code>grViz("</code><br />
</li>
<li>Chỉ định hướng và tên của biểu đồ, đồng thời mở ngoặc, vd: <code>digraph my_flow_chart {</code></li>
<li>Câu lệnh biểu đồ (bố cục, hướng sắp xếp các biến số)<br />
</li>
<li>Câu lệnh nút (tạo nút)</li>
<li>Câu lệnh Edges (cung cấp liên kết giữa các nút)<br />
</li>
<li>Đóng các hướng dẫn <code>}")</code></li>
</ol>
<div id="ví-dụ-đơn-giản" class="section level3 unnumbered">
<h3>Ví dụ đơn giản</h3>
<p>Dưới đây là hai ví dụ đơn giản</p>
<p>Một ví dụ rất đơn giản:</p>
<div class="sourceCode" id="cb1623"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1623-1"><a href="diagrams.html#cb1623-1" tabindex="-1"></a><span class="co"># A minimal plot</span></span>
<span id="cb1623-2"><a href="diagrams.html#cb1623-2" tabindex="-1"></a>DiagrammeR<span class="sc">::</span><span class="fu">grViz</span>(<span class="st">&quot;digraph {</span></span>
<span id="cb1623-3"><a href="diagrams.html#cb1623-3" tabindex="-1"></a><span class="st">  </span></span>
<span id="cb1623-4"><a href="diagrams.html#cb1623-4" tabindex="-1"></a><span class="st">graph[layout = dot, rankdir = LR]</span></span>
<span id="cb1623-5"><a href="diagrams.html#cb1623-5" tabindex="-1"></a></span>
<span id="cb1623-6"><a href="diagrams.html#cb1623-6" tabindex="-1"></a><span class="st">a</span></span>
<span id="cb1623-7"><a href="diagrams.html#cb1623-7" tabindex="-1"></a><span class="st">b</span></span>
<span id="cb1623-8"><a href="diagrams.html#cb1623-8" tabindex="-1"></a><span class="st">c</span></span>
<span id="cb1623-9"><a href="diagrams.html#cb1623-9" tabindex="-1"></a></span>
<span id="cb1623-10"><a href="diagrams.html#cb1623-10" tabindex="-1"></a><span class="st">a -&gt; b -&gt; c</span></span>
<span id="cb1623-11"><a href="diagrams.html#cb1623-11" tabindex="-1"></a><span class="st">}&quot;</span>)</span></code></pre></div>
<div class="grViz html-widget html-fill-item" id="htmlwidget-80ea6a2d88b71114b70d" style="width:50%;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-80ea6a2d88b71114b70d">{"x":{"diagram":"digraph {\n  \ngraph[layout = dot, rankdir = LR]\n\na\nb\nc\n\na -> b -> c\n}","config":{"engine":"dot","options":null}},"evals":[],"jsHooks":[]}</script>
<p>Một ví dụ khác áp dụng trong y tế công cộng:</p>
<div class="sourceCode" id="cb1624"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1624-1"><a href="diagrams.html#cb1624-1" tabindex="-1"></a><span class="fu">grViz</span>(<span class="st">&quot;                           # All instructions are within a large character string</span></span>
<span id="cb1624-2"><a href="diagrams.html#cb1624-2" tabindex="-1"></a><span class="st">digraph surveillance_diagram {    # &#39;digraph&#39; means &#39;directional graph&#39;, then the graph name </span></span>
<span id="cb1624-3"><a href="diagrams.html#cb1624-3" tabindex="-1"></a><span class="st">  </span></span>
<span id="cb1624-4"><a href="diagrams.html#cb1624-4" tabindex="-1"></a><span class="st">  # graph statement</span></span>
<span id="cb1624-5"><a href="diagrams.html#cb1624-5" tabindex="-1"></a><span class="st">  #################</span></span>
<span id="cb1624-6"><a href="diagrams.html#cb1624-6" tabindex="-1"></a><span class="st">  graph [layout = dot,</span></span>
<span id="cb1624-7"><a href="diagrams.html#cb1624-7" tabindex="-1"></a><span class="st">         rankdir = TB,</span></span>
<span id="cb1624-8"><a href="diagrams.html#cb1624-8" tabindex="-1"></a><span class="st">         overlap = true,</span></span>
<span id="cb1624-9"><a href="diagrams.html#cb1624-9" tabindex="-1"></a><span class="st">         fontsize = 10]</span></span>
<span id="cb1624-10"><a href="diagrams.html#cb1624-10" tabindex="-1"></a><span class="st">  </span></span>
<span id="cb1624-11"><a href="diagrams.html#cb1624-11" tabindex="-1"></a><span class="st">  # nodes</span></span>
<span id="cb1624-12"><a href="diagrams.html#cb1624-12" tabindex="-1"></a><span class="st">  #######</span></span>
<span id="cb1624-13"><a href="diagrams.html#cb1624-13" tabindex="-1"></a><span class="st">  node [shape = circle,           # shape = circle</span></span>
<span id="cb1624-14"><a href="diagrams.html#cb1624-14" tabindex="-1"></a><span class="st">       fixedsize = true</span></span>
<span id="cb1624-15"><a href="diagrams.html#cb1624-15" tabindex="-1"></a><span class="st">       width = 1.3]               # width of circles</span></span>
<span id="cb1624-16"><a href="diagrams.html#cb1624-16" tabindex="-1"></a><span class="st">  </span></span>
<span id="cb1624-17"><a href="diagrams.html#cb1624-17" tabindex="-1"></a><span class="st">  Primary                         # names of nodes</span></span>
<span id="cb1624-18"><a href="diagrams.html#cb1624-18" tabindex="-1"></a><span class="st">  Secondary</span></span>
<span id="cb1624-19"><a href="diagrams.html#cb1624-19" tabindex="-1"></a><span class="st">  Tertiary</span></span>
<span id="cb1624-20"><a href="diagrams.html#cb1624-20" tabindex="-1"></a></span>
<span id="cb1624-21"><a href="diagrams.html#cb1624-21" tabindex="-1"></a><span class="st">  # edges</span></span>
<span id="cb1624-22"><a href="diagrams.html#cb1624-22" tabindex="-1"></a><span class="st">  #######</span></span>
<span id="cb1624-23"><a href="diagrams.html#cb1624-23" tabindex="-1"></a><span class="st">  Primary   -&gt; Secondary [label = &#39; case transfer&#39;]</span></span>
<span id="cb1624-24"><a href="diagrams.html#cb1624-24" tabindex="-1"></a><span class="st">  Secondary -&gt; Tertiary [label = &#39; case transfer&#39;]</span></span>
<span id="cb1624-25"><a href="diagrams.html#cb1624-25" tabindex="-1"></a><span class="st">}</span></span>
<span id="cb1624-26"><a href="diagrams.html#cb1624-26" tabindex="-1"></a><span class="st">&quot;</span>)</span></code></pre></div>
<div class="grViz html-widget html-fill-item" id="htmlwidget-4e0eaf749f6fd0865026" style="width:50%;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-4e0eaf749f6fd0865026">{"x":{"diagram":"                           # All instructions are within a large character string\ndigraph surveillance_diagram {    # \"digraph\" means \"directional graph\", then the graph name \n  \n  # graph statement\n  #################\n  graph [layout = dot,\n         rankdir = TB,\n         overlap = true,\n         fontsize = 10]\n  \n  # nodes\n  #######\n  node [shape = circle,           # shape = circle\n       fixedsize = true\n       width = 1.3]               # width of circles\n  \n  Primary                         # names of nodes\n  Secondary\n  Tertiary\n\n  # edges\n  #######\n  Primary   -> Secondary [label = \" case transfer\"]\n  Secondary -> Tertiary [label = \" case transfer\"]\n}\n","config":{"engine":"dot","options":null}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="cú-pháp" class="section level3 unnumbered">
<h3>Cú pháp</h3>
<p><strong>Cú pháp cơ bản</strong></p>
<p>Tên nút hoặc biểu thức cạnh, có thể được phân tách bằng dấu cách, dấu chấm phẩy hoặc dòng mới.</p>
<p><strong>Điều hướng</strong></p>
<p>Một biểu đồ có thể được định hướng lại để di chuyển từ trái sang phải bằng cách điều chỉnh đối số <code>rankdir</code> trong câu lệnh biểu đồ. Mặc định là TB (từ trên xuống dưới), nhưng nó có thể là LR (trái sang phải), RL hoặc BT.</p>
<p><strong>Tên nút</strong></p>
<p>Tên nút có thể là các từ đơn, như trong ví dụ đơn giản ở trên. Để sử dụng tên nhiều từ hoặc các ký tự đặc biệt (ví dụ: dấu ngoặc đơn, dấu gạch ngang), hãy đặt tên nút trong dấu ngoặc đơn (’ ’). Có thể dễ dàng hơn để có một tên nút ngắn và gán một <em>nhãn</em>, như được hiển thị bên dưới trong dấu ngoặc vuông [ ]. Nếu bạn muốn có một dòng mới trong tên của nút, bạn phải thực hiện điều đó thông qua một nhãn - sử dụng <code>\n</code> trong nhãn của nút trong bên dấu ngoặc kép, như được trình bày bên dưới.</p>
<p><strong>Nhóm phụ</strong></p>
<p>Trong các biểu thức cạnh, nhóm phụ có thể được tạo ở hai bên của cạnh bằng dấu ngoặc nhọn ({ }). Sau đó, cạnh áp dụng cho tất cả các nút trong dấu ngoặc - nó là cách viết tắt.</p>
<p><strong>Bố cục</strong></p>
<ul>
<li>dot (đặt đối số <code>rankdir</code> cho một trong các giá trị sau TB, LR, RL, BT, )</li>
<li>neato<br />
</li>
<li>twopi<br />
</li>
<li>circo</li>
</ul>
<p><strong>Nút - có thể chỉnh sửa</strong></p>
<ul>
<li><code>label</code> (ký tự, trong dấu ngoặc kép nếu nhiều từ)<br />
</li>
<li><code>fillcolor</code> (nhiều màu)<br />
</li>
<li><code>width of shape borderfontcolor</code><br />
</li>
<li><code>alpha</code> (độ trong suốt 0-1)<br />
</li>
<li><code>shape</code> (hình elip, hình bầu dục, kim cương, trứng, bản rõ, điểm, hình vuông, hình tam giác)<br />
</li>
<li><code>style</code><br />
</li>
<li><code>sides</code><br />
</li>
<li><code>peripheries</code><br />
</li>
<li><code>fixedsize</code> (h x w)<br />
</li>
<li><code>height</code><br />
</li>
<li><code>width</code><br />
</li>
<li><code>distortion</code><br />
</li>
<li><code>penwidth</code> (độ dày của đường viền)<br />
</li>
<li><code>x</code> (dịch chuyển trái/phải)<br />
</li>
<li><code>y</code> (dịch chuyển lên/xuống )<br />
</li>
<li><code>fontname</code><br />
</li>
<li><code>fontsize</code><br />
</li>
<li><code>icon</code></li>
</ul>
<p><strong>Các cạnh - có thể chỉnh sửa</strong></p>
<ul>
<li><code>arrowsize</code><br />
</li>
<li><code>arrowhead</code> (normal, box, crow, curve, diamond, dot, inv, none, tee, vee)<br />
</li>
<li><code>arrowtail</code><br />
</li>
<li><code>dir</code> (điều hướng, )<br />
</li>
<li><code>style</code> (gạch ngang, …)<br />
</li>
<li><code>color</code><br />
</li>
<li><code>alpha</code><br />
</li>
<li><code>headport</code> (văn bản phía trước đầu mũi tên )<br />
</li>
<li><code>tailport</code> (văn bản phía sau đuôi mũi tên)<br />
</li>
<li><code>fontname</code><br />
</li>
<li><code>fontsize</code><br />
</li>
<li><code>fontcolor</code><br />
</li>
<li><code>penwidth</code> (độ dày của mũi tên)<br />
</li>
<li><code>minlen</code> (chiều dài tối thiểu)</li>
</ul>
<p><strong>Tên màu</strong>: mã màu theo bảng mã hex hoặc tên màu ‘X11’, xem <a href="http://rich-iannone.github.io/DiagrammeR/graphviz_and_mermaid.html">tại đây để biết thông tin chi tiết về X11</a></p>
</div>
<div id="ví-dụ-phức-tạp" class="section level3 unnumbered">
<h3>Ví dụ phức tạp</h3>
<p>Ví dụ dưới đây mở rộng trên một sơ đồ giám sát, thêm các tên nút phức tạp, các cạnh được nhóm lại, màu sắc và style</p>
<pre><code>DiagrammeR::grViz(&quot;               # All instructions are within a large character string
digraph surveillance_diagram {    # &#39;digraph&#39; means &#39;directional graph&#39;, then the graph name 
  
  # graph statement
  #################
  graph [layout = dot,
         rankdir = TB,            # layout top-to-bottom
         fontsize = 10]
  

  # nodes (circles)
  #################
  node [shape = circle,           # shape = circle
       fixedsize = true
       width = 1.3]                      
  
  Primary   [label = &#39;Primary\nFacility&#39;] 
  Secondary [label = &#39;Secondary\nFacility&#39;] 
  Tertiary  [label = &#39;Tertiary\nFacility&#39;] 
  SC        [label = &#39;Surveillance\nCoordination&#39;,
             fontcolor = darkgreen] 
  
  # edges
  #######
  Primary   -&gt; Secondary [label = &#39; case transfer&#39;,
                          fontcolor = red,
                          color = red]
  Secondary -&gt; Tertiary [label = &#39; case transfer&#39;,
                          fontcolor = red,
                          color = red]
  
  # grouped edge
  {Primary Secondary Tertiary} -&gt; SC [label = &#39;case reporting&#39;,
                                      fontcolor = darkgreen,
                                      color = darkgreen,
                                      style = dashed]
}
&quot;)</code></pre>
<div class="grViz html-widget html-fill-item" id="htmlwidget-005779d6cfec8453532c" style="width:50%;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-005779d6cfec8453532c">{"x":{"diagram":"               # All instructions are within a large character string\ndigraph surveillance_diagram {    # \"digraph\" means \"directional graph\", then the graph name \n  \n  # graph statement\n  #################\n  graph [layout = dot,\n         rankdir = TB,            # layout top-to-bottom\n         fontsize = 10]\n  \n\n  # nodes (circles)\n  #################\n  node [shape = circle,           # shape = circle\n       fixedsize = true\n       width = 1.3]                      \n  \n  Primary   [label = \"Primary\nFacility\"] \n  Secondary [label = \"Secondary\nFacility\"] \n  Tertiary  [label = \"Tertiary\nFacility\"] \n  SC        [label = \"Surveillance\nCoordination\",\n             fontcolor = darkgreen] \n  \n  # edges\n  #######\n  Primary   -> Secondary [label = \"case transfer\",\n                          fontcolor = red,\n                          color = red]\n  Secondary -> Tertiary [label = \"case transfer\",\n                          fontcolor = red,\n                          color = red]\n  \n  # grouped edge\n  {Primary Secondary Tertiary} -> SC [label = \"case reporting\",\n                                      fontcolor = darkgreen,\n                                      color = darkgreen,\n                                      style = dashed]\n}\n","config":{"engine":"dot","options":null}},"evals":[],"jsHooks":[]}</script>
<p><strong>Các cụm biểu đồ phụ</strong></p>
<p>Để nhóm các nút thành các cụm có khung, hãy đặt chúng trong cùng một đồ thị con được đặt tên (<code>subgraph name {}</code>). Để xác định từng đồ thị con trong một khung giới hạn, hãy bắt đầu tên của đồ thị con bằng “cluster”, như được trình bày ở 4 khung bên dưới.</p>
<pre><code>DiagrammeR::grViz(&quot;             # All instructions are within a large character string
digraph surveillance_diagram {  # &#39;digraph&#39; means &#39;directional graph&#39;, then the graph name 
  
  # graph statement
  #################
  graph [layout = dot,
         rankdir = TB,            
         overlap = true,
         fontsize = 10]
  

  # nodes (circles)
  #################
  node [shape = circle,                  # shape = circle
       fixedsize = true
       width = 1.3]                      # width of circles
  
  subgraph cluster_passive {
    Primary   [label = &#39;Primary\nFacility&#39;] 
    Secondary [label = &#39;Secondary\nFacility&#39;] 
    Tertiary  [label = &#39;Tertiary\nFacility&#39;] 
    SC        [label = &#39;Surveillance\nCoordination&#39;,
               fontcolor = darkgreen] 
  }
  
  # nodes (boxes)
  ###############
  node [shape = box,                     # node shape
        fontname = Helvetica]            # text font in node
  
  subgraph cluster_active {
    Active [label = &#39;Active\nSurveillance&#39;] 
    HCF_active [label = &#39;HCF\nActive Search&#39;]
  }
  
  subgraph cluster_EBD {
    EBS [label = &#39;Event-Based\nSurveillance (EBS)&#39;] 
    &#39;Social Media&#39;
    Radio
  }
  
  subgraph cluster_CBS {
    CBS [label = &#39;Community-Based\nSurveillance (CBS)&#39;]
    RECOs
  }

  
  # edges
  #######
  {Primary Secondary Tertiary} -&gt; SC [label = &#39;case reporting&#39;]

  Primary   -&gt; Secondary [label = &#39;case transfer&#39;,
                          fontcolor = red]
  Secondary -&gt; Tertiary [label = &#39;case transfer&#39;,
                          fontcolor = red]
  
  HCF_active -&gt; Active
  
  {&#39;Social Media&#39; Radio} -&gt; EBS
  
  RECOs -&gt; CBS
}
&quot;)
</code></pre>
<div class="grViz html-widget html-fill-item" id="htmlwidget-ef5eb4f4ad14d0df5dea" style="width:120%;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-ef5eb4f4ad14d0df5dea">{"x":{"diagram":"             # All instructions are within a large character string\ndigraph surveillance_diagram {  # \"digraph\" means \"directional graph\", then the graph name \n  \n  # graph statement\n  #################\n  graph [layout = dot,\n         rankdir = TB,            \n         overlap = true,\n         fontsize = 10]\n  \n\n  # nodes (circles)\n  #################\n  node [shape = circle,                  # shape = circle\n       fixedsize = true\n       width = 1.3]                      # width of circles\n  \n  subgraph cluster_passive {\n    Primary   [label = \"Primary\nFacility\"] \n    Secondary [label = \"Secondary\nFacility\"] \n    Tertiary  [label = \"Tertiary\nFacility\"] \n    SC        [label = \"Surveillance\nCoordination\",\n               fontcolor = darkgreen] \n  }\n  \n  # nodes (boxes)\n  ###############\n  node [shape = box,                     # node shape\n        fontname = Helvetica]            # text font in node\n  \n  subgraph cluster_active {\n    Active [label = \"Active\nSurveillance\"] \n    HCF_active [label = \"HCF\nActive Search\"]\n  }\n  \n  subgraph cluster_EBD {\n    EBS [label = \"Event-Based\nSurveillance (EBS)\"] \n    \"Social Media\"\n    Radio\n  }\n  \n  subgraph cluster_CBS {\n    CBS [label = \"Community-Based\nSurveillance (CBS)\"]\n    RECOs\n  }\n\n  \n  # edges\n  #######\n  {Primary Secondary Tertiary} -> SC [label = \"case reporting\"]\n\n  Primary   -> Secondary [label = \"case transfer\",\n                          fontcolor = red]\n  Secondary -> Tertiary [label = \"case transfer\",\n                          fontcolor = red]\n  \n  HCF_active -> Active\n  \n  {\"Social Media\" Radio} -> EBS\n  \n  RECOs -> CBS\n}\n","config":{"engine":"dot","options":null}},"evals":[],"jsHooks":[]}</script>
<p><strong>Hình dạng nút</strong></p>
<p>Ví dụ dưới đây, tham khảo từ<a href="http://rich-iannone.github.io/DiagrammeR/">tài liệu trực tuyến này</a>, hiển thị các hình dạng nút được áp dụng và cách viết tắt cho các kết nối cạnh nối tiếp.</p>
<div class="sourceCode" id="cb1627"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1627-1"><a href="diagrams.html#cb1627-1" tabindex="-1"></a>DiagrammeR<span class="sc">::</span><span class="fu">grViz</span>(<span class="st">&quot;digraph {</span></span>
<span id="cb1627-2"><a href="diagrams.html#cb1627-2" tabindex="-1"></a></span>
<span id="cb1627-3"><a href="diagrams.html#cb1627-3" tabindex="-1"></a><span class="st">graph [layout = dot, rankdir = LR]</span></span>
<span id="cb1627-4"><a href="diagrams.html#cb1627-4" tabindex="-1"></a></span>
<span id="cb1627-5"><a href="diagrams.html#cb1627-5" tabindex="-1"></a><span class="st"># define the global styles of the nodes. We can override these in box if we wish</span></span>
<span id="cb1627-6"><a href="diagrams.html#cb1627-6" tabindex="-1"></a><span class="st">node [shape = rectangle, style = filled, fillcolor = Linen]</span></span>
<span id="cb1627-7"><a href="diagrams.html#cb1627-7" tabindex="-1"></a></span>
<span id="cb1627-8"><a href="diagrams.html#cb1627-8" tabindex="-1"></a><span class="st">data1 [label = &#39;Dataset 1&#39;, shape = folder, fillcolor = Beige]</span></span>
<span id="cb1627-9"><a href="diagrams.html#cb1627-9" tabindex="-1"></a><span class="st">data2 [label = &#39;Dataset 2&#39;, shape = folder, fillcolor = Beige]</span></span>
<span id="cb1627-10"><a href="diagrams.html#cb1627-10" tabindex="-1"></a><span class="st">process [label =  &#39;Process </span><span class="sc">\n</span><span class="st"> Data&#39;]</span></span>
<span id="cb1627-11"><a href="diagrams.html#cb1627-11" tabindex="-1"></a><span class="st">statistical [label = &#39;Statistical </span><span class="sc">\n</span><span class="st"> Analysis&#39;]</span></span>
<span id="cb1627-12"><a href="diagrams.html#cb1627-12" tabindex="-1"></a><span class="st">results [label= &#39;Results&#39;]</span></span>
<span id="cb1627-13"><a href="diagrams.html#cb1627-13" tabindex="-1"></a></span>
<span id="cb1627-14"><a href="diagrams.html#cb1627-14" tabindex="-1"></a><span class="st"># edge definitions with the node IDs</span></span>
<span id="cb1627-15"><a href="diagrams.html#cb1627-15" tabindex="-1"></a><span class="st">{data1 data2}  -&gt; process -&gt; statistical -&gt; results</span></span>
<span id="cb1627-16"><a href="diagrams.html#cb1627-16" tabindex="-1"></a><span class="st">}&quot;</span>)</span></code></pre></div>
<div class="grViz html-widget html-fill-item" id="htmlwidget-13ad247b1796d88b866b" style="width:75%;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-13ad247b1796d88b866b">{"x":{"diagram":"digraph {\n\ngraph [layout = dot, rankdir = LR]\n\n# define the global styles of the nodes. We can override these in box if we wish\nnode [shape = rectangle, style = filled, fillcolor = Linen]\n\ndata1 [label = \"Dataset 1\", shape = folder, fillcolor = Beige]\ndata2 [label = \"Dataset 2\", shape = folder, fillcolor = Beige]\nprocess [label =  \"Process \n Data\"]\nstatistical [label = \"Statistical \n Analysis\"]\nresults [label= \"Results\"]\n\n# edge definitions with the node IDs\n{data1 data2}  -> process -> statistical -> results\n}","config":{"engine":"dot","options":null}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="kết-quả-đầu-ra" class="section level3 unnumbered">
<h3>Kết quả đầu ra</h3>
<p>Cách xử lý và lưu kết quả đầu ra</p>
<ul>
<li>Kết quả đầu ra sẽ xuất hiện trong cửa sổ RStudio’s Viewer, theo mặc định ở phía dưới bên phải cùng với các mục Files, Plots, Packages, và Help.</li>
<li>Để xuất, bạn có thể chọn “Save as image” để lưu dưới dạng ảnh hoặc “Copy to clipboard” để sao chép vào bộ nhớ tạm từ Viewer. Hình ảnh sẽ điều chỉnh theo kích thước được chỉ định.</li>
</ul>
</div>
<div id="đồ-thị-được-tham-số-hóa" class="section level3 unnumbered">
<h3>Đồ thị được tham số hóa</h3>
<p>Mục này được trích dẫn từ nguồn sau: <a href="https://mikeyharper.uk/flowcharts-in-r-using-diagrammer/" class="uri">https://mikeyharper.uk/flowcharts-in-r-using-diagrammer/</a></p>
<p>“Các biểu đồ được tham số hóa: Lợi ích tuyệt vời của việc thiết kế các đồ thị trong R là chúng ta có thể kết nối các đồ thị trực tiếp với phân tích của mình bằng cách đọc các giá trị R trực tiếp vào flowchart của chúng ta. Ví dụ: giả sử bạn đã tạo một quy trình lọc để loại bỏ các giá trị sau mỗi giai đoạn của một quy trình, bạn có thể có một đồ thị hiển thị số lượng giá trị còn lại trong tập dữ liệu sau mỗi giai đoạn trong quy trình của bạn. Để làm điều này, chúng ta có thể sử dụng ký hiệu @<span class="citation">@X</span> trực tiếp trong đồ thị, sau đó tham chiếu tới footer của biểu đồ bằng cách sử dụng [X]:, trong đó X là chỉ số số duy nhất.”</p>
<p>Chúng tôi khuyến khích bạn xem lại hướng dẫn này nếu tham số hóa là điều bạn quan tâm.</p>
<!-- And below is some example code from this tutorial. -->
<!-- ```{r, eval=F} -->
<!-- # Define some sample data -->
<!-- data <- list(a=1000, b=800, c=600, d=400) -->
<!-- DiagrammeR::grViz(" -->
<!-- digraph graph2 { -->
<!-- graph [layout = dot] -->
<!-- # node definitions with substituted label text -->
<!-- node [shape = rectangle, width = 4, fillcolor = Biege] -->
<!-- a [label = '@@1'] -->
<!-- b [label = '@@2'] -->
<!-- c [label = '@@3'] -->
<!-- d [label = '@@4'] -->
<!-- a -> b -> c -> d -->
<!-- } -->
<!-- [1]:  paste0('Raw Data (n = ', data$a, ')') -->
<!-- [2]: paste0('Remove Errors (n = ', data$b, ')') -->
<!-- [3]: paste0('Identify Potential Customers (n = ', data$c, ')') -->
<!-- [4]: paste0('Select Top Priorities (n = ', data$d, ')') -->
<!-- ") -->
<!-- ``` -->
<!-- ### CONSORT diagram  {.unnumbered} -->
<!-- THIS SECTION IS UNDER CONSTRUCTION   -->
<!-- https://scriptsandstatistics.wordpress.com/2017/12/22/how-to-draw-a-consort-flow-diagram-using-r-and-graphviz/ -->
<!-- Note above is out of date via DiagrammeR -->
<!-- ======================================================= -->
</div>
</div>
<div id="sơ-đồ-alluvialsankey-1" class="section level2" number="35.3">
<h2><span class="header-section-number">35.3</span> Sơ đồ Alluvial/Sankey</h2>
<div id="gọi-packages-13" class="section level3 unnumbered">
<h3>Gọi packages</h3>
<p>Đoạn code dưới đây hiển thị cách gọi các packages cần thiết cho các phân tích. Trong cuốn sách này, chúng tôi nhấn mạnh đến hàm <code>p_load()</code> từ package <strong>pacman</strong>, cài đặt gói nếu cần <em>và</em> gọi nó ra để sử dụng. Bạn cũng có thể gọi các packages đã cài đặt với hàm <code>library()</code> từ <strong>base</strong> R. Xem chương <a href="basics.html#basics">R Cơ bản</a> để biết thêm thông tin về các package R.</p>
<p>Chúng ta gọi package <strong>networkD3</strong> để vẽ sơ đồ và package <strong>tidyverse</strong> cho các bước chuẩn bị dữ liệu.</p>
<div class="sourceCode" id="cb1628"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1628-1"><a href="diagrams.html#cb1628-1" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(</span>
<span id="cb1628-2"><a href="diagrams.html#cb1628-2" tabindex="-1"></a>  networkD3,</span>
<span id="cb1628-3"><a href="diagrams.html#cb1628-3" tabindex="-1"></a>  tidyverse)</span></code></pre></div>
</div>
<div id="vẽ-đồ-thị-từ-một-tập-dữ-liệu" class="section level3 unnumbered">
<h3>Vẽ đồ thị từ một tập dữ liệu</h3>
<p>Vẽ những mối liên quan trong một tập dữ liệu. Dưới đây, chúng tôi minh họa việc sử dụng package này với bộ số liệu <code>linelist</code>. Hãy đọc thêm <a href="https://www.r-graph-gallery.com/321-introduction-to-interactive-sankey-diagram-2.html">hướng dẫn trực tuyến sau.</a>.</p>
<p>Chúng ta sẽ bắt đầu bằng cách lấy số lượng các trường hợp theo sự kết hợp của nhóm tuổi và bệnh viện. Chúng ta cũng xóa các giá trị thiếu nhóm tuổi để làm sạch. Chúng ta cũng gắn lại nhãn các cột <code>hospital</code> và cột <code>age_cat</code> tương ứng là <code>source</code> và <code>target</code>. Đây sẽ là hai mặt của sơ đồ Alluvial.</p>
<div class="sourceCode" id="cb1629"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1629-1"><a href="diagrams.html#cb1629-1" tabindex="-1"></a><span class="co"># counts by hospital and age category</span></span>
<span id="cb1629-2"><a href="diagrams.html#cb1629-2" tabindex="-1"></a>links <span class="ot">&lt;-</span> linelist <span class="sc">%&gt;%</span> </span>
<span id="cb1629-3"><a href="diagrams.html#cb1629-3" tabindex="-1"></a>  <span class="fu">drop_na</span>(age_cat) <span class="sc">%&gt;%</span> </span>
<span id="cb1629-4"><a href="diagrams.html#cb1629-4" tabindex="-1"></a>  <span class="fu">select</span>(hospital, age_cat) <span class="sc">%&gt;%</span></span>
<span id="cb1629-5"><a href="diagrams.html#cb1629-5" tabindex="-1"></a>  <span class="fu">count</span>(hospital, age_cat) <span class="sc">%&gt;%</span> </span>
<span id="cb1629-6"><a href="diagrams.html#cb1629-6" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">source =</span> hospital,</span>
<span id="cb1629-7"><a href="diagrams.html#cb1629-7" tabindex="-1"></a>         <span class="at">target =</span> age_cat)</span></code></pre></div>
<p>Tập dữ liệu bây giờ trông như thế này:</p>
<div class="datatables html-widget html-fill-item" id="htmlwidget-d63423bc548f12db2598" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-d63423bc548f12db2598">{"x":{"filter":"none","vertical":false,"data":[["Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Military Hospital","Military Hospital","Military Hospital","Military Hospital","Military Hospital","Military Hospital","Military Hospital","Military Hospital","Missing","Missing","Missing","Missing","Missing","Missing","Missing","Missing","Other","Other","Other","Other","Other","Other","Other","Port Hospital","Port Hospital","Port Hospital","Port Hospital","Port Hospital","Port Hospital","Port Hospital","St. Mark's Maternity Hospital (SMMH)","St. Mark's Maternity Hospital (SMMH)","St. Mark's Maternity Hospital (SMMH)","St. Mark's Maternity Hospital (SMMH)","St. Mark's Maternity Hospital (SMMH)","St. Mark's Maternity Hospital (SMMH)","St. Mark's Maternity Hospital (SMMH)","St. Mark's Maternity Hospital (SMMH)"],["0-4","5-9","10-14","15-19","20-29","30-49","50-69","0-4","5-9","10-14","15-19","20-29","30-49","50-69","70+","0-4","5-9","10-14","15-19","20-29","30-49","50-69","70+","0-4","5-9","10-14","15-19","20-29","30-49","50-69","0-4","5-9","10-14","15-19","20-29","30-49","50-69","0-4","5-9","10-14","15-19","20-29","30-49","50-69","70+"],[84,84,82,58,73,57,7,171,176,121,106,180,121,7,2,281,268,219,196,275,177,22,3,163,154,162,104,167,104,19,331,318,267,234,309,248,32,65,95,90,45,69,47,8,1]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>source<\/th>\n      <th>target<\/th>\n      <th>n<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":2},{"name":"source","targets":0},{"name":"target","targets":1},{"name":"n","targets":2}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script>
<p>Bây giờ chúng ta tạo một data frame cho tất cả các nút của sơ đồ, dưới cột <code>name</code>. Điều này bao gồm tất cả các giá trị cho cột <code>hospital</code> và cột <code>age_cat</code>. Lưu ý rằng chúng ta cần đảm bảo tất cả chúng đều có kiểu Ký tự trước khi kết hợp chúng và điều chỉnh cột ID thành dạng số thay vì dạng nhãn:</p>
<div class="sourceCode" id="cb1630"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1630-1"><a href="diagrams.html#cb1630-1" tabindex="-1"></a><span class="co"># The unique node names</span></span>
<span id="cb1630-2"><a href="diagrams.html#cb1630-2" tabindex="-1"></a>nodes <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb1630-3"><a href="diagrams.html#cb1630-3" tabindex="-1"></a>  <span class="at">name=</span><span class="fu">c</span>(<span class="fu">as.character</span>(links<span class="sc">$</span>source), <span class="fu">as.character</span>(links<span class="sc">$</span>target)) <span class="sc">%&gt;%</span> </span>
<span id="cb1630-4"><a href="diagrams.html#cb1630-4" tabindex="-1"></a>    <span class="fu">unique</span>()</span>
<span id="cb1630-5"><a href="diagrams.html#cb1630-5" tabindex="-1"></a>  )</span>
<span id="cb1630-6"><a href="diagrams.html#cb1630-6" tabindex="-1"></a></span>
<span id="cb1630-7"><a href="diagrams.html#cb1630-7" tabindex="-1"></a>nodes  <span class="co"># print</span></span></code></pre></div>
<pre><code>##                                    name
## 1                      Central Hospital
## 2                     Military Hospital
## 3                               Missing
## 4                                 Other
## 5                         Port Hospital
## 6  St. Mark&#39;s Maternity Hospital (SMMH)
## 7                                   0-4
## 8                                   5-9
## 9                                 10-14
## 10                                15-19
## 11                                20-29
## 12                                30-49
## 13                                50-69
## 14                                  70+</code></pre>
<p>Chúng ta tiếp tục chỉnh sửa data frame có tên <code>links</code> mà chúng ta đã tạo ở trên với hàm <code>count()</code>. Chúng ta thêm hai cột dạng số là cột <code>IDsource</code> và <code>IDtarget</code> để thực sự phản ánh/tạo liên kết giữa các nút. Các cột này sẽ giữ số thứ tự hàng (vị trí) của nút nguồn và nút đích. Số 1 sẽ bị trừ để các số vị trí này bắt đầu bằng 0 (không phải 1).</p>
<div class="sourceCode" id="cb1632"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1632-1"><a href="diagrams.html#cb1632-1" tabindex="-1"></a><span class="co"># match to numbers, not names</span></span>
<span id="cb1632-2"><a href="diagrams.html#cb1632-2" tabindex="-1"></a>links<span class="sc">$</span>IDsource <span class="ot">&lt;-</span> <span class="fu">match</span>(links<span class="sc">$</span>source, nodes<span class="sc">$</span>name)<span class="sc">-</span><span class="dv">1</span> </span>
<span id="cb1632-3"><a href="diagrams.html#cb1632-3" tabindex="-1"></a>links<span class="sc">$</span>IDtarget <span class="ot">&lt;-</span> <span class="fu">match</span>(links<span class="sc">$</span>target, nodes<span class="sc">$</span>name)<span class="sc">-</span><span class="dv">1</span></span></code></pre></div>
<p>Tập dữ liệu link bây giờ trông như sau:</p>
<div class="datatables html-widget html-fill-item" id="htmlwidget-ee78860c12cf96fa9d99" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-ee78860c12cf96fa9d99">{"x":{"filter":"none","vertical":false,"data":[["Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Central Hospital","Military Hospital","Military Hospital","Military Hospital","Military Hospital","Military Hospital","Military Hospital","Military Hospital","Military Hospital","Missing","Missing","Missing","Missing","Missing","Missing","Missing","Missing","Other","Other","Other","Other","Other","Other","Other","Port Hospital","Port Hospital","Port Hospital","Port Hospital","Port Hospital","Port Hospital","Port Hospital","St. Mark's Maternity Hospital (SMMH)","St. Mark's Maternity Hospital (SMMH)","St. Mark's Maternity Hospital (SMMH)","St. Mark's Maternity Hospital (SMMH)","St. Mark's Maternity Hospital (SMMH)","St. Mark's Maternity Hospital (SMMH)","St. Mark's Maternity Hospital (SMMH)","St. Mark's Maternity Hospital (SMMH)"],["0-4","5-9","10-14","15-19","20-29","30-49","50-69","0-4","5-9","10-14","15-19","20-29","30-49","50-69","70+","0-4","5-9","10-14","15-19","20-29","30-49","50-69","70+","0-4","5-9","10-14","15-19","20-29","30-49","50-69","0-4","5-9","10-14","15-19","20-29","30-49","50-69","0-4","5-9","10-14","15-19","20-29","30-49","50-69","70+"],[84,84,82,58,73,57,7,171,176,121,106,180,121,7,2,281,268,219,196,275,177,22,3,163,154,162,104,167,104,19,331,318,267,234,309,248,32,65,95,90,45,69,47,8,1],[0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5],[6,7,8,9,10,11,12,6,7,8,9,10,11,12,13,6,7,8,9,10,11,12,13,6,7,8,9,10,11,12,6,7,8,9,10,11,12,6,7,8,9,10,11,12,13]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>source<\/th>\n      <th>target<\/th>\n      <th>n<\/th>\n      <th>IDsource<\/th>\n      <th>IDtarget<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":[2,3,4]},{"name":"source","targets":0},{"name":"target","targets":1},{"name":"n","targets":2},{"name":"IDsource","targets":3},{"name":"IDtarget","targets":4}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script>
<p>Bây giờ, chúng ta vẽ sơ đồ Sankey với hàm <code>sankeyNetwork()</code>. Bạn có thể đọc thêm về từng đối số bằng cách chạy lệnh <code>?sankeyNetwork</code> trong bảng điều khiển. Lưu ý rằng trừ khi bạn đặt <code>iterations = 0</code>, thứ tự các nút của bạn có thể sẽ không như bạn mong đợi.</p>
<div class="sourceCode" id="cb1633"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1633-1"><a href="diagrams.html#cb1633-1" tabindex="-1"></a><span class="co"># plot</span></span>
<span id="cb1633-2"><a href="diagrams.html#cb1633-2" tabindex="-1"></a><span class="do">######</span></span>
<span id="cb1633-3"><a href="diagrams.html#cb1633-3" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">sankeyNetwork</span>(</span>
<span id="cb1633-4"><a href="diagrams.html#cb1633-4" tabindex="-1"></a>  <span class="at">Links =</span> links,</span>
<span id="cb1633-5"><a href="diagrams.html#cb1633-5" tabindex="-1"></a>  <span class="at">Nodes =</span> nodes,</span>
<span id="cb1633-6"><a href="diagrams.html#cb1633-6" tabindex="-1"></a>  <span class="at">Source =</span> <span class="st">&quot;IDsource&quot;</span>,</span>
<span id="cb1633-7"><a href="diagrams.html#cb1633-7" tabindex="-1"></a>  <span class="at">Target =</span> <span class="st">&quot;IDtarget&quot;</span>,</span>
<span id="cb1633-8"><a href="diagrams.html#cb1633-8" tabindex="-1"></a>  <span class="at">Value =</span> <span class="st">&quot;n&quot;</span>,</span>
<span id="cb1633-9"><a href="diagrams.html#cb1633-9" tabindex="-1"></a>  <span class="at">NodeID =</span> <span class="st">&quot;name&quot;</span>,</span>
<span id="cb1633-10"><a href="diagrams.html#cb1633-10" tabindex="-1"></a>  <span class="at">units =</span> <span class="st">&quot;TWh&quot;</span>,</span>
<span id="cb1633-11"><a href="diagrams.html#cb1633-11" tabindex="-1"></a>  <span class="at">fontSize =</span> <span class="dv">12</span>,</span>
<span id="cb1633-12"><a href="diagrams.html#cb1633-12" tabindex="-1"></a>  <span class="at">nodeWidth =</span> <span class="dv">30</span>,</span>
<span id="cb1633-13"><a href="diagrams.html#cb1633-13" tabindex="-1"></a>  <span class="at">iterations =</span> <span class="dv">0</span>)        <span class="co"># ensure node order is as in data</span></span>
<span id="cb1633-14"><a href="diagrams.html#cb1633-14" tabindex="-1"></a>p</span></code></pre></div>
<div class="sankeyNetwork html-widget html-fill-item" id="htmlwidget-1881ee066c36b98a548e" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-1881ee066c36b98a548e">{"x":{"links":{"source":[0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5],"target":[6,7,8,9,10,11,12,6,7,8,9,10,11,12,13,6,7,8,9,10,11,12,13,6,7,8,9,10,11,12,6,7,8,9,10,11,12,6,7,8,9,10,11,12,13],"value":[84,84,82,58,73,57,7,171,176,121,106,180,121,7,2,281,268,219,196,275,177,22,3,163,154,162,104,167,104,19,331,318,267,234,309,248,32,65,95,90,45,69,47,8,1]},"nodes":{"name":["Central Hospital","Military Hospital","Missing","Other","Port Hospital","St. Mark's Maternity Hospital (SMMH)","0-4","5-9","10-14","15-19","20-29","30-49","50-69","70+"],"group":["Central Hospital","Military Hospital","Missing","Other","Port Hospital","St. Mark's Maternity Hospital (SMMH)","0-4","5-9","10-14","15-19","20-29","30-49","50-69","70+"]},"options":{"NodeID":"name","NodeGroup":"name","LinkGroup":null,"colourScale":"d3.scaleOrdinal(d3.schemeCategory20);","fontSize":12,"fontFamily":null,"nodeWidth":30,"nodePadding":10,"units":"TWh","margin":{"top":null,"right":null,"bottom":null,"left":null},"iterations":0,"sinksRight":true}},"evals":[],"jsHooks":[]}</script>
<p>Đây là một ví dụ trong đó Kết quả của bệnh nhân cũng được bao gồm. Lưu ý trong bước chuẩn bị dữ liệu, chúng ta phải tính toán số lượng các trường hợp giữa tuổi và bệnh viện, và phân biệt biệt giữa bệnh viện và outcome - sau đó liên kết tất cả các số lượng này với nhau bằng hàm <code>bind_rows()</code>.</p>
<div class="sourceCode" id="cb1634"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1634-1"><a href="diagrams.html#cb1634-1" tabindex="-1"></a><span class="co"># counts by hospital and age category</span></span>
<span id="cb1634-2"><a href="diagrams.html#cb1634-2" tabindex="-1"></a>age_hosp_links <span class="ot">&lt;-</span> linelist <span class="sc">%&gt;%</span> </span>
<span id="cb1634-3"><a href="diagrams.html#cb1634-3" tabindex="-1"></a>  <span class="fu">drop_na</span>(age_cat) <span class="sc">%&gt;%</span> </span>
<span id="cb1634-4"><a href="diagrams.html#cb1634-4" tabindex="-1"></a>  <span class="fu">select</span>(hospital, age_cat) <span class="sc">%&gt;%</span></span>
<span id="cb1634-5"><a href="diagrams.html#cb1634-5" tabindex="-1"></a>  <span class="fu">count</span>(hospital, age_cat) <span class="sc">%&gt;%</span> </span>
<span id="cb1634-6"><a href="diagrams.html#cb1634-6" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">source =</span> age_cat,          <span class="co"># re-name</span></span>
<span id="cb1634-7"><a href="diagrams.html#cb1634-7" tabindex="-1"></a>         <span class="at">target =</span> hospital)</span>
<span id="cb1634-8"><a href="diagrams.html#cb1634-8" tabindex="-1"></a></span>
<span id="cb1634-9"><a href="diagrams.html#cb1634-9" tabindex="-1"></a>hosp_out_links <span class="ot">&lt;-</span> linelist <span class="sc">%&gt;%</span> </span>
<span id="cb1634-10"><a href="diagrams.html#cb1634-10" tabindex="-1"></a>    <span class="fu">drop_na</span>(age_cat) <span class="sc">%&gt;%</span> </span>
<span id="cb1634-11"><a href="diagrams.html#cb1634-11" tabindex="-1"></a>    <span class="fu">select</span>(hospital, outcome) <span class="sc">%&gt;%</span> </span>
<span id="cb1634-12"><a href="diagrams.html#cb1634-12" tabindex="-1"></a>    <span class="fu">count</span>(hospital, outcome) <span class="sc">%&gt;%</span> </span>
<span id="cb1634-13"><a href="diagrams.html#cb1634-13" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="at">source =</span> hospital,       <span class="co"># re-name</span></span>
<span id="cb1634-14"><a href="diagrams.html#cb1634-14" tabindex="-1"></a>           <span class="at">target =</span> outcome)</span>
<span id="cb1634-15"><a href="diagrams.html#cb1634-15" tabindex="-1"></a></span>
<span id="cb1634-16"><a href="diagrams.html#cb1634-16" tabindex="-1"></a><span class="co"># combine links</span></span>
<span id="cb1634-17"><a href="diagrams.html#cb1634-17" tabindex="-1"></a>links <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(age_hosp_links, hosp_out_links)</span>
<span id="cb1634-18"><a href="diagrams.html#cb1634-18" tabindex="-1"></a></span>
<span id="cb1634-19"><a href="diagrams.html#cb1634-19" tabindex="-1"></a><span class="co"># The unique node names</span></span>
<span id="cb1634-20"><a href="diagrams.html#cb1634-20" tabindex="-1"></a>nodes <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb1634-21"><a href="diagrams.html#cb1634-21" tabindex="-1"></a>  <span class="at">name=</span><span class="fu">c</span>(<span class="fu">as.character</span>(links<span class="sc">$</span>source), <span class="fu">as.character</span>(links<span class="sc">$</span>target)) <span class="sc">%&gt;%</span> </span>
<span id="cb1634-22"><a href="diagrams.html#cb1634-22" tabindex="-1"></a>    <span class="fu">unique</span>()</span>
<span id="cb1634-23"><a href="diagrams.html#cb1634-23" tabindex="-1"></a>  )</span>
<span id="cb1634-24"><a href="diagrams.html#cb1634-24" tabindex="-1"></a></span>
<span id="cb1634-25"><a href="diagrams.html#cb1634-25" tabindex="-1"></a><span class="co"># Create id numbers</span></span>
<span id="cb1634-26"><a href="diagrams.html#cb1634-26" tabindex="-1"></a>links<span class="sc">$</span>IDsource <span class="ot">&lt;-</span> <span class="fu">match</span>(links<span class="sc">$</span>source, nodes<span class="sc">$</span>name)<span class="sc">-</span><span class="dv">1</span> </span>
<span id="cb1634-27"><a href="diagrams.html#cb1634-27" tabindex="-1"></a>links<span class="sc">$</span>IDtarget <span class="ot">&lt;-</span> <span class="fu">match</span>(links<span class="sc">$</span>target, nodes<span class="sc">$</span>name)<span class="sc">-</span><span class="dv">1</span></span>
<span id="cb1634-28"><a href="diagrams.html#cb1634-28" tabindex="-1"></a></span>
<span id="cb1634-29"><a href="diagrams.html#cb1634-29" tabindex="-1"></a><span class="co"># plot</span></span>
<span id="cb1634-30"><a href="diagrams.html#cb1634-30" tabindex="-1"></a><span class="do">######</span></span>
<span id="cb1634-31"><a href="diagrams.html#cb1634-31" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">sankeyNetwork</span>(<span class="at">Links =</span> links,</span>
<span id="cb1634-32"><a href="diagrams.html#cb1634-32" tabindex="-1"></a>                   <span class="at">Nodes =</span> nodes,</span>
<span id="cb1634-33"><a href="diagrams.html#cb1634-33" tabindex="-1"></a>                   <span class="at">Source =</span> <span class="st">&quot;IDsource&quot;</span>,</span>
<span id="cb1634-34"><a href="diagrams.html#cb1634-34" tabindex="-1"></a>                   <span class="at">Target =</span> <span class="st">&quot;IDtarget&quot;</span>,</span>
<span id="cb1634-35"><a href="diagrams.html#cb1634-35" tabindex="-1"></a>                   <span class="at">Value =</span> <span class="st">&quot;n&quot;</span>,</span>
<span id="cb1634-36"><a href="diagrams.html#cb1634-36" tabindex="-1"></a>                   <span class="at">NodeID =</span> <span class="st">&quot;name&quot;</span>,</span>
<span id="cb1634-37"><a href="diagrams.html#cb1634-37" tabindex="-1"></a>                   <span class="at">units =</span> <span class="st">&quot;TWh&quot;</span>,</span>
<span id="cb1634-38"><a href="diagrams.html#cb1634-38" tabindex="-1"></a>                   <span class="at">fontSize =</span> <span class="dv">12</span>,</span>
<span id="cb1634-39"><a href="diagrams.html#cb1634-39" tabindex="-1"></a>                   <span class="at">nodeWidth =</span> <span class="dv">30</span>,</span>
<span id="cb1634-40"><a href="diagrams.html#cb1634-40" tabindex="-1"></a>                   <span class="at">iterations =</span> <span class="dv">0</span>)</span>
<span id="cb1634-41"><a href="diagrams.html#cb1634-41" tabindex="-1"></a>p</span></code></pre></div>
<div class="sankeyNetwork html-widget html-fill-item" id="htmlwidget-63f0b857a30a438cbec6" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-63f0b857a30a438cbec6">{"x":{"links":{"source":[0,1,2,3,4,5,6,0,1,2,3,4,5,6,7,0,1,2,3,4,5,6,7,0,1,2,3,4,5,6,0,1,2,3,4,5,6,0,1,2,3,4,5,6,7,8,8,8,9,9,9,10,10,10,11,11,11,12,12,12,13,13,13],"target":[8,8,8,8,8,8,8,9,9,9,9,9,9,9,9,10,10,10,10,10,10,10,10,11,11,11,11,11,11,11,12,12,12,12,12,12,12,13,13,13,13,13,13,13,13,14,15,16,14,15,16,14,15,16,14,15,16,14,15,16,14,15,16],"value":[84,84,82,58,73,57,7,171,176,121,106,180,121,7,2,281,268,219,196,275,177,22,3,163,154,162,104,167,104,19,331,318,267,234,309,248,32,65,95,90,45,69,47,8,1,191,162,92,393,307,184,599,506,336,391,285,197,778,570,391,198,125,97]},"nodes":{"name":["0-4","5-9","10-14","15-19","20-29","30-49","50-69","70+","Central Hospital","Military Hospital","Missing","Other","Port Hospital","St. Mark's Maternity Hospital (SMMH)","Death","Recover",null],"group":["0-4","5-9","10-14","15-19","20-29","30-49","50-69","70+","Central Hospital","Military Hospital","Missing","Other","Port Hospital","St. Mark's Maternity Hospital (SMMH)","Death","Recover",null]},"options":{"NodeID":"name","NodeGroup":"name","LinkGroup":null,"colourScale":"d3.scaleOrdinal(d3.schemeCategory20);","fontSize":12,"fontFamily":null,"nodeWidth":30,"nodePadding":10,"units":"TWh","margin":{"top":null,"right":null,"bottom":null,"left":null},"iterations":0,"sinksRight":true}},"evals":[],"jsHooks":[]}</script>
<p><a href="https://www.displayr.com/sankey-diagrams-r/" class="uri">https://www.displayr.com/sankey-diagrams-r/</a></p>
<!-- ======================================================= -->
</div>
</div>
<div id="chuỗi-sự-kiện-trong-thời-gian" class="section level2" number="35.4">
<h2><span class="header-section-number">35.4</span> Chuỗi sự kiện trong thời gian</h2>
<p>Để tạo dòng thời gian hiển thị các sự kiện cụ thể, bạn có thể sử dụng package <code>vistime</code>.</p>
<p>Xem thêm <a href="https://cran.r-project.org/web/packages/vistime/vignettes/vistime-vignette.html#ex.-2-project-planning">vignette</a> này</p>
<div class="sourceCode" id="cb1635"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1635-1"><a href="diagrams.html#cb1635-1" tabindex="-1"></a><span class="co"># load package</span></span>
<span id="cb1635-2"><a href="diagrams.html#cb1635-2" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(vistime,  <span class="co"># make the timeline</span></span>
<span id="cb1635-3"><a href="diagrams.html#cb1635-3" tabindex="-1"></a>               plotly    <span class="co"># for interactive visualization</span></span>
<span id="cb1635-4"><a href="diagrams.html#cb1635-4" tabindex="-1"></a>               )</span></code></pre></div>
<p>Đây là tập dữ liệu mà chúng ta sẽ bắt đầu sử dụng:</p>
<div class="datatables html-widget html-fill-item" id="htmlwidget-648df529393dcfe41a1d" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-648df529393dcfe41a1d">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","data":[["                       Event 1","                       Event 1","                       Event 1","                       Event 1","                       Event 1","                       Event 1","                       Event 1","                       Event 1","                       Event 1","                       Event 2","                       Event 2","                       Event 2","                       Event 2","                       Event 2"],[" Group A"," Group B"," Group C"," Group D"," Group E"," Group F"," Group G"," Group H"," Group I"," Group A"," Group C"," Group J"," Group J"," Group J"],["2020-01-22","2020-01-23","2020-01-23","2020-01-25","2020-01-25","2020-01-26","2020-01-27","2020-01-27","2020-01-27","2020-01-28","2020-01-28","2020-01-28","2020-01-28","2020-01-28"],["2020-01-22","2020-01-23","2020-01-23","2020-01-25","2020-01-25","2020-01-26","2020-01-27","2020-01-27","2020-01-27","2020-01-28","2020-01-28","2020-01-28","2020-01-28","2020-01-28"],[" #90caf9"," #90caf9"," #1565c0"," #f44336"," #90caf9"," #8d6e63"," #1565c0"," #90caf9","#90a4ae","#fc8d62"," #6a3d9a"," #90caf9"," #fc8d62"," #1565c0"]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>event<\/th>\n      <th>group<\/th>\n      <th>start<\/th>\n      <th>end<\/th>\n      <th>color<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"columnDefs":[{"name":"event","targets":0},{"name":"group","targets":1},{"name":"start","targets":2},{"name":"end","targets":3},{"name":"color","targets":4}],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true,"lengthMenu":[5,10,25,50,100]},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script>
<div class="sourceCode" id="cb1636"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1636-1"><a href="diagrams.html#cb1636-1" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">vistime</span>(data)    <span class="co"># apply vistime</span></span>
<span id="cb1636-2"><a href="diagrams.html#cb1636-2" tabindex="-1"></a></span>
<span id="cb1636-3"><a href="diagrams.html#cb1636-3" tabindex="-1"></a><span class="fu">library</span>(plotly)</span>
<span id="cb1636-4"><a href="diagrams.html#cb1636-4" tabindex="-1"></a></span>
<span id="cb1636-5"><a href="diagrams.html#cb1636-5" tabindex="-1"></a><span class="co"># step 1: transform into a list</span></span>
<span id="cb1636-6"><a href="diagrams.html#cb1636-6" tabindex="-1"></a>pp <span class="ot">&lt;-</span> <span class="fu">plotly_build</span>(p)</span>
<span id="cb1636-7"><a href="diagrams.html#cb1636-7" tabindex="-1"></a></span>
<span id="cb1636-8"><a href="diagrams.html#cb1636-8" tabindex="-1"></a><span class="co"># step 2: Marker size</span></span>
<span id="cb1636-9"><a href="diagrams.html#cb1636-9" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(pp<span class="sc">$</span>x<span class="sc">$</span>data)){</span>
<span id="cb1636-10"><a href="diagrams.html#cb1636-10" tabindex="-1"></a>  <span class="cf">if</span>(pp<span class="sc">$</span>x<span class="sc">$</span>data[[i]]<span class="sc">$</span>mode <span class="sc">==</span> <span class="st">&quot;markers&quot;</span>) pp<span class="sc">$</span>x<span class="sc">$</span>data[[i]]<span class="sc">$</span>marker<span class="sc">$</span>size <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb1636-11"><a href="diagrams.html#cb1636-11" tabindex="-1"></a>}</span>
<span id="cb1636-12"><a href="diagrams.html#cb1636-12" tabindex="-1"></a></span>
<span id="cb1636-13"><a href="diagrams.html#cb1636-13" tabindex="-1"></a><span class="co"># step 3: text size</span></span>
<span id="cb1636-14"><a href="diagrams.html#cb1636-14" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(pp<span class="sc">$</span>x<span class="sc">$</span>data)){</span>
<span id="cb1636-15"><a href="diagrams.html#cb1636-15" tabindex="-1"></a>  <span class="cf">if</span>(pp<span class="sc">$</span>x<span class="sc">$</span>data[[i]]<span class="sc">$</span>mode <span class="sc">==</span> <span class="st">&quot;text&quot;</span>) pp<span class="sc">$</span>x<span class="sc">$</span>data[[i]]<span class="sc">$</span>textfont<span class="sc">$</span>size <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb1636-16"><a href="diagrams.html#cb1636-16" tabindex="-1"></a>}</span>
<span id="cb1636-17"><a href="diagrams.html#cb1636-17" tabindex="-1"></a></span>
<span id="cb1636-18"><a href="diagrams.html#cb1636-18" tabindex="-1"></a></span>
<span id="cb1636-19"><a href="diagrams.html#cb1636-19" tabindex="-1"></a><span class="co"># step 4: text position</span></span>
<span id="cb1636-20"><a href="diagrams.html#cb1636-20" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(pp<span class="sc">$</span>x<span class="sc">$</span>data)){</span>
<span id="cb1636-21"><a href="diagrams.html#cb1636-21" tabindex="-1"></a>  <span class="cf">if</span>(pp<span class="sc">$</span>x<span class="sc">$</span>data[[i]]<span class="sc">$</span>mode <span class="sc">==</span> <span class="st">&quot;text&quot;</span>) pp<span class="sc">$</span>x<span class="sc">$</span>data[[i]]<span class="sc">$</span>textposition <span class="ot">&lt;-</span> <span class="st">&quot;right&quot;</span></span>
<span id="cb1636-22"><a href="diagrams.html#cb1636-22" tabindex="-1"></a>}</span>
<span id="cb1636-23"><a href="diagrams.html#cb1636-23" tabindex="-1"></a></span>
<span id="cb1636-24"><a href="diagrams.html#cb1636-24" tabindex="-1"></a><span class="co">#print</span></span>
<span id="cb1636-25"><a href="diagrams.html#cb1636-25" tabindex="-1"></a>pp</span></code></pre></div>
<div class="plotly html-widget html-fill-item" id="htmlwidget-92b3cfea855e1cba06f6" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-92b3cfea855e1cba06f6">{"x":{"visdat":{"3254355d274f":["function () ","plotlyVisDat"]},"cur_data":"3254355d274f","attrs":{"3254355d274f":{"mode":"lines","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"},"3254355d274f.1":{"mode":"markers","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter","x":["2020-01-22 00:00:00.000000","2020-01-28 00:00:00.000000","2020-01-23 00:00:00.000000","2020-01-23 00:00:00.000000","2020-01-28 00:00:00.000000","2020-01-25 00:00:00.000000","2020-01-25 00:00:00.000000","2020-01-26 00:00:00.000000","2020-01-27 00:00:00.000000","2020-01-27 00:00:00.000000","2020-01-27 00:00:00.000000","2020-01-28 00:00:00.000000","2020-01-28 00:00:00.000000","2020-01-28 00:00:00.000000"],"y":[21,21,19,17,17,15,13,11,9,7,5,3,2,1],"marker":{"color":["#90caf9","#fc8d62","#90caf9","#1565c0","#6a3d9a","#f44336","#90caf9","#8d6e63","#1565c0","#90caf9","#90a4ae","#90caf9","#fc8d62","#1565c0"],"size":10,"symbol":"circle","line":{"color":"black","width":1}},"showlegend":false,"hoverinfo":"text","text":["<b>Event 1: 2020-01-22<\/b>","<b>Event 2: 2020-01-28<\/b>","<b>Event 1: 2020-01-23<\/b>","<b>Event 1: 2020-01-23<\/b>","<b>Event 2: 2020-01-28<\/b>","<b>Event 1: 2020-01-25<\/b>","<b>Event 1: 2020-01-25<\/b>","<b>Event 1: 2020-01-26<\/b>","<b>Event 1: 2020-01-27<\/b>","<b>Event 1: 2020-01-27<\/b>","<b>Event 1: 2020-01-27<\/b>","<b>Event 2: 2020-01-28<\/b>","<b>Event 2: 2020-01-28<\/b>","<b>Event 2: 2020-01-28<\/b>"],"inherit":true},"3254355d274f.2":{"mode":"text","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter","x":["2020-01-22 00:00:00.000000","2020-01-28 00:00:00.000000","2020-01-23 00:00:00.000000","2020-01-23 00:00:00.000000","2020-01-28 00:00:00.000000","2020-01-25 00:00:00.000000","2020-01-25 00:00:00.000000","2020-01-26 00:00:00.000000","2020-01-27 00:00:00.000000","2020-01-27 00:00:00.000000","2020-01-27 00:00:00.000000","2020-01-28 00:00:00.000000","2020-01-28 00:00:00.000000","2020-01-28 00:00:00.000000"],"y":[21.5,20.5,19.5,16.5,17.5,14.5,13.5,10.5,9.5,6.5,5.5,2.5,2.5,0.5],"text":["Event 1","Event 2","Event 1","Event 1","Event 2","Event 1","Event 1","Event 1","Event 1","Event 1","Event 1","Event 2","Event 2","Event 2"],"textfont":{"family":"Arial","size":14,"color":["rgba(0,0,0,1)","rgba(0,0,0,1)","rgba(0,0,0,1)","rgba(0,0,0,1)","rgba(0,0,0,1)","rgba(0,0,0,1)","rgba(0,0,0,1)","rgba(0,0,0,1)","rgba(0,0,0,1)","rgba(0,0,0,1)","rgba(0,0,0,1)","rgba(0,0,0,1)","rgba(0,0,0,1)","rgba(0,0,0,1)"]},"textposition":"center","showlegend":false,"hoverinfo":"none","inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"hovermode":"closest","plot_bgcolor":"#FCFCFC","shapes":[{"type":"line","x0":0,"x1":1,"xref":"paper","y0":4,"y1":4,"line":{"color":"grey65","width":0.5}},{"type":"line","x0":0,"x1":1,"xref":"paper","y0":6,"y1":6,"line":{"color":"grey65","width":0.5}},{"type":"line","x0":0,"x1":1,"xref":"paper","y0":8,"y1":8,"line":{"color":"grey65","width":0.5}},{"type":"line","x0":0,"x1":1,"xref":"paper","y0":10,"y1":10,"line":{"color":"grey65","width":0.5}},{"type":"line","x0":0,"x1":1,"xref":"paper","y0":12,"y1":12,"line":{"color":"grey65","width":0.5}},{"type":"line","x0":0,"x1":1,"xref":"paper","y0":14,"y1":14,"line":{"color":"grey65","width":0.5}},{"type":"line","x0":0,"x1":1,"xref":"paper","y0":16,"y1":16,"line":{"color":"grey65","width":0.5}},{"type":"line","x0":0,"x1":1,"xref":"paper","y0":18,"y1":18,"line":{"color":"grey65","width":0.5}},{"type":"line","x0":0,"x1":1,"xref":"paper","y0":20,"y1":20,"line":{"color":"grey65","width":0.5}}],"xaxis":{"domain":[0,1],"automargin":true,"linewidth":1,"mirror":true,"showgrid":true,"gridcolor":"grey90","title":""},"yaxis":{"domain":[0,1],"automargin":true,"linewidth":1,"mirror":true,"range":[0,22],"showgrid":false,"title":"","tickmode":"array","tickvals":[21,19,17,15,13,11,9,7,5,2],"ticktext":["Group A","Group B","Group C","Group D","Group E","Group F","Group G","Group H","Group I","Group J"]},"showlegend":false},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"mode":"lines","type":"scatter","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"line":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"mode":"markers","type":"scatter","x":["2020-01-22 00:00:00.000000","2020-01-28 00:00:00.000000","2020-01-23 00:00:00.000000","2020-01-23 00:00:00.000000","2020-01-28 00:00:00.000000","2020-01-25 00:00:00.000000","2020-01-25 00:00:00.000000","2020-01-26 00:00:00.000000","2020-01-27 00:00:00.000000","2020-01-27 00:00:00.000000","2020-01-27 00:00:00.000000","2020-01-28 00:00:00.000000","2020-01-28 00:00:00.000000","2020-01-28 00:00:00.000000"],"y":[21,21,19,17,17,15,13,11,9,7,5,3,2,1],"marker":{"color":["#90caf9","#fc8d62","#90caf9","#1565c0","#6a3d9a","#f44336","#90caf9","#8d6e63","#1565c0","#90caf9","#90a4ae","#90caf9","#fc8d62","#1565c0"],"size":10,"symbol":"circle","line":{"color":"black","width":1}},"showlegend":false,"hoverinfo":["text","text","text","text","text","text","text","text","text","text","text","text","text","text"],"text":["<b>Event 1: 2020-01-22<\/b>","<b>Event 2: 2020-01-28<\/b>","<b>Event 1: 2020-01-23<\/b>","<b>Event 1: 2020-01-23<\/b>","<b>Event 2: 2020-01-28<\/b>","<b>Event 1: 2020-01-25<\/b>","<b>Event 1: 2020-01-25<\/b>","<b>Event 1: 2020-01-26<\/b>","<b>Event 1: 2020-01-27<\/b>","<b>Event 1: 2020-01-27<\/b>","<b>Event 1: 2020-01-27<\/b>","<b>Event 2: 2020-01-28<\/b>","<b>Event 2: 2020-01-28<\/b>","<b>Event 2: 2020-01-28<\/b>"],"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"line":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null},{"mode":"text","type":"scatter","x":["2020-01-22 00:00:00.000000","2020-01-28 00:00:00.000000","2020-01-23 00:00:00.000000","2020-01-23 00:00:00.000000","2020-01-28 00:00:00.000000","2020-01-25 00:00:00.000000","2020-01-25 00:00:00.000000","2020-01-26 00:00:00.000000","2020-01-27 00:00:00.000000","2020-01-27 00:00:00.000000","2020-01-27 00:00:00.000000","2020-01-28 00:00:00.000000","2020-01-28 00:00:00.000000","2020-01-28 00:00:00.000000"],"y":[21.5,20.5,19.5,16.5,17.5,14.5,13.5,10.5,9.5,6.5,5.5,2.5,2.5,0.5],"text":["Event 1","Event 2","Event 1","Event 1","Event 2","Event 1","Event 1","Event 1","Event 1","Event 1","Event 1","Event 2","Event 2","Event 2"],"textfont":{"family":"Arial","size":10,"color":["rgba(0,0,0,1)","rgba(0,0,0,1)","rgba(0,0,0,1)","rgba(0,0,0,1)","rgba(0,0,0,1)","rgba(0,0,0,1)","rgba(0,0,0,1)","rgba(0,0,0,1)","rgba(0,0,0,1)","rgba(0,0,0,1)","rgba(0,0,0,1)","rgba(0,0,0,1)","rgba(0,0,0,1)","rgba(0,0,0,1)"]},"textposition":"right","showlegend":false,"hoverinfo":["none","none","none","none","none","none","none","none","none","none","none","none","none","none"],"marker":{"color":"rgba(44,160,44,1)","line":{"color":"rgba(44,160,44,1)"}},"error_y":{"color":"rgba(44,160,44,1)"},"error_x":{"color":"rgba(44,160,44,1)"},"line":{"color":"rgba(44,160,44,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<!-- ======================================================= -->
</div>
<div id="sơ-đồ-dags" class="section level2" number="35.5">
<h2><span class="header-section-number">35.5</span> Sơ đồ DAGs</h2>
<p>Bạn có thể tạo sơ đồ DAG theo cách thủ công bằng cách sử dụng package <strong>DiagammeR</strong> và ngôn ngữ DOT như đã mô tả ở trên.</p>
<p>Ngoài ra, có các package như <strong>ggdag</strong> và <strong>daggity</strong></p>
<p><a href="https://cran.r-project.org/web/packages/ggdag/vignettes/intro-to-dags.html">Giới thiệu về sơ đồ DAGs</a></p>
<p><a href="https://www.r-bloggers.com/2019/08/causal-inference-with-dags-in-r/#:~:text=In%20a%20DAG%20all%20the,for%20drawing%20and%20analyzing%20DAGs.">Suy luận nhân quả với dags trong R</a></p>
<!-- ======================================================= -->
</div>
<div id="tài-nguyên-học-liệu-13" class="section level2" number="35.6">
<h2><span class="header-section-number">35.6</span> Tài nguyên học liệu</h2>
<p>Phần lớn nội dung ở trên liên quan đến ngôn ngữ DOT được tham khảo từ hướng dẫn <a href="https://mikeyharper.uk/flowcharts-in-r-using-diagrammer/">này</a></p>
<p>Một tài liệu khác chuyên sâu hơn tại đây <a href="http://rich-iannone.github.io/DiagrammeR/">Tài liệu về DiagammeR</a></p>
<p>Xem thêm về <a href="https://www.displayr.com/sankey-diagrams-r/">Sơ đồ Sankey tại đây</a></p>

</div>
</div>
  </main>

  <div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page">
      <h2>On this page</h2>
      <div id="book-on-this-page"></div>

      <div class="book-extra">
        <ul class="list-unstyled">
          <li><a id="book-source" href="#">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="#">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
      </div>
    </nav>
  </div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5">
  <div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Cẩm nang dịch tễ học với R</strong>" was written by the handbook team. It was last built on 2024-02-16.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer>


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
<script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>

</html>
