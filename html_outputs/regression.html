<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>19 Hồi quy đơn và đa biến | Cẩm nang dịch tễ học với R</title>

    <meta name="author" content="the handbook team" />
  
   <meta name="description" content="The Epi R Handbook is a R reference manual for applied epidemiology and public health." />
   <meta name="generator" content="placeholder" />
  <meta property="og:title" content="19 Hồi quy đơn và đa biến | Cẩm nang dịch tễ học với R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="The Epi R Handbook is a R reference manual for applied epidemiology and public health." />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="19 Hồi quy đơn và đa biến | Cẩm nang dịch tễ học với R" />
  
  <meta name="twitter:description" content="The Epi R Handbook is a R reference manual for applied epidemiology and public health." />
  
  <!-- JS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script>
  <script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script>
    <script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet" />
    <script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script>
    <script src="libs/bs3compat-0.6.1/transition.js"></script>
    <script src="libs/bs3compat-0.6.1/tabs.js"></script>
    <script src="libs/bs3compat-0.6.1/bs3compat.js"></script>
    <link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet" />
    <script src="libs/bs4_book-1.0.0/bs4_book.js"></script>
    <script src="libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
    <link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
    <script src="libs/datatables-binding-0.31/datatables.js"></script>
    <link href="libs/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet" />
    <link href="libs/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet" />
    <script src="libs/dt-core-1.13.6/js/jquery.dataTables.min.js"></script>
    <link href="libs/nouislider-7.0.10/jquery.nouislider.min.css" rel="stylesheet" />
    <script src="libs/nouislider-7.0.10/jquery.nouislider.min.js"></script>
    <link href="libs/selectize-0.12.0/selectize.bootstrap3.css" rel="stylesheet" />
    <script src="libs/selectize-0.12.0/selectize.min.js"></script>
    <link href="libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet" />
    <script src="libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>
    <script src="libs/kePrint-0.0.1/kePrint.js"></script>
    <link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
    <link href="libs/tabwid-1.1.3/tabwid.css" rel="stylesheet" />
    <script src="libs/tabwid-1.1.3/tabwid.js"></script>
    <link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
    <script src="libs/leaflet-1.3.1/leaflet.js"></script>
    <link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
    <script src="libs/proj4-2.6.2/proj4.min.js"></script>
    <script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
    <link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
    <script src="libs/leaflet-binding-2.2.1/leaflet.js"></script>
    <script src="libs/leaflet-providers-2.0.0/leaflet-providers_2.0.0.js"></script>
    <script src="libs/leaflet-providers-plugin-2.2.1/leaflet-providers-plugin.js"></script>
    <script src="libs/viz-1.8.2/viz.js"></script>
    <link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet" />
    <script src="libs/grViz-binding-1.0.11/grViz.js"></script>
    <script src="libs/d3-4.5.0/d3.min.js"></script>
    <script src="libs/sankey-1/sankey.js"></script>
    <script src="libs/sankeyNetwork-binding-0.4/sankeyNetwork.js"></script>
    <script src="libs/plotly-binding-4.10.4/plotly.js"></script>
    <script src="libs/typedarray-0.1/typedarray.min.js"></script>
    <link href="libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet" />
    <script src="libs/plotly-main-2.11.1/plotly-latest.min.js"></script>
    <link href="libs/vis-9.1.0/vis-network.min.css" rel="stylesheet" />
    <script src="libs/vis-9.1.0/vis-network.min.js"></script>
    <script src="libs/visNetwork-binding-2.1.2/visNetwork.js"></script>
    <link href="libs/font-awesome-4.7.0/css/font-awesome.min.css" rel="stylesheet" />
    <script src="libs/plotly-basic-2.11.1/plotly-basic-2.11.1.min.js"></script>
    <script src="libs/plotly-cartesian-2.11.1/plotly-cartesian-2.11.1.min.js"></script>
    <script src="libs/proj4js-2.3.15/proj4.js"></script>
    <link href="libs/highcharts-9.3.1/css/motion.css" rel="stylesheet" />
    <script src="libs/highcharts-9.3.1/highcharts.js"></script>
    <script src="libs/highcharts-9.3.1/highcharts-3d.js"></script>
    <script src="libs/highcharts-9.3.1/highcharts-more.js"></script>
    <script src="libs/highcharts-9.3.1/modules/stock.js"></script>
    <script src="libs/highcharts-9.3.1/modules/map.js"></script>
    <script src="libs/highcharts-9.3.1/modules/data.js"></script>
    <script src="libs/highcharts-9.3.1/modules/exporting.js"></script>
    <script src="libs/highcharts-9.3.1/modules/offline-exporting.js"></script>
    <script src="libs/highcharts-9.3.1/modules/drilldown.js"></script>
    <script src="libs/highcharts-9.3.1/modules/item-series.js"></script>
    <script src="libs/highcharts-9.3.1/modules/overlapping-datalabels.js"></script>
    <script src="libs/highcharts-9.3.1/modules/annotations.js"></script>
    <script src="libs/highcharts-9.3.1/modules/export-data.js"></script>
    <script src="libs/highcharts-9.3.1/modules/funnel.js"></script>
    <script src="libs/highcharts-9.3.1/modules/heatmap.js"></script>
    <script src="libs/highcharts-9.3.1/modules/treemap.js"></script>
    <script src="libs/highcharts-9.3.1/modules/sankey.js"></script>
    <script src="libs/highcharts-9.3.1/modules/dependency-wheel.js"></script>
    <script src="libs/highcharts-9.3.1/modules/organization.js"></script>
    <script src="libs/highcharts-9.3.1/modules/solid-gauge.js"></script>
    <script src="libs/highcharts-9.3.1/modules/streamgraph.js"></script>
    <script src="libs/highcharts-9.3.1/modules/sunburst.js"></script>
    <script src="libs/highcharts-9.3.1/modules/vector.js"></script>
    <script src="libs/highcharts-9.3.1/modules/wordcloud.js"></script>
    <script src="libs/highcharts-9.3.1/modules/xrange.js"></script>
    <script src="libs/highcharts-9.3.1/modules/tilemap.js"></script>
    <script src="libs/highcharts-9.3.1/modules/venn.js"></script>
    <script src="libs/highcharts-9.3.1/modules/gantt.js"></script>
    <script src="libs/highcharts-9.3.1/modules/timeline.js"></script>
    <script src="libs/highcharts-9.3.1/modules/parallel-coordinates.js"></script>
    <script src="libs/highcharts-9.3.1/modules/bullet.js"></script>
    <script src="libs/highcharts-9.3.1/modules/coloraxis.js"></script>
    <script src="libs/highcharts-9.3.1/modules/dumbbell.js"></script>
    <script src="libs/highcharts-9.3.1/modules/lollipop.js"></script>
    <script src="libs/highcharts-9.3.1/modules/series-label.js"></script>
    <script src="libs/highcharts-9.3.1/plugins/motion.js"></script>
    <script src="libs/highcharts-9.3.1/custom/reset.js"></script>
    <script src="libs/highcharts-9.3.1/modules/boost.js"></script>
    <script src="libs/highchart-binding-0.9.4/highchart.js"></script>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-QXDW878QLX"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-QXDW878QLX');
    </script>

    <div class="alert alert-info alert-dismissible">
      <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
      <strong>Bạn cần trợ giúp khi học R?</strong> Hãy tham gia <a href="https://www.appliedepi.org/live/" class="alert-link">khóa học</a>, trải nghiệm <a href="https://www.appliedepi.org/tutorial/" class="alert-link">các học phần miễn phí</a>, gửi bài viết <a href="https://community.appliedepi.org/" class="alert-link">trên trang Cộng đồng</a>, hoặc liên hệ <a href="mailto:contact@appliedepi.org" class="alert-link">dịch vụ hỗ trợ của chúng tôi</a>.
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script>

  <!-- CSS -->
  <style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
      <link rel="stylesheet" href="style_bs4.css" />
  
</head>

<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book">
    <a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Cẩm nang dịch tễ học với R</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
      </form>

      <nav aria-label="Table of contents">
        <h2>Table of contents</h2>
        <div id="book-toc"></div>

        <div class="book-extra">
          <p><a id="book-repo" href="#">View book source <i class="fab fa-github"></i></a></li></p>
        </div>
      </nav>
    </div>
  </header>

  <main class="col-sm-12 col-md-9 col-lg-7" id="content">
<div id="regression" class="section level1" number="19">
<h1><span class="header-section-number">19</span> Hồi quy đơn và đa biến</h1>
<!-- ======================================================= -->
<p>Trong chương này, chúng tôi trình bày cách sử dụng các hàm hồi quy trong <strong>base</strong> R rnhư hàm <code>glm()</code> và package <strong>gtsummary</strong> để xem xét các mối liên quan giữa các biến (ví dụ như tỷ số chênh, tỷ số nguy cơ, tỷ số rủi ro). Chúng tôi cũng trình bày cách sử dụng các hàm như <code>tidy()</code> trong package <strong>broom</strong> để sắp xếp các kết quả hồi quy.</p>
<ol style="list-style-type: decimal">
<li>Phân tích đơn biến: bảng 2 x 2</li>
<li>Phân tích phân tầng: ước lượng của mantel-haenszel<br />
</li>
<li>Phân tích đa biến: lựa chọn biến số, lựa chọn mô hình, mô hình cuối cùng</li>
<li>Biểu đồ Forest plot</li>
</ol>
<p>Đối với hồi quy Cox, xem chương <a href="data-used.html#data_survey">Phân tích sống còn</a>.</p>
<p><span style="color: black;"><strong><em>CHÚ Ý:</em></strong> Chúng tôi sử dụng thuật ngữ <em>đa biến (multivariable)</em> để nói đến một hồi quy có nhiều biến giải thích. Thuật ngữ này khác với mô hình <em>đa biến</em> (multivariate model), là một mô hình đa biến có nhiều biến kết cục – xem chi tiết trong <a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC3518362/">bài xã luận</a> này</span></p>
<!-- ======================================================= -->
<div id="chuẩn-bị-9" class="section level2" number="19.1">
<h2><span class="header-section-number">19.1</span> Chuẩn bị</h2>
<div id="gọi-packages-5" class="section level3 unnumbered">
<h3>Gọi packages</h3>
<p>Đoạn mã này hiển thị cách tải các gói lệnh cần thiết cho phân tích. Trong cuốn sổ tay này, chúng tôi nhấn mạnh hàm <code>p_load()</code> thuộc package <strong>pacman</strong>, giúp cài đặt package khi cần thiết <em>và</em> gọi nó ra để sử dụng. Có thể gọi các package đã cài đặt bằng hàm <code>library()</code> trong <strong>base</strong> R. Xem thêm thông tin về các package của R trong chương <a href="basics.html#basics">R cơ bản</a>.</p>
<div class="sourceCode" id="cb964"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb964-1"><a href="regression.html#cb964-1" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(</span>
<span id="cb964-2"><a href="regression.html#cb964-2" tabindex="-1"></a>  rio,          <span class="co"># File import</span></span>
<span id="cb964-3"><a href="regression.html#cb964-3" tabindex="-1"></a>  here,         <span class="co"># File locator</span></span>
<span id="cb964-4"><a href="regression.html#cb964-4" tabindex="-1"></a>  tidyverse,    <span class="co"># data management + ggplot2 graphics, </span></span>
<span id="cb964-5"><a href="regression.html#cb964-5" tabindex="-1"></a>  stringr,      <span class="co"># manipulate text strings </span></span>
<span id="cb964-6"><a href="regression.html#cb964-6" tabindex="-1"></a>  purrr,        <span class="co"># loop over objects in a tidy way</span></span>
<span id="cb964-7"><a href="regression.html#cb964-7" tabindex="-1"></a>  gtsummary,    <span class="co"># summary statistics and tests </span></span>
<span id="cb964-8"><a href="regression.html#cb964-8" tabindex="-1"></a>  broom,        <span class="co"># tidy up results from regressions</span></span>
<span id="cb964-9"><a href="regression.html#cb964-9" tabindex="-1"></a>  lmtest,       <span class="co"># likelihood-ratio tests</span></span>
<span id="cb964-10"><a href="regression.html#cb964-10" tabindex="-1"></a>  parameters,   <span class="co"># alternative to tidy up results from regressions</span></span>
<span id="cb964-11"><a href="regression.html#cb964-11" tabindex="-1"></a>  see          <span class="co"># alternative to visualise forest plots</span></span>
<span id="cb964-12"><a href="regression.html#cb964-12" tabindex="-1"></a>  )</span></code></pre></div>
</div>
<div id="nhập-số-liệu-1" class="section level3 unnumbered">
<h3>Nhập số liệu</h3>
<p>Chúng tôi nhập bộ số liệu của các ca bệnh được mô phỏng từ một vụ dịch Ebola. Để tiện làm theo, <a href='https://github.com/appliedepi/epirhandbook_eng/raw/master/data/case_linelists/linelist_cleaned.rds' class='download-button'>bấm để tải số liệu linelist “đã được làm sạch”</a> (dưới dạng tệp .rds ). Nhập số liệu này bằng hàm <code>import()</code> trong package <strong>rio</strong> (nó chấp nhận nhiều loại tập tin như .xlsx, .rds, .csv – xem chi tiết trong chương <a href="importing.html#importing">Nhập xuất dữ liệu</a>).</p>
<div class="sourceCode" id="cb965"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb965-1"><a href="regression.html#cb965-1" tabindex="-1"></a><span class="co"># import the linelist</span></span>
<span id="cb965-2"><a href="regression.html#cb965-2" tabindex="-1"></a>linelist <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="st">&quot;linelist_cleaned.rds&quot;</span>)</span></code></pre></div>
<p>Bên dưới là hiển thị của 50 hàng đầu tiên của bộ số liệu linelist.</p>
<div class="datatables html-widget html-fill-item" id="htmlwidget-ad26c2988c4986ed8903" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-ad26c2988c4986ed8903">{"x":{"filter":"none","vertical":false,"data":[["5fe599","8689b7","11f8ea","b8812a","893f25","be99c8","07e3e8","369449","f393b4","1389ca","2978ac","57a565","fc15ef","2eaa9a","bbfa93","c97dd9","f50e8a","3a7673","7f5a01","ddddee","99e8fa","567136","9371a9","bc2adf","403057","8bd1e8","f327be","42e1a9","90e5fe","959170","8ebf6e","e56412","6d788e","a47529","67be4e","da8ecb","148f18","2cb9a5","f5c142","70a9fe","3ad520","062638","c76676","baacc1","497372","23e499","38cc4a","3789ee","c71dcd","6b70f0"],[4,4,2,3,3,3,4,4,4,4,4,4,6,5,6,9,10,8,7,6,7,6,8,6,10,8,6,12,5,8,7,9,11,5,8,5,6,11,7,9,7,8,9,12,13,9,8,10,8,7],["2014-05-08",null,null,"2014-05-04","2014-05-18","2014-05-03","2014-05-22","2014-05-28",null,null,"2014-05-30","2014-05-28","2014-06-14","2014-06-07","2014-06-09",null,null,null,"2014-06-23","2014-06-18","2014-06-24",null,null,"2014-07-03",null,"2014-07-10","2014-06-14",null,"2014-06-18","2014-06-29","2014-07-02","2014-07-12","2014-07-12","2014-06-13","2014-07-15","2014-06-20",null,null,"2014-07-20",null,"2014-07-12","2014-07-19","2014-07-18","2014-07-18","2014-07-27",null,"2014-07-19","2014-07-26","2014-07-24",null],["2014-05-13","2014-05-13","2014-05-16","2014-05-18","2014-05-21","2014-05-22","2014-05-27","2014-06-02","2014-06-05","2014-06-05","2014-06-06","2014-06-13","2014-06-16","2014-06-17","2014-06-18","2014-06-19","2014-06-22","2014-06-23","2014-06-25","2014-06-26","2014-06-28","2014-07-02","2014-07-08","2014-07-09","2014-07-09","2014-07-10","2014-07-12","2014-07-12","2014-07-13","2014-07-13","2014-07-14","2014-07-15","2014-07-16","2014-07-17","2014-07-17","2014-07-18","2014-07-19","2014-07-22","2014-07-22","2014-07-24","2014-07-24","2014-07-25","2014-07-25","2014-07-27","2014-07-29","2014-07-30",null,"2014-08-01","2014-08-02","2014-08-03"],["2014-05-15","2014-05-14","2014-05-18","2014-05-20","2014-05-22","2014-05-23","2014-05-29","2014-06-03","2014-06-06","2014-06-07","2014-06-08","2014-06-15","2014-06-17","2014-06-17","2014-06-20","2014-06-19","2014-06-23","2014-06-24","2014-06-27","2014-06-28","2014-06-29","2014-07-03","2014-07-09","2014-07-09","2014-07-11","2014-07-11","2014-07-13","2014-07-14","2014-07-14","2014-07-13","2014-07-14","2014-07-17","2014-07-17","2014-07-18","2014-07-19","2014-07-20","2014-07-20","2014-07-22","2014-07-24","2014-07-26","2014-07-24","2014-07-27","2014-07-25","2014-07-27","2014-07-31","2014-08-01","2014-08-03","2014-08-02","2014-08-02","2014-08-04"],[null,"2014-05-18","2014-05-30",null,"2014-05-29","2014-05-24","2014-06-01","2014-06-07","2014-06-18","2014-06-09","2014-06-15",null,"2014-07-09",null,"2014-06-30","2014-07-11","2014-07-01","2014-06-25","2014-07-06","2014-07-02","2014-07-09","2014-07-07","2014-07-20",null,"2014-07-22","2014-07-16","2014-07-14","2014-07-20","2014-07-16","2014-07-19","2014-07-27","2014-07-19",null,"2014-07-26","2014-08-14","2014-08-01","2014-07-23","2014-08-28","2014-07-28","2014-07-19",null,"2014-08-03",null,null,null,"2014-08-06","2014-08-21","2014-09-13","2014-08-04",null],[null,"Recover","Recover",null,"Recover","Recover","Recover","Death","Recover","Death","Death","Death","Recover","Recover",null,"Recover",null,null,"Death","Death","Recover",null,null,null,"Death",null,"Death","Death",null,"Death","Recover","Death","Recover","Death","Recover",null,"Death","Recover","Recover","Death",null,null,"Death","Death","Death","Death","Recover",null,"Death","Death"],["m","f","m","f","m","f","f","f","m","f","m","m","m","f","f","m","f","f","f","f","m","m","f","m","f","m","m","f","m","f","f","f","m","m","f","m","f","f","f","m","f","m","f","m","m","f","m","f","m","m"],[2,3,56,18,3,16,16,0,61,27,12,42,19,7,7,13,35,17,11,11,19,54,14,28,6,3,31,6,67,14,10,21,20,45,1,12,3,15,20,36,7,13,14,3,10,1,0,20,26,14],["years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years"],[2,3,56,18,3,16,16,0,61,27,12,42,19,7,7,13,35,17,11,11,19,54,14,28,6,3,31,6,67,14,10,21,20,45,1,12,3,15,20,36,7,13,14,3,10,1,0,20,26,14],["0-4","0-4","50-69","15-19","0-4","15-19","15-19","0-4","50-69","20-29","10-14","30-49","15-19","5-9","5-9","10-14","30-49","15-19","10-14","10-14","15-19","50-69","10-14","20-29","5-9","0-4","30-49","5-9","50-69","10-14","10-14","20-29","20-29","30-49","0-4","10-14","0-4","15-19","20-29","30-49","5-9","10-14","10-14","0-4","10-14","0-4","0-4","20-29","20-29","10-14"],["0-4","0-4","55-59","15-19","0-4","15-19","15-19","0-4","60-64","25-29","10-14","40-44","15-19","5-9","5-9","10-14","35-39","15-19","10-14","10-14","15-19","50-54","10-14","25-29","5-9","0-4","30-34","5-9","65-69","10-14","10-14","20-24","20-24","45-49","0-4","10-14","0-4","15-19","20-24","35-39","5-9","10-14","10-14","0-4","10-14","0-4","0-4","20-24","25-29","10-14"],["Other","Missing","St. Mark's Maternity Hospital (SMMH)","Port Hospital","Military Hospital","Port Hospital","Missing","Missing","Missing","Missing","Port Hospital","Military Hospital","Missing","Missing","Other","Port Hospital","Port Hospital","Port Hospital","Missing","Other","Port Hospital","Port Hospital","St. Mark's Maternity Hospital (SMMH)","Missing","Other","Missing","St. Mark's Maternity Hospital (SMMH)","Military Hospital","Port Hospital","Central Hospital","Military Hospital","Central Hospital","Missing","Military Hospital","Other","Missing","Missing","Port Hospital","Port Hospital","Port Hospital","Missing","Central Hospital","Military Hospital","Other","Other","Other","Missing","St. Mark's Maternity Hospital (SMMH)","St. Mark's Maternity Hospital (SMMH)","Missing"],[-13.2157351064963,-13.2152339775486,-13.212910703914,-13.2363711169728,-13.2228638912441,-13.222625321098,-13.2331547837254,-13.2320975453153,-13.2225511595637,-13.2572163655863,-13.2206286746001,-13.253989309478,-13.2385127873491,-13.209391925612,-13.2157278814899,-13.2243437095992,-13.2336087079551,-13.21422143145,-13.2339681355349,-13.2535640411465,-13.2250089377786,-13.2160657166043,-13.2680671272333,-13.2266742923612,-13.2160179088168,-13.2482584611565,-13.2156319199566,-13.2142410663192,-13.2614879104088,-13.2452992638476,-13.2630592726116,-13.2343341712241,-13.2199077448676,-13.2227293309912,-13.2343062806506,-13.218781651651,-13.2483677722899,-13.2097478342339,-13.2680867723786,-13.2587535457526,-13.262635786914,-13.2697246824573,-13.2209026809759,-13.2330734719715,-13.2680923666905,-13.2547212675054,-13.2573683214693,-13.2137356012883,-13.2175973322257,-13.2486407324245],[8.46897295100924,8.45171855856465,8.46481700596819,8.4754761613651,8.46082377490923,8.461830626007281,8.462729314626459,8.461443675342711,8.46191259217774,8.472923276435059,8.48401630165138,8.458371253408441,8.477617055125091,8.47570184950483,8.477799468789719,8.47145134147474,8.478048406853629,8.48528034195779,8.469575303958671,8.45957352078114,8.474048895115439,8.488029171298839,8.473437335922,8.484082637344621,8.46242233645879,8.470268221265719,8.463984474805329,8.464134789434199,8.456230946296071,8.48334624336805,8.47493999153642,8.47832062438022,8.469393389176499,8.48480589906514,8.47121232619015,8.48438437371817,8.484661585743391,8.477141599844281,8.462381270106089,8.455685978131131,8.4632880274758,8.47940722413856,8.46353857052336,8.461789681588639,8.47508713872833,8.458258081280711,8.4532568143863,8.4732571907655,8.479115866419329,8.48480340615605],["f547d6",null,null,"f90f5f","11f8ea","aec8ec","893f25","133ee7",null,null,"996f3a","133ee7","37a6f6","9f6884","4802b1",null,null,null,"a75c7f","8e104d","ab634e",null,null,"b799eb",null,"5d9e4d","a15e13",null,"ea3740","beb26e","567136","894024","36e2e7","a2086d","7baf73","eb2277",null,null,"d6584f",null,"312ecf","52ea64","cfd79c","d145b7","174288",null,"53608c","3b096b","f5c142",null],["other",null,null,"other","other","other","other","other",null,null,"other","other","other","other","other",null,null,null,"other","other","other",null,null,"other",null,"other","other",null,"other","funeral","other","funeral","other","other","other","funeral",null,null,"other",null,"other","other","other","other","other",null,"funeral","other","other",null],[27,25,91,41,36,56,47,0,86,69,67,84,68,44,34,66,78,47,53,47,71,86,53,69,38,46,68,37,100,56,50,57,65,72,29,69,37,48,54,71,47,61,47,35,53,16,13,59,69,67],[48,59,238,135,71,116,87,11,226,174,112,186,174,90,91,152,214,137,117,131,150,241,131,161,80,69,188,66,233,142,110,182,164,214,26,157,39,154,133,168,100,125,123,67,134,31,36,125,183,169],[22,22,21,23,23,21,21,22,22,22,22,22,22,21,23,22,23,21,22,23,21,23,21,24,23,22,24,23,20,24,24,20,24,21,22,21,23,22,23,23,23,22,23,22,22,22,23,22,22,22],["no",null,null,"no","no","no",null,"no","no","no","no","no","no","no","no","no","no","no",null,"no","no","no","no","no",null,"no","no","no",null,null,"no","no",null,"no","no",null,null,"no","no",null,"no","no",null,"no","no","no","no","no","no",null],["no",null,null,"no","no","no",null,"no","no","no","no","no","no","no","no","no","yes","no",null,"no","no","no","yes","no",null,"no","no","yes",null,null,"no","no",null,"no","no",null,null,"no","no",null,"no","no",null,"no","yes","no","no","no","no",null],["yes",null,null,"no","yes","yes",null,"yes","yes","yes","yes","yes","yes","yes","yes","yes","yes","yes",null,"yes","yes","yes","yes","yes",null,"yes","yes","yes",null,null,"yes","yes",null,"yes","yes",null,null,"yes","yes",null,"yes","yes",null,"yes","yes","yes","yes","yes","no",null],["no",null,null,"no","no","no",null,"no","no","no","no","no","no","no","no","yes","no","no",null,"no","no","no","no","no",null,"no","no","no",null,null,"no","no",null,"no","no",null,null,"yes","yes",null,"no","no",null,"no","no","no","no","no","no",null],["yes",null,null,"no","yes","yes",null,"yes","yes","no","yes","no","no","no","yes","no","no","no",null,"no","yes","no","no","no",null,"no","no","no",null,null,"no","yes",null,"yes","yes",null,null,"yes","yes",null,"yes","yes",null,"yes","yes","no","yes","yes","yes",null],[36.8,36.9,36.9,36.8,36.9,37.6,37.3,37,36.4,35.9,36.5,36.9,36.5,37.1,36.5,37.3,37,38,38,36,37,36.7,36.9,36.5,37,36.5,37.6,36.6,36.6,36.2,36.4,37.1,37.5,37.5,37.4,36.9,36.4,37.3,37,37.8,36.5,37.5,36.7,37,37.3,36.6,36.5,36.6,37.6,36.8],[null,"09:36","16:48","11:22","12:60","14:13","14:33","09:25","11:16","10:55","16:03","11:14","12:42","11:06","09:10","08:45",null,"15:41","13:34","18:58","12:43","16:33","14:29","07:18","08:11","16:32","16:17","07:32","17:45",null,"13:24","14:43","02:33","11:36","17:28","16:27",null,"20:49",null,"11:38","14:25","13:42","21:22","13:33","19:06","17:14","20:09",null,"10:23","09:09"],[117.1875,71.81844297615629,16.06524962926347,22.49657064471879,71.41440190438405,41.61712247324614,62.09538908706566,0,16.83765369253662,22.79032897344431,53.41198979591836,24.28026361429067,22.46003435064077,54.32098765432099,41.05784325564545,28.56648199445983,17.03205520132763,25.04129149128882,38.7172182043977,27.3876813705495,31.55555555555556,14.80690759456621,30.88398111998135,26.61934338952972,59.37499999999999,96.61835748792272,19.23947487550928,84.94031221303948,18.41993774061044,27.77226740726046,41.32231404958677,17.20806665861611,24.16716240333135,15.72189710891781,428.9940828402366,27.99302202929125,243.2610124917817,20.23950075898128,30.52744643563797,25.15589569160998,47,39.04,31.06616432017979,77.96836711962574,29.51659612385831,166.4932362122789,100.3086419753086,37.76,20.60378034578518,23.45856237526698],[2,1,2,2,1,1,2,1,1,2,2,2,1,0,2,0,1,1,2,2,1,1,1,0,2,1,1,2,1,0,0,2,1,1,2,2,1,0,2,2,0,2,0,0,2,2,null,1,0,1]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>case_id<\/th>\n      <th>generation<\/th>\n      <th>date_infection<\/th>\n      <th>date_onset<\/th>\n      <th>date_hospitalisation<\/th>\n      <th>date_outcome<\/th>\n      <th>outcome<\/th>\n      <th>gender<\/th>\n      <th>age<\/th>\n      <th>age_unit<\/th>\n      <th>age_years<\/th>\n      <th>age_cat<\/th>\n      <th>age_cat5<\/th>\n      <th>hospital<\/th>\n      <th>lon<\/th>\n      <th>lat<\/th>\n      <th>infector<\/th>\n      <th>source<\/th>\n      <th>wt_kg<\/th>\n      <th>ht_cm<\/th>\n      <th>ct_blood<\/th>\n      <th>fever<\/th>\n      <th>chills<\/th>\n      <th>cough<\/th>\n      <th>aches<\/th>\n      <th>vomit<\/th>\n      <th>temp<\/th>\n      <th>time_admission<\/th>\n      <th>bmi<\/th>\n      <th>days_onset_hosp<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":[1,8,10,14,15,18,19,20,26,28,29]},{"name":"case_id","targets":0},{"name":"generation","targets":1},{"name":"date_infection","targets":2},{"name":"date_onset","targets":3},{"name":"date_hospitalisation","targets":4},{"name":"date_outcome","targets":5},{"name":"outcome","targets":6},{"name":"gender","targets":7},{"name":"age","targets":8},{"name":"age_unit","targets":9},{"name":"age_years","targets":10},{"name":"age_cat","targets":11},{"name":"age_cat5","targets":12},{"name":"hospital","targets":13},{"name":"lon","targets":14},{"name":"lat","targets":15},{"name":"infector","targets":16},{"name":"source","targets":17},{"name":"wt_kg","targets":18},{"name":"ht_cm","targets":19},{"name":"ct_blood","targets":20},{"name":"fever","targets":21},{"name":"chills","targets":22},{"name":"cough","targets":23},{"name":"aches","targets":24},{"name":"vomit","targets":25},{"name":"temp","targets":26},{"name":"time_admission","targets":27},{"name":"bmi","targets":28},{"name":"days_onset_hosp","targets":29}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="làm-sạch-số-liệu" class="section level3 unnumbered">
<h3>Làm sạch số liệu</h3>
<div id="lưu-trữ-các-biến-giải-thích" class="section level4 unnumbered">
<h4>Lưu trữ các biến giải thích</h4>
<p>Tên của các biến giải thích sẽ được lưu trữ dưới dạng một véc tơ ký tự. Véc tơ này sẽ được đề cập về sau.</p>
<div class="sourceCode" id="cb966"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb966-1"><a href="regression.html#cb966-1" tabindex="-1"></a><span class="do">## define variables of interest </span></span>
<span id="cb966-2"><a href="regression.html#cb966-2" tabindex="-1"></a>explanatory_vars <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;gender&quot;</span>, <span class="st">&quot;fever&quot;</span>, <span class="st">&quot;chills&quot;</span>, <span class="st">&quot;cough&quot;</span>, <span class="st">&quot;aches&quot;</span>, <span class="st">&quot;vomit&quot;</span>)</span></code></pre></div>
</div>
<div id="chuyển-đổi-sang-số-1-và-số-0" class="section level4 unnumbered">
<h4>Chuyển đổi sang số 1 và số 0</h4>
<p>Sau đây, giá trị của các biến giải thích được chuyển đổi từ “có”/“không”, “nam”/“nữ” và “chết”/“sống” thành 1 / 0, để hợp với các đặc tính của mô hình hồi quy logistic. TĐể thực hiện việc này một cách hiệu quả, sử dụng hàm <code>across()</code> từ <strong>dplyr</strong> để chuyển đổi nhiều biến cùng một lúc. Để áp dụng cho mỗi biến, dùng hàm <code>case_when()</code> (cũng trong package <strong>dplyr</strong>) để chuyển đổi các giá trị cụ thể thành 1 và 0. Xem các mục về <code>across()</code> và <code>case_when()</code> trong chương <a href="cleaning.html#clean_across">Làm sạch số liệu và các hàm quan trọng</a>).</p>
<p>Chú ý: dấu “.” bên dưới đại diện cho cột`````<code>đang được xử lý trong hàm</code>across()` tại thời điểm đó.</p>
<div class="sourceCode" id="cb967"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb967-1"><a href="regression.html#cb967-1" tabindex="-1"></a><span class="do">## convert dichotomous variables to 0/1 </span></span>
<span id="cb967-2"><a href="regression.html#cb967-2" tabindex="-1"></a>linelist <span class="ot">&lt;-</span> linelist <span class="sc">%&gt;%</span>  </span>
<span id="cb967-3"><a href="regression.html#cb967-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(                                      </span>
<span id="cb967-4"><a href="regression.html#cb967-4" tabindex="-1"></a>    <span class="at">.cols =</span> <span class="fu">all_of</span>(<span class="fu">c</span>(explanatory_vars, <span class="st">&quot;outcome&quot;</span>)),  <span class="do">## for each column listed and &quot;outcome&quot;</span></span>
<span id="cb967-5"><a href="regression.html#cb967-5" tabindex="-1"></a>    <span class="at">.fns =</span> <span class="sc">~</span><span class="fu">case_when</span>(                              </span>
<span id="cb967-6"><a href="regression.html#cb967-6" tabindex="-1"></a>      . <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;m&quot;</span>, <span class="st">&quot;yes&quot;</span>, <span class="st">&quot;Death&quot;</span>)   <span class="sc">~</span> <span class="dv">1</span>,           <span class="do">## recode male, yes and death to 1</span></span>
<span id="cb967-7"><a href="regression.html#cb967-7" tabindex="-1"></a>      . <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;f&quot;</span>, <span class="st">&quot;no&quot;</span>,  <span class="st">&quot;Recover&quot;</span>) <span class="sc">~</span> <span class="dv">0</span>,           <span class="do">## female, no and recover to 0</span></span>
<span id="cb967-8"><a href="regression.html#cb967-8" tabindex="-1"></a>      <span class="cn">TRUE</span>                            <span class="sc">~</span> <span class="cn">NA_real_</span>)    <span class="do">## otherwise set to missing</span></span>
<span id="cb967-9"><a href="regression.html#cb967-9" tabindex="-1"></a>    )</span>
<span id="cb967-10"><a href="regression.html#cb967-10" tabindex="-1"></a>  )</span></code></pre></div>
</div>
<div id="loại-bỏ-các-hàng-có-giá-trị-missing" class="section level4 unnumbered">
<h4>Loại bỏ các hàng có giá trị missing</h4>
<p>Để bỏ các hàng có giá trị missing, dùng hàm <code>drop_na()</code> trong package <strong>tidyr</strong>. Tuy nhiên, chúng ta chỉ muốn thực hiện điều này cho các hàng có giá trị missing đối với các cột đang được quan tâm.</p>
<p>Trước hết, chúng ta phải đảm bảo rằng vectơ <code>explanatory_vars</code> bao gồm các biến <code>age</code> (<code>age</code> có thể tạo ra một lỗi trong thao tác của hàm <code>case_when()</code> trước đó, mà chỉ dành cho biến nhị phân). Sau đó chúng ta pipe bộ dữ liệu <code>linelist</code> tới hàm <code>drop_na()</code> để bỏ các hàng có giá trị missing cho biến <code>outcome</code> hoặc bất kỳ biển giải thích <code>explanatory_vars</code> nào.</p>
<p>Trước khi thực hiện các lệnh này, kiểm tra số hàng trong bộ số liệu <code>linelist</code> bằng hàm <code>nrow(linelist)</code>.</p>
<div class="sourceCode" id="cb968"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb968-1"><a href="regression.html#cb968-1" tabindex="-1"></a><span class="do">## add in age_category to the explanatory vars </span></span>
<span id="cb968-2"><a href="regression.html#cb968-2" tabindex="-1"></a>explanatory_vars <span class="ot">&lt;-</span> <span class="fu">c</span>(explanatory_vars, <span class="st">&quot;age_cat&quot;</span>)</span>
<span id="cb968-3"><a href="regression.html#cb968-3" tabindex="-1"></a></span>
<span id="cb968-4"><a href="regression.html#cb968-4" tabindex="-1"></a><span class="do">## drop rows with missing information for variables of interest </span></span>
<span id="cb968-5"><a href="regression.html#cb968-5" tabindex="-1"></a>linelist <span class="ot">&lt;-</span> linelist <span class="sc">%&gt;%</span> </span>
<span id="cb968-6"><a href="regression.html#cb968-6" tabindex="-1"></a>  <span class="fu">drop_na</span>(<span class="fu">any_of</span>(<span class="fu">c</span>(<span class="st">&quot;outcome&quot;</span>, explanatory_vars)))</span></code></pre></div>
<p>Kiểm tra số hàng còn lại của <code>linelist</code> bằng hàm <code>nrow(linelist)</code>.</p>
<!-- ======================================================= -->
</div>
</div>
</div>
<div id="phân-tích-đơn-biến" class="section level2" number="19.2">
<h2><span class="header-section-number">19.2</span> Phân tích đơn biến</h2>
<p>Cũng giống như chương <a href="tables-descriptive.html#tables-descriptive">Bảng mô tả</a>, chúng ta cần xác định packahe nào trong R mà chúng ta muốn sử dụng. Chúng tôi trình bày hai chọn lựa để thực hiện các phân tích đơn biến:</p>
<ul>
<li>Dùng hàm có sẵn trong <strong>base</strong> để in nhanh kết quả ra console. Sử dụng package <strong>broom</strong> để làm gọn kết quả.<br />
</li>
<li>Dùng package <strong>gtsummary</strong> để lập mô hình và nhận các kết quả đầu ra sẵn sàng để công bố</li>
</ul>
<!-- ======================================================= -->
<div id="base-r-2" class="section level3 unnumbered">
<h3><strong>base</strong> R</h3>
<div id="hồi-quy-tuyến-tính" class="section level4 unnumbered">
<h4>Hồi quy tuyến tính</h4>
<p>Hàm <code>lm()</code> trong <strong>base</strong> cho phép thực hiện hồi quy tuyến tính để đánh giá mối quan hệ giữa biến đầu ra dạng số (numeric) và các biến giải thích mà được giả định là có mối quan hệ tuyến tính.</p>
<p>Cung cấp phương trình dưới dạng công thức với tên của biến đầu ra và các biến giải thích được phân tách bằng dấu ngã <code>~</code>. Bên cạnh đó, chỉ rõ bộ số liệu nào được sử dụng với <code>data =</code>. Kết quả của mô hình được định nghĩa dưới dạng đối tượng của R để sử dụng về sau.</p>
<div class="sourceCode" id="cb969"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb969-1"><a href="regression.html#cb969-1" tabindex="-1"></a>lm_results <span class="ot">&lt;-</span> <span class="fu">lm</span>(ht_cm <span class="sc">~</span> age, <span class="at">data =</span> linelist)</span></code></pre></div>
<p>Sau đó tóm tắt kết quả của mô hình bằng hàm <code>summary()</code> để xem các hệ số (ước tính), P-value, phần dư và các đo lường khác.</p>
<div class="sourceCode" id="cb970"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb970-1"><a href="regression.html#cb970-1" tabindex="-1"></a><span class="fu">summary</span>(lm_results)</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = ht_cm ~ age, data = linelist)
## 
## Residuals:
##      Min       1Q   Median       3Q      Max 
## -128.579  -15.854    1.177   15.887  175.483 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)  69.9051     0.5979   116.9   &lt;2e-16 ***
## age           3.4354     0.0293   117.2   &lt;2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 23.75 on 4165 degrees of freedom
## Multiple R-squared:  0.7675, Adjusted R-squared:  0.7674 
## F-statistic: 1.375e+04 on 1 and 4165 DF,  p-value: &lt; 2.2e-16</code></pre>
<p>Ngoài ra, có thể dùng hàm <code>tidy()</code> trong package <strong>broom</strong> để xuất kết quả vào trong một bảng. Kết quả bên dưới cho chúng ta biết khi tăng thêm một tuổi thì chiều cao tăng 3,5 cm và mối quan hệ này có ý nghĩa thống kê.</p>
<div class="sourceCode" id="cb972"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb972-1"><a href="regression.html#cb972-1" tabindex="-1"></a><span class="fu">tidy</span>(lm_results)</span></code></pre></div>
<pre><code>## # A tibble: 2 × 5
##   term        estimate std.error statistic p.value
##   &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;
## 1 (Intercept)    69.9     0.598       117.       0
## 2 age             3.44    0.0293      117.       0</code></pre>
<p>Sau đó, có thể sử dụng kết quả hồi quy này để đưa vào <strong>ggplot</strong>. Để thực hiện điều này, trước tiên chúng ta đưa các giá trị quan sát và đường thẳng hồi quy (fitted line) vào một data frame bằng cách dùng hàm <code>augment()</code> trong package <strong>broom</strong>.</p>
<div class="sourceCode" id="cb974"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb974-1"><a href="regression.html#cb974-1" tabindex="-1"></a><span class="do">## pull the regression points and observed data in to one dataset</span></span>
<span id="cb974-2"><a href="regression.html#cb974-2" tabindex="-1"></a>points <span class="ot">&lt;-</span> <span class="fu">augment</span>(lm_results)</span>
<span id="cb974-3"><a href="regression.html#cb974-3" tabindex="-1"></a></span>
<span id="cb974-4"><a href="regression.html#cb974-4" tabindex="-1"></a><span class="do">## plot the data using age as the x-axis </span></span>
<span id="cb974-5"><a href="regression.html#cb974-5" tabindex="-1"></a><span class="fu">ggplot</span>(points, <span class="fu">aes</span>(<span class="at">x =</span> age)) <span class="sc">+</span> </span>
<span id="cb974-6"><a href="regression.html#cb974-6" tabindex="-1"></a>  <span class="do">## add points for height </span></span>
<span id="cb974-7"><a href="regression.html#cb974-7" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">y =</span> ht_cm)) <span class="sc">+</span> </span>
<span id="cb974-8"><a href="regression.html#cb974-8" tabindex="-1"></a>  <span class="do">## add your regression line </span></span>
<span id="cb974-9"><a href="regression.html#cb974-9" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> .fitted), <span class="at">colour =</span> <span class="st">&quot;red&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/lin_reg_res_plot-1.png" width="672" /></p>
<p>Bạn cũng có thể vẽ đường hồi quy tuyến tính đơn bằng package <strong>ggplot</strong> thông qua hàm <code>geom_smooth()</code>.</p>
<div class="sourceCode" id="cb975"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb975-1"><a href="regression.html#cb975-1" tabindex="-1"></a><span class="do">## add your data to a plot </span></span>
<span id="cb975-2"><a href="regression.html#cb975-2" tabindex="-1"></a> <span class="fu">ggplot</span>(linelist, <span class="fu">aes</span>(<span class="at">x =</span> age, <span class="at">y =</span> ht_cm)) <span class="sc">+</span> </span>
<span id="cb975-3"><a href="regression.html#cb975-3" tabindex="-1"></a>  <span class="do">## show points</span></span>
<span id="cb975-4"><a href="regression.html#cb975-4" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb975-5"><a href="regression.html#cb975-5" tabindex="-1"></a>  <span class="do">## add a linear regression </span></span>
<span id="cb975-6"><a href="regression.html#cb975-6" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>, <span class="at">se =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<pre><code>## `geom_smooth()` using formula = &#39;y ~ x&#39;</code></pre>
<p><img src="_main_files/figure-html/geom_smooth-1.png" width="672" /></p>
<p>Xem thêm các hướng dẫn chi tiết trong mục Nguồn ở cuối chương này.</p>
</div>
<div id="hồi-quy-logistic" class="section level4 unnumbered">
<h4>Hồi quy Logistic</h4>
<p>Hàm <code>glm()</code> trong package <strong>stats</strong> (một phần của <strong>base</strong> R) được sử dụng để fit (chọn mô hình dự đoán tối ưu dựa trên số liệu quan sát) đối với Mô hình Tuyến tính Tổng quát (GLM).</p>
<p><code>glm()</code> có thể được sử dụng cho cả hồi quy logistic đơn biến và đa biến (ví dụ như để tính tỷ số chênh OR). Sau đây là những thành phần chính của hàm:</p>
<div class="sourceCode" id="cb977"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb977-1"><a href="regression.html#cb977-1" tabindex="-1"></a><span class="co"># arguments for glm()</span></span>
<span id="cb977-2"><a href="regression.html#cb977-2" tabindex="-1"></a><span class="fu">glm</span>(formula, family, data, weights, subset, ...)</span></code></pre></div>
<ul>
<li><code>formula =</code> Mô hình được cung cấp cho <code>glm()</code> dưới dạng một phương trình với biến kết cục ở bên trái và biến giải thích ở bên phải dấu ngã <code>~</code>.<br />
</li>
<li><code>family =</code> Xác định loại mô hình sẽ thực hiện. Đối với hồi quy logistic, sử dụng <code>family = "binomial"</code>, đối với hồi quy poisson sử dụng <code>family = "poisson"</code>. Các ví dụ khác được trình bày trong bảng bên dưới.<br />
</li>
<li><code>data =</code> Cụ thể bộ số liệu</li>
</ul>
<p>Nếu cần, có thể cụ thể hàm liên kết bằng cú pháp <code>family = familytype(link = "linkfunction"))</code>. Bạn có thể tìm đọc thêm về các họ hồi quy khác và các tùy chọn đối số như là <code>weights =</code> và <code>subset =</code> bằng cách gõ (<code>?glm</code>).</p>
<table>
<thead>
<tr class="header">
<th>Họ</th>
<th>Hàm liên kết mặc định</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>"binomial"</code></td>
<td><code>(link = "logit")</code></td>
</tr>
<tr class="even">
<td><code>"gaussian"</code></td>
<td><code>(link = "identity")</code></td>
</tr>
<tr class="odd">
<td><code>"Gamma"</code></td>
<td><code>(link = "inverse")</code></td>
</tr>
<tr class="even">
<td><code>"inverse.gaussian"</code></td>
<td><code>(link = "1/mu^2")</code></td>
</tr>
<tr class="odd">
<td><code>"poisson"</code></td>
<td><code>(link = "log")</code></td>
</tr>
<tr class="even">
<td><code>"quasi"</code></td>
<td><code>(link = "identity", variance = "constant")</code></td>
</tr>
<tr class="odd">
<td><code>"quasibinomial"</code></td>
<td><code>(link = "logit")</code></td>
</tr>
<tr class="even">
<td><code>"quasipoisson"</code></td>
<td><code>(link = "log")</code></td>
</tr>
</tbody>
</table>
<p>Khi thực hiện <code>glm()</code> , phổ biến nhất là lưu kết quả dưới dạng một đối tượng của R được đặt tên. Sau đó, có thể xuất kết quả ra console bằng cách sử dụng hàm <code>summary()</code> như được trình bày bên dưới, hoặc thực hiện các thao tác khác từ kết quả (ví dụ như lấy lũy thừa).</p>
<p>Nếu cần thực hiện một hồi quy nhị thức âm, có thể sử dụng package <strong>MASS</strong>. Hàn <code>glm.nb()</code> uses cũng sử dụng cùng cú pháp như <code>glm()</code>. Để xem qua các hồi quy khác, xem trên <a href="https://stats.idre.ucla.edu/other/dae/">trang thống kê của UCLA</a>.</p>
</div>
<div id="phân-tích-đơn-biến-sử-dụng-glm" class="section level4 unnumbered">
<h4>Phân tích đơn biến sử dụng <code>glm()</code></h4>
<p>Trong ví dụ này, chúng tôi đánh giá mối liên quan giữa nhóm tuổi và biến kết cục tử vong (được mã hóa là 1 trong phần chuẩn bị). Bên dưới là một mô hình đơn biến của biến kết cục <code>outcome</code> theo <code>age_cat</code>. Chúng tôi lưu kết quả đầu ra được đặt tên là <code>model</code> và sau đó in kết quả đến console bằng hàm <code>summary()</code>. Lưu ý, các ước tính được tạo ra là các giá trị <em>lôgarít của tỷ số chênh (log odds)</em> và giá trị tham chiếu là giá trị đầu tiên của biến <code>age_cat</code> (“0-4”).</p>
<div class="sourceCode" id="cb978"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb978-1"><a href="regression.html#cb978-1" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="fu">glm</span>(outcome <span class="sc">~</span> age_cat, <span class="at">family =</span> <span class="st">&quot;binomial&quot;</span>, <span class="at">data =</span> linelist)</span>
<span id="cb978-2"><a href="regression.html#cb978-2" tabindex="-1"></a><span class="fu">summary</span>(model)</span></code></pre></div>
<pre><code>## 
## Call:
## glm(formula = outcome ~ age_cat, family = &quot;binomial&quot;, data = linelist)
## 
## Coefficients:
##               Estimate Std. Error z value Pr(&gt;|z|)   
## (Intercept)   0.233738   0.072805   3.210  0.00133 **
## age_cat5-9   -0.062898   0.101733  -0.618  0.53640   
## age_cat10-14  0.138204   0.107186   1.289  0.19726   
## age_cat15-19 -0.005565   0.113343  -0.049  0.96084   
## age_cat20-29  0.027511   0.102133   0.269  0.78765   
## age_cat30-49  0.063764   0.113771   0.560  0.57517   
## age_cat50-69 -0.387889   0.259240  -1.496  0.13459   
## age_cat70+   -0.639203   0.915770  -0.698  0.48518   
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## (Dispersion parameter for binomial family taken to be 1)
## 
##     Null deviance: 5712.4  on 4166  degrees of freedom
## Residual deviance: 5705.1  on 4159  degrees of freedom
## AIC: 5721.1
## 
## Number of Fisher Scoring iterations: 4</code></pre>
<p>Để thay đổi giá trị tham chiếu của một biến Factor và chuyển giá trị mong muốn lên vị trí đầu tiên, dùng hàm <code>fct_relevel()</code> (xem chương <a href="factors.html#factors">Factors</a>). Ở ví dụ bên dưới, chúng tôi lấy biến <code>age_cat</code> và đặt nhóm tuổi “20-29” làm giá trị tham chiếu trước khi chuyển số liệu đã sửa đổi vào hàm <code>glm()</code>.</p>
<div class="sourceCode" id="cb980"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb980-1"><a href="regression.html#cb980-1" tabindex="-1"></a>linelist <span class="sc">%&gt;%</span> </span>
<span id="cb980-2"><a href="regression.html#cb980-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">age_cat =</span> <span class="fu">fct_relevel</span>(age_cat, <span class="st">&quot;20-29&quot;</span>, <span class="at">after =</span> <span class="dv">0</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb980-3"><a href="regression.html#cb980-3" tabindex="-1"></a>  <span class="fu">glm</span>(<span class="at">formula =</span> outcome <span class="sc">~</span> age_cat, <span class="at">family =</span> <span class="st">&quot;binomial&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb980-4"><a href="regression.html#cb980-4" tabindex="-1"></a>  <span class="fu">summary</span>()</span></code></pre></div>
<pre><code>## 
## Call:
## glm(formula = outcome ~ age_cat, family = &quot;binomial&quot;, data = .)
## 
## Coefficients:
##              Estimate Std. Error z value Pr(&gt;|z|)    
## (Intercept)   0.26125    0.07163   3.647 0.000265 ***
## age_cat0-4   -0.02751    0.10213  -0.269 0.787652    
## age_cat5-9   -0.09041    0.10090  -0.896 0.370220    
## age_cat10-14  0.11069    0.10639   1.040 0.298133    
## age_cat15-19 -0.03308    0.11259  -0.294 0.768934    
## age_cat30-49  0.03625    0.11302   0.321 0.748390    
## age_cat50-69 -0.41540    0.25891  -1.604 0.108625    
## age_cat70+   -0.66671    0.91568  -0.728 0.466546    
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## (Dispersion parameter for binomial family taken to be 1)
## 
##     Null deviance: 5712.4  on 4166  degrees of freedom
## Residual deviance: 5705.1  on 4159  degrees of freedom
## AIC: 5721.1
## 
## Number of Fisher Scoring iterations: 4</code></pre>
</div>
<div id="in-kết-quả" class="section level4 unnumbered">
<h4>In kết quả</h4>
<p>Đối với hầu hết các mục đích sử dụng, kết quả đầu ra cần phải có một số sửa đổi. Hàm làm gọn <code>tidy()</code> trong package <strong>broom</strong> có những tiện lợi để hiển thị kết quả của mô hình.</p>
<p>Ở đây, chúng tôi trình bày cách để kết hợp các kết quả đầu ra của mô hình vào trong một bảng.</p>
<ol style="list-style-type: decimal">
<li>Lấy <em>lũy thừa</em> logarit của ước lượng tỉ số chênh OR và khoảng tin cậy bằng cách đưa mô hình vào hàm <code>tidy()</code> và thiết lập lũy thừa <code>exponentiate = TRUE</code> và <code>conf.int = TRUE</code>.</li>
</ol>
<div class="sourceCode" id="cb982"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb982-1"><a href="regression.html#cb982-1" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="fu">glm</span>(outcome <span class="sc">~</span> age_cat, <span class="at">family =</span> <span class="st">&quot;binomial&quot;</span>, <span class="at">data =</span> linelist) <span class="sc">%&gt;%</span> </span>
<span id="cb982-2"><a href="regression.html#cb982-2" tabindex="-1"></a>  <span class="fu">tidy</span>(<span class="at">exponentiate =</span> <span class="cn">TRUE</span>, <span class="at">conf.int =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span>        <span class="co"># exponentiate and produce CIs</span></span>
<span id="cb982-3"><a href="regression.html#cb982-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), round, <span class="at">digits =</span> <span class="dv">2</span>))  <span class="co"># round all numeric columns</span></span></code></pre></div>
<p>Bên dưới là bảng kết quả đầu ra của <code>model</code>:</p>
<div class="datatables html-widget html-fill-item" id="htmlwidget-f443a637a083ee78f974" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-f443a637a083ee78f974">{"x":{"filter":"none","vertical":false,"data":[["(Intercept)","age_cat5-9","age_cat10-14","age_cat15-19","age_cat20-29","age_cat30-49","age_cat50-69","age_cat70+"],[1.26,0.9399999999999999,1.15,0.99,1.03,1.07,0.68,0.53],[0.07000000000000001,0.1,0.11,0.11,0.1,0.11,0.26,0.92],[3.21,-0.62,1.29,-0.05,0.27,0.5600000000000001,-1.5,-0.7],[0,0.54,0.2,0.96,0.79,0.58,0.13,0.49],[1.1,0.77,0.93,0.8,0.84,0.85,0.41,0.07000000000000001],[1.46,1.15,1.42,1.24,1.26,1.33,1.13,3.2]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>term<\/th>\n      <th>estimate<\/th>\n      <th>std.error<\/th>\n      <th>statistic<\/th>\n      <th>p.value<\/th>\n      <th>conf.low<\/th>\n      <th>conf.high<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":8,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6]},{"name":"term","targets":0},{"name":"estimate","targets":1},{"name":"std.error","targets":2},{"name":"statistic","targets":3},{"name":"p.value","targets":4},{"name":"conf.low","targets":5},{"name":"conf.high","targets":6}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[8,10,25,50,100]},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script>
<ol start="2" style="list-style-type: decimal">
<li>Kết hợp các kết quả của mô hình vào trong một bảng đếm. Dưới đây, chúng tôi tạo một bảng đếm bằng hàm <code>tabyl()</code> từ package <strong>janitor</strong>, như được đề cập trong chương <a href="tables-descriptive.html#tables-descriptive">Bảng mô tả</a>.</li>
</ol>
<div class="sourceCode" id="cb983"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb983-1"><a href="regression.html#cb983-1" tabindex="-1"></a>counts_table <span class="ot">&lt;-</span> linelist <span class="sc">%&gt;%</span> </span>
<span id="cb983-2"><a href="regression.html#cb983-2" tabindex="-1"></a>  janitor<span class="sc">::</span><span class="fu">tabyl</span>(age_cat, outcome)</span></code></pre></div>
<!-- * Group rows by outcome, and get counts by age category   -->
<!-- * Pivot wider so the column are `age_cat`, `0`, and `1`   -->
<!-- * Remove row for `NA` `age_cat`, if applicable, to align with the model results   -->
<!-- ```{r} -->
<!-- counts_table <- linelist %>%  -->
<!--   filter(!is.na(outcome) & !is.na(age_cat)) %>%    # ensure outcome and age_cat are present  -->
<!--   group_by(outcome) %>%                            # get counts of variable of interest grouped by outcome -->
<!--   count(age_cat) %>%   ## gets number or rows by unique outcome-age category combinations   -->
<!--   pivot_wider(names_from = outcome, values_from = n)    ## spread data to wide format (as in cross-tabulation) -->
<!-- ``` -->
<p>Đây là cách mà bảng <code>counts_table</code> được hiển thị:</p>
<div class="datatables html-widget html-fill-item" id="htmlwidget-7e6c7afaaccec6c64015" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-7e6c7afaaccec6c64015">{"x":{"filter":"none","vertical":false,"data":[["0-4","5-9","10-14","15-19","20-29","30-49","50-69","70+"],[338,365,273,238,345,228,35,3],[427,433,396,299,448,307,30,2]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>age_cat<\/th>\n      <th>0<\/th>\n      <th>1<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":8,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":[1,2]},{"name":"age_cat","targets":0},{"name":"0","targets":1},{"name":"1","targets":2}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[8,10,25,50,100]},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script>
<p>Bây giờ chúng ta có thể nối bảng <code>counts_table</code> và kết quả của mô hình <code>model</code> lại với nhau theo chiều ngang bằng hàm nối cột <code>bind_cols()</code> (<strong>dplyr</strong>). Hãy nhớ rằng đối với hàm <code>bind_cols()</code> các hàng trong hai cấu trúc dữ liệu trên phải được căn chỉnh hoàn hảo. Trong đoạn code này, bởi vì chúng ta đang thực hiện một chuỗi các thuật toán pipe, chúng ta sử dụng dấu <code>.</code> để đại diện cho đối tượng được nối trong bảng đếm <code>counts_table</code> khi chúng tôi nối nó với kết quả mô hình <code>model</code>. Để kết thúc quy trình này, chúng ta sử dụng hàm <code>select()</code> để chọn các cột mong muốn và thứ tự của nó, và cuối cùng áp dụng hàm <code>round()</code> trong <strong>base</strong> R để làm tròn với hai chữ số thập phân cho tất cả các cột.</p>
<div class="sourceCode" id="cb984"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb984-1"><a href="regression.html#cb984-1" tabindex="-1"></a>combined <span class="ot">&lt;-</span> counts_table <span class="sc">%&gt;%</span>           <span class="co"># begin with table of counts</span></span>
<span id="cb984-2"><a href="regression.html#cb984-2" tabindex="-1"></a>  <span class="fu">bind_cols</span>(., model) <span class="sc">%&gt;%</span>              <span class="co"># combine with the outputs of the regression </span></span>
<span id="cb984-3"><a href="regression.html#cb984-3" tabindex="-1"></a>  <span class="fu">select</span>(term, <span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>, estimate,          <span class="co"># select and re-order cols</span></span>
<span id="cb984-4"><a href="regression.html#cb984-4" tabindex="-1"></a>         conf.low, conf.high, p.value) <span class="sc">%&gt;%</span> </span>
<span id="cb984-5"><a href="regression.html#cb984-5" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), round, <span class="at">digits =</span> <span class="dv">2</span>)) <span class="do">## round to 2 decimal places</span></span></code></pre></div>
<p>Đây là hiển thị của cấu trúc đã được kết hợp, nó được xuất gọn gẽ dưới dạng một hình bằng thông qua một hàm trong package <strong>flextable</strong>. Chương <a href="tables-presentation.html#tables-presentation">Trình bày bảng</a> giải thích cách tùy chỉnh các bảng như vậy bằng <strong>flextable</strong>, hoặc có thể sử dụng các gói lệnh khác như <strong>knitr</strong> hoặc <strong>GT</strong>.</p>
<div class="sourceCode" id="cb985"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb985-1"><a href="regression.html#cb985-1" tabindex="-1"></a>combined <span class="ot">&lt;-</span> combined <span class="sc">%&gt;%</span> </span>
<span id="cb985-2"><a href="regression.html#cb985-2" tabindex="-1"></a>  flextable<span class="sc">::</span><span class="fu">qflextable</span>()</span></code></pre></div>
</div>
<div id="vòng-lặp-cho-nhiều-mô-hình-đơn-biến" class="section level4 unnumbered">
<h4>Vòng lặp cho nhiều mô hình đơn biến</h4>
<p>Sau đây chúng tôi trình bày một phương pháp sử dụng <code>glm()</code> và <code>tidy()</code> để có một cách tiếp cận đơn giản hơn, xem thêm ở phần <strong>gtsummary</strong>.</p>
<p>Để thực hiện các mô hình cho một số biến giải thích và cho ra các tỷ số chênh trong phân tích đơn biến (nghĩa là không có kiểm soát lẫn nhau), chúng ta có thể sử dụng các cách tiếp cận dưới đây. Sử dụng hàm <code>str_c()</code> từ package <strong>stringr</strong> để tạo ra các công thức cho phân tích đơn biến (xem chương <a href="characters-strings.html#characters-strings">Ký tự và chuỗi</a>), thực hiện hàm <code>glm()</code> cho mỗi công thức, chuyển mỗi kết quả đầu ra của <code>glm()</code> đến hàm <code>tidy()</code> và cuối cùng thu gọn lại tất các kết quả đầu ra của mô hình bằng hàm nối dòng <code>bind_rows()</code> từ <strong>tidyr</strong>. Phương pháp này sử dụng hàm <code>map()</code> từ package <strong>purrr</strong> để lặp - xem chương [Lặp, vòng lặp và danh sách] để biết thêm thông tin về công cụ này.</p>
<ol style="list-style-type: decimal">
<li><p>Tạo một véctơ tên các cột của biến giải thích. Chúng ta đã tạo biến này <code>explanatory_vars</code> trong phần chuẩn bị của chương này.</p></li>
<li><p>Sử dụng hàm <code>str_c()</code> để tạo các công thức chuỗi với biến kết cục <code>outcome</code> ở bên trái và tên một cột của véctơ <code>explanatory_vars</code> ở bên phải. Dấu chấm <code>.</code> trong hàm này thay thế cho tên cột trong véctơ <code>explanatory_vars</code>.</p></li>
</ol>
<div class="sourceCode" id="cb986"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb986-1"><a href="regression.html#cb986-1" tabindex="-1"></a>explanatory_vars <span class="sc">%&gt;%</span> <span class="fu">str_c</span>(<span class="st">&quot;outcome ~ &quot;</span>, .)</span></code></pre></div>
<pre><code>## [1] &quot;outcome ~ gender&quot;  &quot;outcome ~ fever&quot;   &quot;outcome ~ chills&quot;  &quot;outcome ~ cough&quot;  
## [5] &quot;outcome ~ aches&quot;   &quot;outcome ~ vomit&quot;   &quot;outcome ~ age_cat&quot;</code></pre>
<ol start="3" style="list-style-type: decimal">
<li><p>Đưa các công thức chuỗi này vào hàm <code>map()</code> và đặt <code>~glm()</code> làm hàm áp dụng cho mỗi đầu vào. Bên trong hàm <code>glm()</code>, thiết lập công thức hồi quy <code>as.formula(.x)</code> trong đó <code>.x</code> sẽ được thay thế bằng các công thức chuỗi đã được tạo bên trên. Hàm <code>map()</code> sẽ lặp từng công thức chuỗi và thực hiện hồi quy cho từng công thức.</p></li>
<li><p>Kết quả đầu ra của hàm <code>map()</code> đầu tiên sẽ được chuyển đến hàm <code>map()</code> thứ hai mà sử dụng hàm <code>tidy()</code> để làm gọn các kết quả đầu ra.</p></li>
<li><p>Cuối cùng, kết quả đầu ra của hàm <code>map()</code> thứ hai (một danh sách các data frames đã được làm gọn) được tóm tắt bằng hàm nối dòng <code>bind_rows()</code>, kết quả cho ra một data frame với tất cả các kết quả đơn biến.</p></li>
</ol>
<div class="sourceCode" id="cb988"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb988-1"><a href="regression.html#cb988-1" tabindex="-1"></a>models <span class="ot">&lt;-</span> explanatory_vars <span class="sc">%&gt;%</span>       <span class="co"># begin with variables of interest</span></span>
<span id="cb988-2"><a href="regression.html#cb988-2" tabindex="-1"></a>  <span class="fu">str_c</span>(<span class="st">&quot;outcome ~ &quot;</span>, .) <span class="sc">%&gt;%</span>         <span class="co"># combine each variable into formula (&quot;outcome ~ variable of interest&quot;)</span></span>
<span id="cb988-3"><a href="regression.html#cb988-3" tabindex="-1"></a>  </span>
<span id="cb988-4"><a href="regression.html#cb988-4" tabindex="-1"></a>  <span class="co"># iterate through each univariate formula</span></span>
<span id="cb988-5"><a href="regression.html#cb988-5" tabindex="-1"></a>  <span class="fu">map</span>(                               </span>
<span id="cb988-6"><a href="regression.html#cb988-6" tabindex="-1"></a>    <span class="at">.f =</span> <span class="sc">~</span><span class="fu">glm</span>(                       <span class="co"># pass the formulas one-by-one to glm()</span></span>
<span id="cb988-7"><a href="regression.html#cb988-7" tabindex="-1"></a>      <span class="at">formula =</span> <span class="fu">as.formula</span>(.x),      <span class="co"># within glm(), the string formula is .x</span></span>
<span id="cb988-8"><a href="regression.html#cb988-8" tabindex="-1"></a>      <span class="at">family =</span> <span class="st">&quot;binomial&quot;</span>,           <span class="co"># specify type of glm (logistic)</span></span>
<span id="cb988-9"><a href="regression.html#cb988-9" tabindex="-1"></a>      <span class="at">data =</span> linelist)) <span class="sc">%&gt;%</span>          <span class="co"># dataset</span></span>
<span id="cb988-10"><a href="regression.html#cb988-10" tabindex="-1"></a>  </span>
<span id="cb988-11"><a href="regression.html#cb988-11" tabindex="-1"></a>  <span class="co"># tidy up each of the glm regression outputs from above</span></span>
<span id="cb988-12"><a href="regression.html#cb988-12" tabindex="-1"></a>  <span class="fu">map</span>(</span>
<span id="cb988-13"><a href="regression.html#cb988-13" tabindex="-1"></a>    <span class="at">.f =</span> <span class="sc">~</span><span class="fu">tidy</span>(</span>
<span id="cb988-14"><a href="regression.html#cb988-14" tabindex="-1"></a>      .x, </span>
<span id="cb988-15"><a href="regression.html#cb988-15" tabindex="-1"></a>      <span class="at">exponentiate =</span> <span class="cn">TRUE</span>,           <span class="co"># exponentiate </span></span>
<span id="cb988-16"><a href="regression.html#cb988-16" tabindex="-1"></a>      <span class="at">conf.int =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span>          <span class="co"># return confidence intervals</span></span>
<span id="cb988-17"><a href="regression.html#cb988-17" tabindex="-1"></a>  </span>
<span id="cb988-18"><a href="regression.html#cb988-18" tabindex="-1"></a>  <span class="co"># collapse the list of regression outputs in to one data frame</span></span>
<span id="cb988-19"><a href="regression.html#cb988-19" tabindex="-1"></a>  <span class="fu">bind_rows</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb988-20"><a href="regression.html#cb988-20" tabindex="-1"></a>  </span>
<span id="cb988-21"><a href="regression.html#cb988-21" tabindex="-1"></a>  <span class="co"># round all numeric columns</span></span>
<span id="cb988-22"><a href="regression.html#cb988-22" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), round, <span class="at">digits =</span> <span class="dv">2</span>))</span></code></pre></div>
<p>Lúc này, kết quả xuất ra của <code>models</code> dài hơn bởi vì kết quả bây giờ bao gồm các kết quả đầu ra của một số hồi quy đơn biến. Nhấp nút tiếp theo để xem tất cả các hàng của <code>model</code>.</p>
<div class="datatables html-widget html-fill-item" id="htmlwidget-ae0655723ad6574772f8" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-ae0655723ad6574772f8">{"x":{"filter":"none","vertical":false,"data":[["(Intercept)","gender","(Intercept)","fever","(Intercept)","chills","(Intercept)","cough","(Intercept)","aches","(Intercept)","vomit","(Intercept)","age_cat5-9","age_cat10-14","age_cat15-19","age_cat20-29","age_cat30-49","age_cat50-69","age_cat70+"],[1.28,1,1.28,1,1.28,1.03,1.14,1.15,1.29,0.93,1.23,1.09,1.26,0.9399999999999999,1.15,0.99,1.03,1.07,0.68,0.53],[0.04,0.06,0.07000000000000001,0.08,0.03,0.08,0.08,0.09,0.03,0.1,0.04,0.06,0.07000000000000001,0.1,0.11,0.11,0.1,0.11,0.26,0.92],[5.67,-0.04,3.44,0.01,6.98,0.41,1.53,1.58,7.78,-0.66,4.67,1.39,3.21,-0.62,1.29,-0.05,0.27,0.5600000000000001,-1.5,-0.7],[0,0.97,0,0.99,0,0.68,0.13,0.11,0,0.51,0,0.17,0,0.54,0.2,0.96,0.79,0.58,0.13,0.49],[1.18,0.88,1.11,0.85,1.19,0.89,0.97,0.97,1.21,0.76,1.13,0.96,1.1,0.77,0.93,0.8,0.84,0.85,0.41,0.07000000000000001],[1.4,1.13,1.48,1.17,1.37,1.21,1.34,1.37,1.38,1.14,1.34,1.23,1.46,1.15,1.42,1.24,1.26,1.33,1.13,3.2]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>term<\/th>\n      <th>estimate<\/th>\n      <th>std.error<\/th>\n      <th>statistic<\/th>\n      <th>p.value<\/th>\n      <th>conf.low<\/th>\n      <th>conf.high<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6]},{"name":"term","targets":0},{"name":"estimate","targets":1},{"name":"std.error","targets":2},{"name":"statistic","targets":3},{"name":"p.value","targets":4},{"name":"conf.low","targets":5},{"name":"conf.high","targets":6}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script>
<p>Như lúc trước, chúng ta có thể tạo một bảng đếm từ bộ số liệu <code>linelist</code> cho mỗi biến giải thích, gắn chúng với <code>models</code>, và tạo ra một bảng đẹp. Chúng ta bắt đầu với các biến giải thích này, và lặp lại các biến này thông qua hàm <code>map()</code>. Chúng ta lặp lại qua một hàm do người dùng tạo ra mà liên quan đến việc tạo ra một bảng đếm bằng cách dùng các hàm trong package <strong>dplyr</strong> Sau đó, kết quả được kết nối trình tự với kết quả của mô hình <code>models</code>.</p>
<div class="sourceCode" id="cb989"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb989-1"><a href="regression.html#cb989-1" tabindex="-1"></a><span class="do">## for each explanatory variable</span></span>
<span id="cb989-2"><a href="regression.html#cb989-2" tabindex="-1"></a>univ_tab_base <span class="ot">&lt;-</span> explanatory_vars <span class="sc">%&gt;%</span> </span>
<span id="cb989-3"><a href="regression.html#cb989-3" tabindex="-1"></a>  <span class="fu">map</span>(<span class="at">.f =</span> </span>
<span id="cb989-4"><a href="regression.html#cb989-4" tabindex="-1"></a>    <span class="sc">~</span>{linelist <span class="sc">%&gt;%</span>                <span class="do">## begin with linelist</span></span>
<span id="cb989-5"><a href="regression.html#cb989-5" tabindex="-1"></a>        <span class="fu">group_by</span>(outcome) <span class="sc">%&gt;%</span>     <span class="do">## group data set by outcome</span></span>
<span id="cb989-6"><a href="regression.html#cb989-6" tabindex="-1"></a>        <span class="fu">count</span>(.data[[.x]]) <span class="sc">%&gt;%</span>    <span class="do">## produce counts for variable of interest</span></span>
<span id="cb989-7"><a href="regression.html#cb989-7" tabindex="-1"></a>        <span class="fu">pivot_wider</span>(              <span class="do">## spread to wide format (as in cross-tabulation)</span></span>
<span id="cb989-8"><a href="regression.html#cb989-8" tabindex="-1"></a>          <span class="at">names_from =</span> outcome,</span>
<span id="cb989-9"><a href="regression.html#cb989-9" tabindex="-1"></a>          <span class="at">values_from =</span> n) <span class="sc">%&gt;%</span> </span>
<span id="cb989-10"><a href="regression.html#cb989-10" tabindex="-1"></a>        <span class="fu">drop_na</span>(.data[[.x]]) <span class="sc">%&gt;%</span>         <span class="do">## drop rows with missings</span></span>
<span id="cb989-11"><a href="regression.html#cb989-11" tabindex="-1"></a>        <span class="fu">rename</span>(<span class="st">&quot;variable&quot;</span> <span class="ot">=</span> .x) <span class="sc">%&gt;%</span>      <span class="do">## change variable of interest column to &quot;variable&quot;</span></span>
<span id="cb989-12"><a href="regression.html#cb989-12" tabindex="-1"></a>        <span class="fu">mutate</span>(<span class="at">variable =</span> <span class="fu">as.character</span>(variable))} <span class="do">## convert to character, else non-dichotomous (categorical) variables come out as factor and cant be merged</span></span>
<span id="cb989-13"><a href="regression.html#cb989-13" tabindex="-1"></a>      ) <span class="sc">%&gt;%</span> </span>
<span id="cb989-14"><a href="regression.html#cb989-14" tabindex="-1"></a>  </span>
<span id="cb989-15"><a href="regression.html#cb989-15" tabindex="-1"></a>  <span class="do">## collapse the list of count outputs in to one data frame</span></span>
<span id="cb989-16"><a href="regression.html#cb989-16" tabindex="-1"></a>  <span class="fu">bind_rows</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb989-17"><a href="regression.html#cb989-17" tabindex="-1"></a>  </span>
<span id="cb989-18"><a href="regression.html#cb989-18" tabindex="-1"></a>  <span class="do">## merge with the outputs of the regression </span></span>
<span id="cb989-19"><a href="regression.html#cb989-19" tabindex="-1"></a>  <span class="fu">bind_cols</span>(., models) <span class="sc">%&gt;%</span> </span>
<span id="cb989-20"><a href="regression.html#cb989-20" tabindex="-1"></a>  </span>
<span id="cb989-21"><a href="regression.html#cb989-21" tabindex="-1"></a>  <span class="do">## only keep columns interested in </span></span>
<span id="cb989-22"><a href="regression.html#cb989-22" tabindex="-1"></a>  <span class="fu">select</span>(term, <span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>, estimate, conf.low, conf.high, p.value) <span class="sc">%&gt;%</span> </span>
<span id="cb989-23"><a href="regression.html#cb989-23" tabindex="-1"></a>  </span>
<span id="cb989-24"><a href="regression.html#cb989-24" tabindex="-1"></a>  <span class="do">## round decimal places</span></span>
<span id="cb989-25"><a href="regression.html#cb989-25" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), round, <span class="at">digits =</span> <span class="dv">2</span>))</span></code></pre></div>
<p>Bên dưới là cấu trúc số liệu kết nối được tạo ra. Xem chương <a href="tables-presentation.html#tables-presentation">Trình bày bảng</a> để có thêm ý tưởng về cách chuyển đổi bảng số liệu này thành một bảng đẹp trên HTML (ví dụ như với package <strong>flextable</strong>).</p>
<div class="datatables html-widget html-fill-item" id="htmlwidget-4a39c9d675c82f14ab74" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-4a39c9d675c82f14ab74">{"x":{"filter":"none","vertical":false,"data":[["(Intercept)","gender","(Intercept)","fever","(Intercept)","chills","(Intercept)","cough","(Intercept)","aches","(Intercept)","vomit","(Intercept)","age_cat5-9","age_cat10-14","age_cat15-19","age_cat20-29","age_cat30-49","age_cat50-69","age_cat70+"],[909,916,340,1485,1472,353,272,1553,1636,189,931,894,338,365,273,238,345,228,35,3],[1168,1174,436,1906,1877,465,309,2033,2114,228,1144,1198,427,433,396,299,448,307,30,2],[1.28,1,1.28,1,1.28,1.03,1.14,1.15,1.29,0.93,1.23,1.09,1.26,0.9399999999999999,1.15,0.99,1.03,1.07,0.68,0.53],[1.18,0.88,1.11,0.85,1.19,0.89,0.97,0.97,1.21,0.76,1.13,0.96,1.1,0.77,0.93,0.8,0.84,0.85,0.41,0.07000000000000001],[1.4,1.13,1.48,1.17,1.37,1.21,1.34,1.37,1.38,1.14,1.34,1.23,1.46,1.15,1.42,1.24,1.26,1.33,1.13,3.2],[0,0.97,0,0.99,0,0.68,0.13,0.11,0,0.51,0,0.17,0,0.54,0.2,0.96,0.79,0.58,0.13,0.49]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>term<\/th>\n      <th>0<\/th>\n      <th>1<\/th>\n      <th>estimate<\/th>\n      <th>conf.low<\/th>\n      <th>conf.high<\/th>\n      <th>p.value<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6]},{"name":"term","targets":0},{"name":"0","targets":1},{"name":"1","targets":2},{"name":"estimate","targets":3},{"name":"conf.low","targets":4},{"name":"conf.high","targets":5},{"name":"p.value","targets":6}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script>
<!-- ======================================================= -->
</div>
</div>
<div id="reg_gt_uni" class="section level3 unnumbered">
<h3><strong>gtsummary</strong> package</h3>
<p>Sau đây chúng tôi sẽ trình bày cách sử dụng hàm <code>tbl_uvregression()</code> từ package <strong>gtsummary</strong>. Cũng giống như trong chương <a href="https://epirhandbook.com/descriptive-tables.html">Bảng mô tả</a>, các hàm trong <strong>gtsummary</strong> thực hiện tốt các thống kê <em>và</em> xuất ra các kết quả khá chuyên nghiệp. Hàm này xuất ra một bảng kết quả của hồi quy đơn biến.</p>
<p>Chúng ta chỉ chọn các cột cần thiết từ bộ số liệu <code>linelist</code> (ecác biến giải thích và biến kết cục) và pipe chúng vào hàm <code>tbl_uvregression()</code>. Chúng ta sẽ thực hiện hồi quy đơn biến cho mỗi cột như được xác định trong véctơ <code>explanatory_vars</code> trong mục Chuẩn bị (gender, fever, chills, cough, aches, vomit, và age_cat).</p>
<p>Trong hàm này, chúng ta cung cấp thêm phương pháp thực hiện <code>method =</code> là <code>glm</code> (không có dấu ngoặc kép), biến kết cục <code>y =</code> cột kết quả (biến <code>outcome</code>), cụ thể <code>method.args =</code> mà chúng ta muốn thực hiện hồi quy logistic qua <code>family = binomial</code>, và lấy lũy thừa của kết quả.</p>
<p>Kết quả đầu ra dưới dạng HTML và chứa cột đếm</p>
<div class="sourceCode" id="cb990"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb990-1"><a href="regression.html#cb990-1" tabindex="-1"></a>univ_tab <span class="ot">&lt;-</span> linelist <span class="sc">%&gt;%</span> </span>
<span id="cb990-2"><a href="regression.html#cb990-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(explanatory_vars, outcome) <span class="sc">%&gt;%</span> <span class="do">## select variables of interest</span></span>
<span id="cb990-3"><a href="regression.html#cb990-3" tabindex="-1"></a></span>
<span id="cb990-4"><a href="regression.html#cb990-4" tabindex="-1"></a>  <span class="fu">tbl_uvregression</span>(                         <span class="do">## produce univariate table</span></span>
<span id="cb990-5"><a href="regression.html#cb990-5" tabindex="-1"></a>    <span class="at">method =</span> glm,                           <span class="do">## define regression want to run (generalised linear model)</span></span>
<span id="cb990-6"><a href="regression.html#cb990-6" tabindex="-1"></a>    <span class="at">y =</span> outcome,                            <span class="do">## define outcome variable</span></span>
<span id="cb990-7"><a href="regression.html#cb990-7" tabindex="-1"></a>    <span class="at">method.args =</span> <span class="fu">list</span>(<span class="at">family =</span> binomial),  <span class="do">## define what type of glm want to run (logistic)</span></span>
<span id="cb990-8"><a href="regression.html#cb990-8" tabindex="-1"></a>    <span class="at">exponentiate =</span> <span class="cn">TRUE</span>                     <span class="do">## exponentiate to produce odds ratios (rather than log odds)</span></span>
<span id="cb990-9"><a href="regression.html#cb990-9" tabindex="-1"></a>  )</span>
<span id="cb990-10"><a href="regression.html#cb990-10" tabindex="-1"></a></span>
<span id="cb990-11"><a href="regression.html#cb990-11" tabindex="-1"></a><span class="do">## view univariate results table </span></span>
<span id="cb990-12"><a href="regression.html#cb990-12" tabindex="-1"></a>univ_tab</span></code></pre></div>
<div id="vsfatmorzo" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#vsfatmorzo table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#vsfatmorzo thead, #vsfatmorzo tbody, #vsfatmorzo tfoot, #vsfatmorzo tr, #vsfatmorzo td, #vsfatmorzo th {
  border-style: none;
}

#vsfatmorzo p {
  margin: 0;
  padding: 0;
}

#vsfatmorzo .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#vsfatmorzo .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#vsfatmorzo .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#vsfatmorzo .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#vsfatmorzo .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#vsfatmorzo .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#vsfatmorzo .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#vsfatmorzo .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#vsfatmorzo .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#vsfatmorzo .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#vsfatmorzo .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#vsfatmorzo .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#vsfatmorzo .gt_spanner_row {
  border-bottom-style: hidden;
}

#vsfatmorzo .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#vsfatmorzo .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#vsfatmorzo .gt_from_md > :first-child {
  margin-top: 0;
}

#vsfatmorzo .gt_from_md > :last-child {
  margin-bottom: 0;
}

#vsfatmorzo .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#vsfatmorzo .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#vsfatmorzo .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#vsfatmorzo .gt_row_group_first td {
  border-top-width: 2px;
}

#vsfatmorzo .gt_row_group_first th {
  border-top-width: 2px;
}

#vsfatmorzo .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#vsfatmorzo .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#vsfatmorzo .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#vsfatmorzo .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#vsfatmorzo .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#vsfatmorzo .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#vsfatmorzo .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#vsfatmorzo .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#vsfatmorzo .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#vsfatmorzo .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#vsfatmorzo .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#vsfatmorzo .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#vsfatmorzo .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#vsfatmorzo .gt_left {
  text-align: left;
}

#vsfatmorzo .gt_center {
  text-align: center;
}

#vsfatmorzo .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#vsfatmorzo .gt_font_normal {
  font-weight: normal;
}

#vsfatmorzo .gt_font_bold {
  font-weight: bold;
}

#vsfatmorzo .gt_font_italic {
  font-style: italic;
}

#vsfatmorzo .gt_super {
  font-size: 65%;
}

#vsfatmorzo .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#vsfatmorzo .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#vsfatmorzo .gt_indent_1 {
  text-indent: 5px;
}

#vsfatmorzo .gt_indent_2 {
  text-indent: 10px;
}

#vsfatmorzo .gt_indent_3 {
  text-indent: 15px;
}

#vsfatmorzo .gt_indent_4 {
  text-indent: 20px;
}

#vsfatmorzo .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="&lt;strong&gt;Characteristic&lt;/strong&gt;"><strong>Characteristic</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="&lt;strong&gt;N&lt;/strong&gt;"><strong>N</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="&lt;strong&gt;OR&lt;/strong&gt;&lt;span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/span&gt;"><strong>OR</strong><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="&lt;strong&gt;95% CI&lt;/strong&gt;&lt;span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/span&gt;"><strong>95% CI</strong><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="&lt;strong&gt;p-value&lt;/strong&gt;"><strong>p-value</strong></th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="label" class="gt_row gt_left">gender</td>
<td headers="stat_n" class="gt_row gt_center">4,167</td>
<td headers="estimate" class="gt_row gt_center">1.00</td>
<td headers="ci" class="gt_row gt_center">0.88, 1.13</td>
<td headers="p.value" class="gt_row gt_center">>0.9</td></tr>
    <tr><td headers="label" class="gt_row gt_left">fever</td>
<td headers="stat_n" class="gt_row gt_center">4,167</td>
<td headers="estimate" class="gt_row gt_center">1.00</td>
<td headers="ci" class="gt_row gt_center">0.85, 1.17</td>
<td headers="p.value" class="gt_row gt_center">>0.9</td></tr>
    <tr><td headers="label" class="gt_row gt_left">chills</td>
<td headers="stat_n" class="gt_row gt_center">4,167</td>
<td headers="estimate" class="gt_row gt_center">1.03</td>
<td headers="ci" class="gt_row gt_center">0.89, 1.21</td>
<td headers="p.value" class="gt_row gt_center">0.7</td></tr>
    <tr><td headers="label" class="gt_row gt_left">cough</td>
<td headers="stat_n" class="gt_row gt_center">4,167</td>
<td headers="estimate" class="gt_row gt_center">1.15</td>
<td headers="ci" class="gt_row gt_center">0.97, 1.37</td>
<td headers="p.value" class="gt_row gt_center">0.11</td></tr>
    <tr><td headers="label" class="gt_row gt_left">aches</td>
<td headers="stat_n" class="gt_row gt_center">4,167</td>
<td headers="estimate" class="gt_row gt_center">0.93</td>
<td headers="ci" class="gt_row gt_center">0.76, 1.14</td>
<td headers="p.value" class="gt_row gt_center">0.5</td></tr>
    <tr><td headers="label" class="gt_row gt_left">vomit</td>
<td headers="stat_n" class="gt_row gt_center">4,167</td>
<td headers="estimate" class="gt_row gt_center">1.09</td>
<td headers="ci" class="gt_row gt_center">0.96, 1.23</td>
<td headers="p.value" class="gt_row gt_center">0.2</td></tr>
    <tr><td headers="label" class="gt_row gt_left">age_cat</td>
<td headers="stat_n" class="gt_row gt_center">4,167</td>
<td headers="estimate" class="gt_row gt_center"><br /></td>
<td headers="ci" class="gt_row gt_center"><br /></td>
<td headers="p.value" class="gt_row gt_center"><br /></td></tr>
    <tr><td headers="label" class="gt_row gt_left">    0-4</td>
<td headers="stat_n" class="gt_row gt_center"><br /></td>
<td headers="estimate" class="gt_row gt_center">—</td>
<td headers="ci" class="gt_row gt_center">—</td>
<td headers="p.value" class="gt_row gt_center"><br /></td></tr>
    <tr><td headers="label" class="gt_row gt_left">    5-9</td>
<td headers="stat_n" class="gt_row gt_center"><br /></td>
<td headers="estimate" class="gt_row gt_center">0.94</td>
<td headers="ci" class="gt_row gt_center">0.77, 1.15</td>
<td headers="p.value" class="gt_row gt_center">0.5</td></tr>
    <tr><td headers="label" class="gt_row gt_left">    10-14</td>
<td headers="stat_n" class="gt_row gt_center"><br /></td>
<td headers="estimate" class="gt_row gt_center">1.15</td>
<td headers="ci" class="gt_row gt_center">0.93, 1.42</td>
<td headers="p.value" class="gt_row gt_center">0.2</td></tr>
    <tr><td headers="label" class="gt_row gt_left">    15-19</td>
<td headers="stat_n" class="gt_row gt_center"><br /></td>
<td headers="estimate" class="gt_row gt_center">0.99</td>
<td headers="ci" class="gt_row gt_center">0.80, 1.24</td>
<td headers="p.value" class="gt_row gt_center">>0.9</td></tr>
    <tr><td headers="label" class="gt_row gt_left">    20-29</td>
<td headers="stat_n" class="gt_row gt_center"><br /></td>
<td headers="estimate" class="gt_row gt_center">1.03</td>
<td headers="ci" class="gt_row gt_center">0.84, 1.26</td>
<td headers="p.value" class="gt_row gt_center">0.8</td></tr>
    <tr><td headers="label" class="gt_row gt_left">    30-49</td>
<td headers="stat_n" class="gt_row gt_center"><br /></td>
<td headers="estimate" class="gt_row gt_center">1.07</td>
<td headers="ci" class="gt_row gt_center">0.85, 1.33</td>
<td headers="p.value" class="gt_row gt_center">0.6</td></tr>
    <tr><td headers="label" class="gt_row gt_left">    50-69</td>
<td headers="stat_n" class="gt_row gt_center"><br /></td>
<td headers="estimate" class="gt_row gt_center">0.68</td>
<td headers="ci" class="gt_row gt_center">0.41, 1.13</td>
<td headers="p.value" class="gt_row gt_center">0.13</td></tr>
    <tr><td headers="label" class="gt_row gt_left">    70+</td>
<td headers="stat_n" class="gt_row gt_center"><br /></td>
<td headers="estimate" class="gt_row gt_center">0.53</td>
<td headers="ci" class="gt_row gt_center">0.07, 3.20</td>
<td headers="p.value" class="gt_row gt_center">0.5</td></tr>
  </tbody>
  
  <tfoot class="gt_footnotes">
    <tr>
      <td class="gt_footnote" colspan="5"><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span> OR = Odds Ratio, CI = Confidence Interval</td>
    </tr>
  </tfoot>
</table>
</div>
<p>Chúng ta có thể sửa đổi đối với kết quả đầu ra của bảng này, ví dụ như điều chỉnh các nhãn, tô đậm các hàng theo giá trị p, .v.v. Xem hướng dẫn <a href="http://www.danieldsjoberg.com/gtsummary/articles/tbl_regression.html">tại đây</a> và các tài liệu trực tuyến khác.</p>
<!-- ======================================================= -->
</div>
</div>
<div id="phân-tích-phân-tầng" class="section level2" number="19.3">
<h2><span class="header-section-number">19.3</span> Phân tích phân tầng</h2>
<p>Hiện tại, phân tích phần tầng sử dụng package <strong>gtsummary</strong> đang được xây dựng, phần này sẽ được cập nhật trong thời gian thích hợp.</p>
</div>
<div id="phân-tích-đa-biến" class="section level2" number="19.4">
<h2><span class="header-section-number">19.4</span> Phân tích đa biến</h2>
<p>Đối với phân tích đa biến, chúng tôi trình bày hai cách tiếp cận:</p>
<ul>
<li><code>glm()</code> và <code>tidy()</code><br />
</li>
<li>Package <strong>gtsummary</strong></li>
</ul>
<p>Quy trình thực hiện khá tương tự và chỉ khác ở bước cuối cùng để kết nối kết quả lại với nhau.</p>
<div id="thực-hiện-phân-tích-đa-biến" class="section level3 unnumbered">
<h3>Thực hiện phân tích đa biến</h3>
<p>Ở đây chúng tôi sử dụng hàm <code>glm()</code> nhưng thêm nhiều biến hơn vào bên phải của phương trình và được phân tách với nhau bằng dấu cộng (<code>+</code>).</p>
<p>Để thực hiện mô hình với tất cả các biến giải thích, chúng ta thực hiện lệnh sau:</p>
<div class="sourceCode" id="cb991"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb991-1"><a href="regression.html#cb991-1" tabindex="-1"></a>mv_reg <span class="ot">&lt;-</span> <span class="fu">glm</span>(outcome <span class="sc">~</span> gender <span class="sc">+</span> fever <span class="sc">+</span> chills <span class="sc">+</span> cough <span class="sc">+</span> aches <span class="sc">+</span> vomit <span class="sc">+</span> age_cat, <span class="at">family =</span> <span class="st">&quot;binomial&quot;</span>, <span class="at">data =</span> linelist)</span>
<span id="cb991-2"><a href="regression.html#cb991-2" tabindex="-1"></a></span>
<span id="cb991-3"><a href="regression.html#cb991-3" tabindex="-1"></a><span class="fu">summary</span>(mv_reg)</span></code></pre></div>
<pre><code>## 
## Call:
## glm(formula = outcome ~ gender + fever + chills + cough + aches + 
##     vomit + age_cat, family = &quot;binomial&quot;, data = linelist)
## 
## Coefficients:
##               Estimate Std. Error z value Pr(&gt;|z|)
## (Intercept)   0.069054   0.131726   0.524    0.600
## gender        0.002448   0.065133   0.038    0.970
## fever         0.004309   0.080522   0.054    0.957
## chills        0.034112   0.078924   0.432    0.666
## cough         0.138584   0.089909   1.541    0.123
## aches        -0.070705   0.104078  -0.679    0.497
## vomit         0.086098   0.062618   1.375    0.169
## age_cat5-9   -0.063562   0.101851  -0.624    0.533
## age_cat10-14  0.136372   0.107275   1.271    0.204
## age_cat15-19 -0.011074   0.113640  -0.097    0.922
## age_cat20-29  0.026552   0.102780   0.258    0.796
## age_cat30-49  0.059569   0.116402   0.512    0.609
## age_cat50-69 -0.388964   0.262384  -1.482    0.138
## age_cat70+   -0.647443   0.917375  -0.706    0.480
## 
## (Dispersion parameter for binomial family taken to be 1)
## 
##     Null deviance: 5712.4  on 4166  degrees of freedom
## Residual deviance: 5700.2  on 4153  degrees of freedom
## AIC: 5728.2
## 
## Number of Fisher Scoring iterations: 4</code></pre>
<p>Nếu muốn bao gồm hai biến và tương tác của hai biến này, chúng ta có thể phân tách chúng bằng dấu hoa thị <code>*</code> thay cho dấu <code>+</code>. Nếu chúng ta chỉ muốn cụ thể sự tương tác, phân tách chúng bằng dấu hai chấm <code>:</code>. Ví dụ:</p>
<div class="sourceCode" id="cb993"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb993-1"><a href="regression.html#cb993-1" tabindex="-1"></a><span class="fu">glm</span>(outcome <span class="sc">~</span> gender <span class="sc">+</span> age_cat <span class="sc">*</span> fever, <span class="at">family =</span> <span class="st">&quot;binomial&quot;</span>, <span class="at">data =</span> linelist)</span></code></pre></div>
<p><em>Một tùy chọn khác</em>, chúng ta có thể sử dụng đoạn mã này để sử dụng một véc tơ đã được định nghĩa trước của các cột và tạo lại lệnh trên bằng cách sử dụng hàm <code>str_c()</code>. Điều này có thể hữu ích nếu chúng ta thay đổi tên các biến giải thích, hoặc bạn không muốn gõ lại tất cả mọi thứ.</p>
<div class="sourceCode" id="cb994"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb994-1"><a href="regression.html#cb994-1" tabindex="-1"></a><span class="do">## run a regression with all variables of interest </span></span>
<span id="cb994-2"><a href="regression.html#cb994-2" tabindex="-1"></a>mv_reg <span class="ot">&lt;-</span> explanatory_vars <span class="sc">%&gt;%</span>  <span class="do">## begin with vector of explanatory column names</span></span>
<span id="cb994-3"><a href="regression.html#cb994-3" tabindex="-1"></a>  <span class="fu">str_c</span>(<span class="at">collapse =</span> <span class="st">&quot;+&quot;</span>) <span class="sc">%&gt;%</span>     <span class="do">## combine all names of the variables of interest separated by a plus</span></span>
<span id="cb994-4"><a href="regression.html#cb994-4" tabindex="-1"></a>  <span class="fu">str_c</span>(<span class="st">&quot;outcome ~ &quot;</span>, .) <span class="sc">%&gt;%</span>    <span class="do">## combine the names of variables of interest with outcome in formula style</span></span>
<span id="cb994-5"><a href="regression.html#cb994-5" tabindex="-1"></a>  <span class="fu">glm</span>(<span class="at">family =</span> <span class="st">&quot;binomial&quot;</span>,      <span class="do">## define type of glm as logistic,</span></span>
<span id="cb994-6"><a href="regression.html#cb994-6" tabindex="-1"></a>      <span class="at">data =</span> linelist)          <span class="do">## define your dataset</span></span></code></pre></div>
<div id="xây-dựng-mô-hình" class="section level4 unnumbered">
<h4>Xây dựng mô hình</h4>
<p>Chúng ta có thể xây dựng mô hình theo từng bước, lưu các mô hình khác nhau với một số biến giải thích. Chúng ta có thể sử dụng kiểm định tỷ số khả dĩ (likelihood-ratio tests) để so sánh các mô hình này bằng cách sử dụng hàm <code>lrtest()</code> từ package <strong>lmtest</strong>, như dưới đây:</p>
<p><span style="color: black;"><strong><em>CHÚ Ý:</em></strong> Sử dụng hàn <code>anova(model1, model2, test = "Chisq)</code> trong <strong>base</strong> R cũng cho kết quả tương tự</span></p>
<div class="sourceCode" id="cb995"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb995-1"><a href="regression.html#cb995-1" tabindex="-1"></a>model1 <span class="ot">&lt;-</span> <span class="fu">glm</span>(outcome <span class="sc">~</span> age_cat, <span class="at">family =</span> <span class="st">&quot;binomial&quot;</span>, <span class="at">data =</span> linelist)</span>
<span id="cb995-2"><a href="regression.html#cb995-2" tabindex="-1"></a>model2 <span class="ot">&lt;-</span> <span class="fu">glm</span>(outcome <span class="sc">~</span> age_cat <span class="sc">+</span> gender, <span class="at">family =</span> <span class="st">&quot;binomial&quot;</span>, <span class="at">data =</span> linelist)</span>
<span id="cb995-3"><a href="regression.html#cb995-3" tabindex="-1"></a></span>
<span id="cb995-4"><a href="regression.html#cb995-4" tabindex="-1"></a>lmtest<span class="sc">::</span><span class="fu">lrtest</span>(model1, model2)</span></code></pre></div>
<pre><code>## Likelihood ratio test
## 
## Model 1: outcome ~ age_cat
## Model 2: outcome ~ age_cat + gender
##   #Df  LogLik Df  Chisq Pr(&gt;Chisq)
## 1   8 -2852.6                     
## 2   9 -2852.6  1 0.0002     0.9883</code></pre>
<p>Một tùy chọn khác là lấy đối tượng của mô hình và sử dụng hàm <code>step()</code> từ package <strong>stats</strong>. Chỉ rõ hướng lựa chọn biến mà chúng ta muốn sử dụng khi xây dựng mô hình.</p>
<div class="sourceCode" id="cb997"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb997-1"><a href="regression.html#cb997-1" tabindex="-1"></a><span class="do">## choose a model using forward selection based on AIC</span></span>
<span id="cb997-2"><a href="regression.html#cb997-2" tabindex="-1"></a><span class="do">## you can also do &quot;backward&quot; or &quot;both&quot; by adjusting the direction</span></span>
<span id="cb997-3"><a href="regression.html#cb997-3" tabindex="-1"></a>final_mv_reg <span class="ot">&lt;-</span> mv_reg <span class="sc">%&gt;%</span></span>
<span id="cb997-4"><a href="regression.html#cb997-4" tabindex="-1"></a>  <span class="fu">step</span>(<span class="at">direction =</span> <span class="st">&quot;forward&quot;</span>, <span class="at">trace =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p>Để hiển thị rõ số, chúng ta có thể tắt ký hiệu khoa học trong R bằng lệnh sau</p>
<div class="sourceCode" id="cb998"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb998-1"><a href="regression.html#cb998-1" tabindex="-1"></a><span class="fu">options</span>(<span class="at">scipen=</span><span class="dv">999</span>)</span></code></pre></div>
<p>Như được mô tả trong phần phân tích đơn biến, chuyển kết quả đầu ra của mô hình vào hàm <code>tidy()</code> để lấy lũy thừa cho các hệ số và khoảng tin cậy (CIs). Cuối cùng, làm tròn tất cả các cột số với hai số thập phân. Kéo qua để xem tất cả các hàng.</p>
<div class="sourceCode" id="cb999"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb999-1"><a href="regression.html#cb999-1" tabindex="-1"></a>mv_tab_base <span class="ot">&lt;-</span> final_mv_reg <span class="sc">%&gt;%</span> </span>
<span id="cb999-2"><a href="regression.html#cb999-2" tabindex="-1"></a>  broom<span class="sc">::</span><span class="fu">tidy</span>(<span class="at">exponentiate =</span> <span class="cn">TRUE</span>, <span class="at">conf.int =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span>  <span class="do">## get a tidy dataframe of estimates </span></span>
<span id="cb999-3"><a href="regression.html#cb999-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), round, <span class="at">digits =</span> <span class="dv">2</span>))          <span class="do">## round </span></span></code></pre></div>
<p>Đây là hiển thị kết quả dưới dạng data frame looks:</p>
<div class="datatables html-widget html-fill-item" id="htmlwidget-291ef55dbd18fe8bfee9" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-291ef55dbd18fe8bfee9">{"x":{"filter":"none","vertical":false,"data":[["(Intercept)","gender","fever","chills","cough","aches","vomit","age_cat5-9","age_cat10-14","age_cat15-19","age_cat20-29","age_cat30-49","age_cat50-69","age_cat70+"],[1.07,1,1,1.03,1.15,0.93,1.09,0.9399999999999999,1.15,0.99,1.03,1.06,0.68,0.52],[0.13,0.07000000000000001,0.08,0.08,0.09,0.1,0.06,0.1,0.11,0.11,0.1,0.12,0.26,0.92],[0.52,0.04,0.05,0.43,1.54,-0.68,1.37,-0.62,1.27,-0.1,0.26,0.51,-1.48,-0.71],[0.6,0.97,0.96,0.67,0.12,0.5,0.17,0.53,0.2,0.92,0.8,0.61,0.14,0.48],[0.83,0.88,0.86,0.89,0.96,0.76,0.96,0.77,0.93,0.79,0.84,0.85,0.4,0.07000000000000001],[1.39,1.14,1.18,1.21,1.37,1.14,1.23,1.15,1.41,1.24,1.26,1.33,1.13,3.19]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>term<\/th>\n      <th>estimate<\/th>\n      <th>std.error<\/th>\n      <th>statistic<\/th>\n      <th>p.value<\/th>\n      <th>conf.low<\/th>\n      <th>conf.high<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6]},{"name":"term","targets":0},{"name":"estimate","targets":1},{"name":"std.error","targets":2},{"name":"statistic","targets":3},{"name":"p.value","targets":4},{"name":"conf.low","targets":5},{"name":"conf.high","targets":6}],"order":[],"autoWidth":false,"orderClasses":false},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script>
<!-- ======================================================= -->
</div>
</div>
<div id="gộp-kết-quả-phân-tích-đơn-biến-và-đa-biến" class="section level3 unnumbered">
<h3>Gộp kết quả phân tích đơn biến và đa biến</h3>
<div id="gộp-bằng-package-gtsummary" class="section level4 unnumbered">
<h4>Gộp bằng package <strong>gtsummary</strong></h4>
<p>Hàm <code>tbl_regression()</code> trong package <strong>gtsummary</strong> sẽ lấy kết quả đầu tra từ một hồi quy (hàm <code>glm()</code> trong trường hợp này) và tạo ra một bảng tóm tắt đẹp.</p>
<div class="sourceCode" id="cb1000"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1000-1"><a href="regression.html#cb1000-1" tabindex="-1"></a><span class="do">## show results table of final regression </span></span>
<span id="cb1000-2"><a href="regression.html#cb1000-2" tabindex="-1"></a>mv_tab <span class="ot">&lt;-</span> <span class="fu">tbl_regression</span>(final_mv_reg, <span class="at">exponentiate =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p>Hãy xem bảng sau:</p>
<div class="sourceCode" id="cb1001"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1001-1"><a href="regression.html#cb1001-1" tabindex="-1"></a>mv_tab</span></code></pre></div>
<div id="uvpeuqpznn" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#uvpeuqpznn table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#uvpeuqpznn thead, #uvpeuqpznn tbody, #uvpeuqpznn tfoot, #uvpeuqpznn tr, #uvpeuqpznn td, #uvpeuqpznn th {
  border-style: none;
}

#uvpeuqpznn p {
  margin: 0;
  padding: 0;
}

#uvpeuqpznn .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#uvpeuqpznn .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#uvpeuqpznn .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#uvpeuqpznn .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#uvpeuqpznn .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#uvpeuqpznn .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#uvpeuqpznn .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#uvpeuqpznn .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#uvpeuqpznn .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#uvpeuqpznn .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#uvpeuqpznn .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#uvpeuqpznn .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#uvpeuqpznn .gt_spanner_row {
  border-bottom-style: hidden;
}

#uvpeuqpznn .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#uvpeuqpznn .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#uvpeuqpznn .gt_from_md > :first-child {
  margin-top: 0;
}

#uvpeuqpznn .gt_from_md > :last-child {
  margin-bottom: 0;
}

#uvpeuqpznn .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#uvpeuqpznn .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#uvpeuqpznn .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#uvpeuqpznn .gt_row_group_first td {
  border-top-width: 2px;
}

#uvpeuqpznn .gt_row_group_first th {
  border-top-width: 2px;
}

#uvpeuqpznn .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#uvpeuqpznn .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#uvpeuqpznn .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#uvpeuqpznn .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#uvpeuqpznn .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#uvpeuqpznn .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#uvpeuqpznn .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#uvpeuqpznn .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#uvpeuqpznn .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#uvpeuqpznn .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#uvpeuqpznn .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#uvpeuqpznn .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#uvpeuqpznn .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#uvpeuqpznn .gt_left {
  text-align: left;
}

#uvpeuqpznn .gt_center {
  text-align: center;
}

#uvpeuqpznn .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#uvpeuqpznn .gt_font_normal {
  font-weight: normal;
}

#uvpeuqpznn .gt_font_bold {
  font-weight: bold;
}

#uvpeuqpznn .gt_font_italic {
  font-style: italic;
}

#uvpeuqpznn .gt_super {
  font-size: 65%;
}

#uvpeuqpznn .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#uvpeuqpznn .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#uvpeuqpznn .gt_indent_1 {
  text-indent: 5px;
}

#uvpeuqpznn .gt_indent_2 {
  text-indent: 10px;
}

#uvpeuqpznn .gt_indent_3 {
  text-indent: 15px;
}

#uvpeuqpznn .gt_indent_4 {
  text-indent: 20px;
}

#uvpeuqpznn .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="&lt;strong&gt;Characteristic&lt;/strong&gt;"><strong>Characteristic</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="&lt;strong&gt;OR&lt;/strong&gt;&lt;span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/span&gt;"><strong>OR</strong><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="&lt;strong&gt;95% CI&lt;/strong&gt;&lt;span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/span&gt;"><strong>95% CI</strong><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="&lt;strong&gt;p-value&lt;/strong&gt;"><strong>p-value</strong></th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="label" class="gt_row gt_left">gender</td>
<td headers="estimate" class="gt_row gt_center">1.00</td>
<td headers="ci" class="gt_row gt_center">0.88, 1.14</td>
<td headers="p.value" class="gt_row gt_center">>0.9</td></tr>
    <tr><td headers="label" class="gt_row gt_left">fever</td>
<td headers="estimate" class="gt_row gt_center">1.00</td>
<td headers="ci" class="gt_row gt_center">0.86, 1.18</td>
<td headers="p.value" class="gt_row gt_center">>0.9</td></tr>
    <tr><td headers="label" class="gt_row gt_left">chills</td>
<td headers="estimate" class="gt_row gt_center">1.03</td>
<td headers="ci" class="gt_row gt_center">0.89, 1.21</td>
<td headers="p.value" class="gt_row gt_center">0.7</td></tr>
    <tr><td headers="label" class="gt_row gt_left">cough</td>
<td headers="estimate" class="gt_row gt_center">1.15</td>
<td headers="ci" class="gt_row gt_center">0.96, 1.37</td>
<td headers="p.value" class="gt_row gt_center">0.12</td></tr>
    <tr><td headers="label" class="gt_row gt_left">aches</td>
<td headers="estimate" class="gt_row gt_center">0.93</td>
<td headers="ci" class="gt_row gt_center">0.76, 1.14</td>
<td headers="p.value" class="gt_row gt_center">0.5</td></tr>
    <tr><td headers="label" class="gt_row gt_left">vomit</td>
<td headers="estimate" class="gt_row gt_center">1.09</td>
<td headers="ci" class="gt_row gt_center">0.96, 1.23</td>
<td headers="p.value" class="gt_row gt_center">0.2</td></tr>
    <tr><td headers="label" class="gt_row gt_left">age_cat</td>
<td headers="estimate" class="gt_row gt_center"><br /></td>
<td headers="ci" class="gt_row gt_center"><br /></td>
<td headers="p.value" class="gt_row gt_center"><br /></td></tr>
    <tr><td headers="label" class="gt_row gt_left">    0-4</td>
<td headers="estimate" class="gt_row gt_center">—</td>
<td headers="ci" class="gt_row gt_center">—</td>
<td headers="p.value" class="gt_row gt_center"><br /></td></tr>
    <tr><td headers="label" class="gt_row gt_left">    5-9</td>
<td headers="estimate" class="gt_row gt_center">0.94</td>
<td headers="ci" class="gt_row gt_center">0.77, 1.15</td>
<td headers="p.value" class="gt_row gt_center">0.5</td></tr>
    <tr><td headers="label" class="gt_row gt_left">    10-14</td>
<td headers="estimate" class="gt_row gt_center">1.15</td>
<td headers="ci" class="gt_row gt_center">0.93, 1.41</td>
<td headers="p.value" class="gt_row gt_center">0.2</td></tr>
    <tr><td headers="label" class="gt_row gt_left">    15-19</td>
<td headers="estimate" class="gt_row gt_center">0.99</td>
<td headers="ci" class="gt_row gt_center">0.79, 1.24</td>
<td headers="p.value" class="gt_row gt_center">>0.9</td></tr>
    <tr><td headers="label" class="gt_row gt_left">    20-29</td>
<td headers="estimate" class="gt_row gt_center">1.03</td>
<td headers="ci" class="gt_row gt_center">0.84, 1.26</td>
<td headers="p.value" class="gt_row gt_center">0.8</td></tr>
    <tr><td headers="label" class="gt_row gt_left">    30-49</td>
<td headers="estimate" class="gt_row gt_center">1.06</td>
<td headers="ci" class="gt_row gt_center">0.85, 1.33</td>
<td headers="p.value" class="gt_row gt_center">0.6</td></tr>
    <tr><td headers="label" class="gt_row gt_left">    50-69</td>
<td headers="estimate" class="gt_row gt_center">0.68</td>
<td headers="ci" class="gt_row gt_center">0.40, 1.13</td>
<td headers="p.value" class="gt_row gt_center">0.14</td></tr>
    <tr><td headers="label" class="gt_row gt_left">    70+</td>
<td headers="estimate" class="gt_row gt_center">0.52</td>
<td headers="ci" class="gt_row gt_center">0.07, 3.19</td>
<td headers="p.value" class="gt_row gt_center">0.5</td></tr>
  </tbody>
  
  <tfoot class="gt_footnotes">
    <tr>
      <td class="gt_footnote" colspan="4"><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span> OR = Odds Ratio, CI = Confidence Interval</td>
    </tr>
  </tfoot>
</table>
</div>
<p>Chúng ta cũng có thể kết hợp một số bảng kết quả đầu ra bằng cách dùng hàm <code>tbl_merge()</code> trong package <strong>gtsummary</strong>. Bây giờ chúng ta hộp các kết quả đa biến với kết quả <em>đơn biến</em> đã được tạo <a href="regression.html#reg_gt_uni">bên trên</a> bằng package <strong>gtsummary</strong>:</p>
<div class="sourceCode" id="cb1002"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1002-1"><a href="regression.html#cb1002-1" tabindex="-1"></a><span class="do">## combine with univariate results </span></span>
<span id="cb1002-2"><a href="regression.html#cb1002-2" tabindex="-1"></a><span class="fu">tbl_merge</span>(</span>
<span id="cb1002-3"><a href="regression.html#cb1002-3" tabindex="-1"></a>  <span class="at">tbls =</span> <span class="fu">list</span>(univ_tab, mv_tab),                          <span class="co"># combine</span></span>
<span id="cb1002-4"><a href="regression.html#cb1002-4" tabindex="-1"></a>  <span class="at">tab_spanner =</span> <span class="fu">c</span>(<span class="st">&quot;**Univariate**&quot;</span>, <span class="st">&quot;**Multivariable**&quot;</span>)) <span class="co"># set header names</span></span></code></pre></div>
<div id="tiqdnhtgwb" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#tiqdnhtgwb table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#tiqdnhtgwb thead, #tiqdnhtgwb tbody, #tiqdnhtgwb tfoot, #tiqdnhtgwb tr, #tiqdnhtgwb td, #tiqdnhtgwb th {
  border-style: none;
}

#tiqdnhtgwb p {
  margin: 0;
  padding: 0;
}

#tiqdnhtgwb .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#tiqdnhtgwb .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#tiqdnhtgwb .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#tiqdnhtgwb .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#tiqdnhtgwb .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#tiqdnhtgwb .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#tiqdnhtgwb .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#tiqdnhtgwb .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#tiqdnhtgwb .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#tiqdnhtgwb .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#tiqdnhtgwb .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#tiqdnhtgwb .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#tiqdnhtgwb .gt_spanner_row {
  border-bottom-style: hidden;
}

#tiqdnhtgwb .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#tiqdnhtgwb .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#tiqdnhtgwb .gt_from_md > :first-child {
  margin-top: 0;
}

#tiqdnhtgwb .gt_from_md > :last-child {
  margin-bottom: 0;
}

#tiqdnhtgwb .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#tiqdnhtgwb .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#tiqdnhtgwb .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#tiqdnhtgwb .gt_row_group_first td {
  border-top-width: 2px;
}

#tiqdnhtgwb .gt_row_group_first th {
  border-top-width: 2px;
}

#tiqdnhtgwb .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#tiqdnhtgwb .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#tiqdnhtgwb .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#tiqdnhtgwb .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#tiqdnhtgwb .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#tiqdnhtgwb .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#tiqdnhtgwb .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#tiqdnhtgwb .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#tiqdnhtgwb .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#tiqdnhtgwb .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#tiqdnhtgwb .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#tiqdnhtgwb .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#tiqdnhtgwb .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#tiqdnhtgwb .gt_left {
  text-align: left;
}

#tiqdnhtgwb .gt_center {
  text-align: center;
}

#tiqdnhtgwb .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#tiqdnhtgwb .gt_font_normal {
  font-weight: normal;
}

#tiqdnhtgwb .gt_font_bold {
  font-weight: bold;
}

#tiqdnhtgwb .gt_font_italic {
  font-style: italic;
}

#tiqdnhtgwb .gt_super {
  font-size: 65%;
}

#tiqdnhtgwb .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#tiqdnhtgwb .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#tiqdnhtgwb .gt_indent_1 {
  text-indent: 5px;
}

#tiqdnhtgwb .gt_indent_2 {
  text-indent: 10px;
}

#tiqdnhtgwb .gt_indent_3 {
  text-indent: 15px;
}

#tiqdnhtgwb .gt_indent_4 {
  text-indent: 20px;
}

#tiqdnhtgwb .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    <tr class="gt_col_headings gt_spanner_row">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="2" colspan="1" scope="col" id="&lt;strong&gt;Characteristic&lt;/strong&gt;"><strong>Characteristic</strong></th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="4" scope="colgroup" id="&lt;strong&gt;Univariate&lt;/strong&gt;">
        <span class="gt_column_spanner"><strong>Univariate</strong></span>
      </th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="3" scope="colgroup" id="&lt;strong&gt;Multivariable&lt;/strong&gt;">
        <span class="gt_column_spanner"><strong>Multivariable</strong></span>
      </th>
    </tr>
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="&lt;strong&gt;N&lt;/strong&gt;"><strong>N</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="&lt;strong&gt;OR&lt;/strong&gt;&lt;span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/span&gt;"><strong>OR</strong><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="&lt;strong&gt;95% CI&lt;/strong&gt;&lt;span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/span&gt;"><strong>95% CI</strong><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="&lt;strong&gt;p-value&lt;/strong&gt;"><strong>p-value</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="&lt;strong&gt;OR&lt;/strong&gt;&lt;span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/span&gt;"><strong>OR</strong><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="&lt;strong&gt;95% CI&lt;/strong&gt;&lt;span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/span&gt;"><strong>95% CI</strong><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="&lt;strong&gt;p-value&lt;/strong&gt;"><strong>p-value</strong></th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="label" class="gt_row gt_left">gender</td>
<td headers="stat_n_1" class="gt_row gt_center">4,167</td>
<td headers="estimate_1" class="gt_row gt_center">1.00</td>
<td headers="ci_1" class="gt_row gt_center">0.88, 1.13</td>
<td headers="p.value_1" class="gt_row gt_center">>0.9</td>
<td headers="estimate_2" class="gt_row gt_center">1.00</td>
<td headers="ci_2" class="gt_row gt_center">0.88, 1.14</td>
<td headers="p.value_2" class="gt_row gt_center">>0.9</td></tr>
    <tr><td headers="label" class="gt_row gt_left">fever</td>
<td headers="stat_n_1" class="gt_row gt_center">4,167</td>
<td headers="estimate_1" class="gt_row gt_center">1.00</td>
<td headers="ci_1" class="gt_row gt_center">0.85, 1.17</td>
<td headers="p.value_1" class="gt_row gt_center">>0.9</td>
<td headers="estimate_2" class="gt_row gt_center">1.00</td>
<td headers="ci_2" class="gt_row gt_center">0.86, 1.18</td>
<td headers="p.value_2" class="gt_row gt_center">>0.9</td></tr>
    <tr><td headers="label" class="gt_row gt_left">chills</td>
<td headers="stat_n_1" class="gt_row gt_center">4,167</td>
<td headers="estimate_1" class="gt_row gt_center">1.03</td>
<td headers="ci_1" class="gt_row gt_center">0.89, 1.21</td>
<td headers="p.value_1" class="gt_row gt_center">0.7</td>
<td headers="estimate_2" class="gt_row gt_center">1.03</td>
<td headers="ci_2" class="gt_row gt_center">0.89, 1.21</td>
<td headers="p.value_2" class="gt_row gt_center">0.7</td></tr>
    <tr><td headers="label" class="gt_row gt_left">cough</td>
<td headers="stat_n_1" class="gt_row gt_center">4,167</td>
<td headers="estimate_1" class="gt_row gt_center">1.15</td>
<td headers="ci_1" class="gt_row gt_center">0.97, 1.37</td>
<td headers="p.value_1" class="gt_row gt_center">0.11</td>
<td headers="estimate_2" class="gt_row gt_center">1.15</td>
<td headers="ci_2" class="gt_row gt_center">0.96, 1.37</td>
<td headers="p.value_2" class="gt_row gt_center">0.12</td></tr>
    <tr><td headers="label" class="gt_row gt_left">aches</td>
<td headers="stat_n_1" class="gt_row gt_center">4,167</td>
<td headers="estimate_1" class="gt_row gt_center">0.93</td>
<td headers="ci_1" class="gt_row gt_center">0.76, 1.14</td>
<td headers="p.value_1" class="gt_row gt_center">0.5</td>
<td headers="estimate_2" class="gt_row gt_center">0.93</td>
<td headers="ci_2" class="gt_row gt_center">0.76, 1.14</td>
<td headers="p.value_2" class="gt_row gt_center">0.5</td></tr>
    <tr><td headers="label" class="gt_row gt_left">vomit</td>
<td headers="stat_n_1" class="gt_row gt_center">4,167</td>
<td headers="estimate_1" class="gt_row gt_center">1.09</td>
<td headers="ci_1" class="gt_row gt_center">0.96, 1.23</td>
<td headers="p.value_1" class="gt_row gt_center">0.2</td>
<td headers="estimate_2" class="gt_row gt_center">1.09</td>
<td headers="ci_2" class="gt_row gt_center">0.96, 1.23</td>
<td headers="p.value_2" class="gt_row gt_center">0.2</td></tr>
    <tr><td headers="label" class="gt_row gt_left">age_cat</td>
<td headers="stat_n_1" class="gt_row gt_center">4,167</td>
<td headers="estimate_1" class="gt_row gt_center"><br /></td>
<td headers="ci_1" class="gt_row gt_center"><br /></td>
<td headers="p.value_1" class="gt_row gt_center"><br /></td>
<td headers="estimate_2" class="gt_row gt_center"><br /></td>
<td headers="ci_2" class="gt_row gt_center"><br /></td>
<td headers="p.value_2" class="gt_row gt_center"><br /></td></tr>
    <tr><td headers="label" class="gt_row gt_left">    0-4</td>
<td headers="stat_n_1" class="gt_row gt_center"><br /></td>
<td headers="estimate_1" class="gt_row gt_center">—</td>
<td headers="ci_1" class="gt_row gt_center">—</td>
<td headers="p.value_1" class="gt_row gt_center"><br /></td>
<td headers="estimate_2" class="gt_row gt_center">—</td>
<td headers="ci_2" class="gt_row gt_center">—</td>
<td headers="p.value_2" class="gt_row gt_center"><br /></td></tr>
    <tr><td headers="label" class="gt_row gt_left">    5-9</td>
<td headers="stat_n_1" class="gt_row gt_center"><br /></td>
<td headers="estimate_1" class="gt_row gt_center">0.94</td>
<td headers="ci_1" class="gt_row gt_center">0.77, 1.15</td>
<td headers="p.value_1" class="gt_row gt_center">0.5</td>
<td headers="estimate_2" class="gt_row gt_center">0.94</td>
<td headers="ci_2" class="gt_row gt_center">0.77, 1.15</td>
<td headers="p.value_2" class="gt_row gt_center">0.5</td></tr>
    <tr><td headers="label" class="gt_row gt_left">    10-14</td>
<td headers="stat_n_1" class="gt_row gt_center"><br /></td>
<td headers="estimate_1" class="gt_row gt_center">1.15</td>
<td headers="ci_1" class="gt_row gt_center">0.93, 1.42</td>
<td headers="p.value_1" class="gt_row gt_center">0.2</td>
<td headers="estimate_2" class="gt_row gt_center">1.15</td>
<td headers="ci_2" class="gt_row gt_center">0.93, 1.41</td>
<td headers="p.value_2" class="gt_row gt_center">0.2</td></tr>
    <tr><td headers="label" class="gt_row gt_left">    15-19</td>
<td headers="stat_n_1" class="gt_row gt_center"><br /></td>
<td headers="estimate_1" class="gt_row gt_center">0.99</td>
<td headers="ci_1" class="gt_row gt_center">0.80, 1.24</td>
<td headers="p.value_1" class="gt_row gt_center">>0.9</td>
<td headers="estimate_2" class="gt_row gt_center">0.99</td>
<td headers="ci_2" class="gt_row gt_center">0.79, 1.24</td>
<td headers="p.value_2" class="gt_row gt_center">>0.9</td></tr>
    <tr><td headers="label" class="gt_row gt_left">    20-29</td>
<td headers="stat_n_1" class="gt_row gt_center"><br /></td>
<td headers="estimate_1" class="gt_row gt_center">1.03</td>
<td headers="ci_1" class="gt_row gt_center">0.84, 1.26</td>
<td headers="p.value_1" class="gt_row gt_center">0.8</td>
<td headers="estimate_2" class="gt_row gt_center">1.03</td>
<td headers="ci_2" class="gt_row gt_center">0.84, 1.26</td>
<td headers="p.value_2" class="gt_row gt_center">0.8</td></tr>
    <tr><td headers="label" class="gt_row gt_left">    30-49</td>
<td headers="stat_n_1" class="gt_row gt_center"><br /></td>
<td headers="estimate_1" class="gt_row gt_center">1.07</td>
<td headers="ci_1" class="gt_row gt_center">0.85, 1.33</td>
<td headers="p.value_1" class="gt_row gt_center">0.6</td>
<td headers="estimate_2" class="gt_row gt_center">1.06</td>
<td headers="ci_2" class="gt_row gt_center">0.85, 1.33</td>
<td headers="p.value_2" class="gt_row gt_center">0.6</td></tr>
    <tr><td headers="label" class="gt_row gt_left">    50-69</td>
<td headers="stat_n_1" class="gt_row gt_center"><br /></td>
<td headers="estimate_1" class="gt_row gt_center">0.68</td>
<td headers="ci_1" class="gt_row gt_center">0.41, 1.13</td>
<td headers="p.value_1" class="gt_row gt_center">0.13</td>
<td headers="estimate_2" class="gt_row gt_center">0.68</td>
<td headers="ci_2" class="gt_row gt_center">0.40, 1.13</td>
<td headers="p.value_2" class="gt_row gt_center">0.14</td></tr>
    <tr><td headers="label" class="gt_row gt_left">    70+</td>
<td headers="stat_n_1" class="gt_row gt_center"><br /></td>
<td headers="estimate_1" class="gt_row gt_center">0.53</td>
<td headers="ci_1" class="gt_row gt_center">0.07, 3.20</td>
<td headers="p.value_1" class="gt_row gt_center">0.5</td>
<td headers="estimate_2" class="gt_row gt_center">0.52</td>
<td headers="ci_2" class="gt_row gt_center">0.07, 3.19</td>
<td headers="p.value_2" class="gt_row gt_center">0.5</td></tr>
  </tbody>
  
  <tfoot class="gt_footnotes">
    <tr>
      <td class="gt_footnote" colspan="8"><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span> OR = Odds Ratio, CI = Confidence Interval</td>
    </tr>
  </tfoot>
</table>
</div>
</div>
<div id="gộp-bằng-package-dplyr" class="section level4 unnumbered">
<h4>Gộp bằng package <strong>dplyr</strong></h4>
<p>Một cách khác để gộp các kết quả đơn biến và đa biến từ các hàm <code>glm()</code>/<code>tidy()</code> bằng cách sử dụng các hàm kết nối từ package <strong>dplyr</strong>.</p>
<ul>
<li>Kết nối kết quả đơn biến trước đó (<code>univ_tab_base</code>, chứa được các cột đếm) với kết quả đa biến đã được làm gọn <code>mv_tab_base</code><br />
</li>
<li>Sử dụng hàm <code>select()</code> để giữ lại, sắp xếp lại thứ tự và đặt lại tên các cột mà chúng ta muốn<br />
</li>
<li>Sử dụng hàm <code>round()</code> để làm tròn tất cả các cột với hai số thập phân</li>
</ul>
<div class="sourceCode" id="cb1003"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1003-1"><a href="regression.html#cb1003-1" tabindex="-1"></a><span class="do">## combine univariate and multivariable tables </span></span>
<span id="cb1003-2"><a href="regression.html#cb1003-2" tabindex="-1"></a><span class="fu">left_join</span>(univ_tab_base, mv_tab_base, <span class="at">by =</span> <span class="st">&quot;term&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb1003-3"><a href="regression.html#cb1003-3" tabindex="-1"></a>  <span class="do">## choose columns and rename them</span></span>
<span id="cb1003-4"><a href="regression.html#cb1003-4" tabindex="-1"></a>  <span class="fu">select</span>( <span class="co"># new name =  old name</span></span>
<span id="cb1003-5"><a href="regression.html#cb1003-5" tabindex="-1"></a>    <span class="st">&quot;characteristic&quot;</span> <span class="ot">=</span> term, </span>
<span id="cb1003-6"><a href="regression.html#cb1003-6" tabindex="-1"></a>    <span class="st">&quot;recovered&quot;</span>      <span class="ot">=</span> <span class="st">&quot;0&quot;</span>, </span>
<span id="cb1003-7"><a href="regression.html#cb1003-7" tabindex="-1"></a>    <span class="st">&quot;dead&quot;</span>           <span class="ot">=</span> <span class="st">&quot;1&quot;</span>, </span>
<span id="cb1003-8"><a href="regression.html#cb1003-8" tabindex="-1"></a>    <span class="st">&quot;univ_or&quot;</span>        <span class="ot">=</span> estimate.x, </span>
<span id="cb1003-9"><a href="regression.html#cb1003-9" tabindex="-1"></a>    <span class="st">&quot;univ_ci_low&quot;</span>    <span class="ot">=</span> conf.low.x, </span>
<span id="cb1003-10"><a href="regression.html#cb1003-10" tabindex="-1"></a>    <span class="st">&quot;univ_ci_high&quot;</span>   <span class="ot">=</span> conf.high.x,</span>
<span id="cb1003-11"><a href="regression.html#cb1003-11" tabindex="-1"></a>    <span class="st">&quot;univ_pval&quot;</span>      <span class="ot">=</span> p.value.x, </span>
<span id="cb1003-12"><a href="regression.html#cb1003-12" tabindex="-1"></a>    <span class="st">&quot;mv_or&quot;</span>          <span class="ot">=</span> estimate.y, </span>
<span id="cb1003-13"><a href="regression.html#cb1003-13" tabindex="-1"></a>    <span class="st">&quot;mvv_ci_low&quot;</span>     <span class="ot">=</span> conf.low.y, </span>
<span id="cb1003-14"><a href="regression.html#cb1003-14" tabindex="-1"></a>    <span class="st">&quot;mv_ci_high&quot;</span>     <span class="ot">=</span> conf.high.y,</span>
<span id="cb1003-15"><a href="regression.html#cb1003-15" tabindex="-1"></a>    <span class="st">&quot;mv_pval&quot;</span>        <span class="ot">=</span> p.value.y </span>
<span id="cb1003-16"><a href="regression.html#cb1003-16" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb1003-17"><a href="regression.html#cb1003-17" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.double), round, <span class="dv">2</span>))   </span></code></pre></div>
<pre><code>## # A tibble: 20 × 11
##    characteristic recovered  dead univ_or univ_ci_low univ_ci_high univ_pval mv_or
##    &lt;chr&gt;              &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;     &lt;dbl&gt; &lt;dbl&gt;
##  1 (Intercept)          909  1168    1.28        1.18         1.4       0     1.07
##  2 gender               916  1174    1           0.88         1.13      0.97  1   
##  3 (Intercept)          340   436    1.28        1.11         1.48      0     1.07
##  4 fever               1485  1906    1           0.85         1.17      0.99  1   
##  5 (Intercept)         1472  1877    1.28        1.19         1.37      0     1.07
##  6 chills               353   465    1.03        0.89         1.21      0.68  1.03
##  7 (Intercept)          272   309    1.14        0.97         1.34      0.13  1.07
##  8 cough               1553  2033    1.15        0.97         1.37      0.11  1.15
##  9 (Intercept)         1636  2114    1.29        1.21         1.38      0     1.07
## 10 aches                189   228    0.93        0.76         1.14      0.51  0.93
## 11 (Intercept)          931  1144    1.23        1.13         1.34      0     1.07
## 12 vomit                894  1198    1.09        0.96         1.23      0.17  1.09
## 13 (Intercept)          338   427    1.26        1.1          1.46      0     1.07
## 14 age_cat5-9           365   433    0.94        0.77         1.15      0.54  0.94
## 15 age_cat10-14         273   396    1.15        0.93         1.42      0.2   1.15
## 16 age_cat15-19         238   299    0.99        0.8          1.24      0.96  0.99
## 17 age_cat20-29         345   448    1.03        0.84         1.26      0.79  1.03
## 18 age_cat30-49         228   307    1.07        0.85         1.33      0.58  1.06
## 19 age_cat50-69          35    30    0.68        0.41         1.13      0.13  0.68
## 20 age_cat70+             3     2    0.53        0.07         3.2       0.49  0.52
## # ℹ 3 more variables: mvv_ci_low &lt;dbl&gt;, mv_ci_high &lt;dbl&gt;, mv_pval &lt;dbl&gt;</code></pre>
<!-- ======================================================= -->
</div>
</div>
</div>
<div id="biểu-đồ-forest-plot" class="section level2" number="19.5">
<h2><span class="header-section-number">19.5</span> Biểu đồ Forest plot</h2>
<p>Phần này hướng dẫn cách tạo ra một biểu đồ của các kết quả hồi quy. Có hai lựa chọn để tạo biểu đồ, chúng ta có thể tự tạo một biểu đồ bằng cách sử dụng package <strong>ggplot2</strong> hoặc sử dụng một meta-package có tên <strong>easystats</strong> (một package gồm nhiều package).</p>
<p>Nếu chưa quen thuộc với gói lệnh tạo biểu đồ <strong>ggplot2</strong>, xem thêm chương <a href="ggplot-basics.html#ggplot-basics">ggplot cơ bản</a>.</p>
<!-- ======================================================= -->
<div id="ggplot2-package" class="section level3 unnumbered">
<h3><strong>ggplot2</strong> package</h3>
<p>Bạn có thể xây dựng một forest plot với hàm <code>ggplot()</code> bằng cách vẽ các thành phần của kết quả hồi quy đa biến. Thêm các lớp của biều đồ bằng cách sử dụng các “geoms”:</p>
<ul>
<li>Các ước lượng bằng hàm <code>geom_point()</code><br />
</li>
<li>Khoảng tin cậy bằng hàm <code>geom_errorbar()</code><br />
</li>
<li>Đường thẳng đứng ở vị trí OR = 1 bằng hàm <code>geom_vline()</code></li>
</ul>
<p>Trước khi tạo biểu đồ, chúng ta sử dụng hàm <code>fct_relevel()</code> từ package <strong>forcats</strong> để đặt thứ tự các biến trên trục y. Hàm <code>ggplot()</code> cho phép hiển thị theo thứ tự chữ-số mà có thể không hiển thị tốt cho các giá trị của biến tuổi (“30” có thể hiển thị trước “5”). Xem chương <a href="factors.html#factors">Factors</a> để biết thêm chi tiết.</p>
<div class="sourceCode" id="cb1005"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1005-1"><a href="regression.html#cb1005-1" tabindex="-1"></a><span class="do">## remove the intercept term from your multivariable results</span></span>
<span id="cb1005-2"><a href="regression.html#cb1005-2" tabindex="-1"></a>mv_tab_base <span class="sc">%&gt;%</span> </span>
<span id="cb1005-3"><a href="regression.html#cb1005-3" tabindex="-1"></a>  </span>
<span id="cb1005-4"><a href="regression.html#cb1005-4" tabindex="-1"></a>  <span class="co">#set order of levels to appear along y-axis</span></span>
<span id="cb1005-5"><a href="regression.html#cb1005-5" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">term =</span> <span class="fu">fct_relevel</span>(</span>
<span id="cb1005-6"><a href="regression.html#cb1005-6" tabindex="-1"></a>    term,</span>
<span id="cb1005-7"><a href="regression.html#cb1005-7" tabindex="-1"></a>    <span class="st">&quot;vomit&quot;</span>, <span class="st">&quot;gender&quot;</span>, <span class="st">&quot;fever&quot;</span>, <span class="st">&quot;cough&quot;</span>, <span class="st">&quot;chills&quot;</span>, <span class="st">&quot;aches&quot;</span>,</span>
<span id="cb1005-8"><a href="regression.html#cb1005-8" tabindex="-1"></a>    <span class="st">&quot;age_cat5-9&quot;</span>, <span class="st">&quot;age_cat10-14&quot;</span>, <span class="st">&quot;age_cat15-19&quot;</span>, <span class="st">&quot;age_cat20-29&quot;</span>,</span>
<span id="cb1005-9"><a href="regression.html#cb1005-9" tabindex="-1"></a>    <span class="st">&quot;age_cat30-49&quot;</span>, <span class="st">&quot;age_cat50-69&quot;</span>, <span class="st">&quot;age_cat70+&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb1005-10"><a href="regression.html#cb1005-10" tabindex="-1"></a>  </span>
<span id="cb1005-11"><a href="regression.html#cb1005-11" tabindex="-1"></a>  <span class="co"># remove &quot;intercept&quot; row from plot</span></span>
<span id="cb1005-12"><a href="regression.html#cb1005-12" tabindex="-1"></a>  <span class="fu">filter</span>(term <span class="sc">!=</span> <span class="st">&quot;(Intercept)&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb1005-13"><a href="regression.html#cb1005-13" tabindex="-1"></a>  </span>
<span id="cb1005-14"><a href="regression.html#cb1005-14" tabindex="-1"></a>  <span class="do">## plot with variable on the y axis and estimate (OR) on the x axis</span></span>
<span id="cb1005-15"><a href="regression.html#cb1005-15" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> estimate, <span class="at">y =</span> term)) <span class="sc">+</span></span>
<span id="cb1005-16"><a href="regression.html#cb1005-16" tabindex="-1"></a>  </span>
<span id="cb1005-17"><a href="regression.html#cb1005-17" tabindex="-1"></a>  <span class="do">## show the estimate as a point</span></span>
<span id="cb1005-18"><a href="regression.html#cb1005-18" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb1005-19"><a href="regression.html#cb1005-19" tabindex="-1"></a>  </span>
<span id="cb1005-20"><a href="regression.html#cb1005-20" tabindex="-1"></a>  <span class="do">## add in an error bar for the confidence intervals</span></span>
<span id="cb1005-21"><a href="regression.html#cb1005-21" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">xmin =</span> conf.low, <span class="at">xmax =</span> conf.high)) <span class="sc">+</span> </span>
<span id="cb1005-22"><a href="regression.html#cb1005-22" tabindex="-1"></a>  </span>
<span id="cb1005-23"><a href="regression.html#cb1005-23" tabindex="-1"></a>  <span class="do">## show where OR = 1 is for reference as a dashed line</span></span>
<span id="cb1005-24"><a href="regression.html#cb1005-24" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">1</span>, <span class="at">linetype =</span> <span class="st">&quot;dashed&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/ggplot_forest-1.png" width="672" /></p>
<!-- ======================================================= -->
</div>
<div id="easystats-packages" class="section level3 unnumbered">
<h3><strong>easystats</strong> packages</h3>
<p>Lựa chọn thứ hai là sử dụng một sự kết hợp của các package trong <strong>easystats</strong>, nếu chúng ta không muốn mức độ kiểm soát chặt chẽ mà package <strong>ggplot2</strong> cung cấp.</p>
<p>Hàm <code>model_parameters()</code> từ package <strong>parameters</strong> thực hiện tương đương với hàm <code>tidy()</code> trong package <strong>broom</strong> . Sau đó, package <strong>see</strong> chấp nhận các kết quả đầu ra và tạo một biểu đồ forest plot mặc định giống như cho một đối tượng <code>ggplot()</code>.</p>
<div class="sourceCode" id="cb1006"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1006-1"><a href="regression.html#cb1006-1" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(easystats)</span>
<span id="cb1006-2"><a href="regression.html#cb1006-2" tabindex="-1"></a></span>
<span id="cb1006-3"><a href="regression.html#cb1006-3" tabindex="-1"></a><span class="do">## remove the intercept term from your multivariable results</span></span>
<span id="cb1006-4"><a href="regression.html#cb1006-4" tabindex="-1"></a>final_mv_reg <span class="sc">%&gt;%</span> </span>
<span id="cb1006-5"><a href="regression.html#cb1006-5" tabindex="-1"></a>  <span class="fu">model_parameters</span>(<span class="at">exponentiate =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb1006-6"><a href="regression.html#cb1006-6" tabindex="-1"></a>  <span class="fu">plot</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/easystats_forest-1.png" width="672" /></p>
<!-- ======================================================= -->
</div>
</div>
<div id="nguồn-5" class="section level2" number="19.6">
<h2><span class="header-section-number">19.6</span> Nguồn</h2>
<p>Nội dung của chương này được tham khảo từ các nguồn sau:</p>
<p><a href="https://www.datacamp.com/community/tutorials/linear-regression-R">Linear regression in R</a></p>
<p><a href="http://www.danieldsjoberg.com/gtsummary/articles/tbl_regression.html">gtsummary</a></p>
<p><a href="https://stats.idre.ucla.edu/other/dae/">UCLA stats page</a></p>
<p><a href="http://www.sthda.com/english/articles/36-classification-methods-essentials/150-stepwise-logistic-regression-essentials-in-r/">sthda stepwise regression</a></p>

</div>
</div>
  </main>

  <div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page">
      <h2>On this page</h2>
      <div id="book-on-this-page"></div>

      <div class="book-extra">
        <ul class="list-unstyled">
          <li><a id="book-source" href="#">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="#">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
      </div>
    </nav>
  </div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5">
  <div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Cẩm nang dịch tễ học với R</strong>" was written by the handbook team. It was last built on 2024-02-16.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer>


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
<script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>

</html>
