<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>45 Tương tác với thư mục làm việc | Cẩm nang dịch tễ học với R</title>

    <meta name="author" content="the handbook team" />
  
   <meta name="description" content="The Epi R Handbook is a R reference manual for applied epidemiology and public health." />
   <meta name="generator" content="placeholder" />
  <meta property="og:title" content="45 Tương tác với thư mục làm việc | Cẩm nang dịch tễ học với R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="The Epi R Handbook is a R reference manual for applied epidemiology and public health." />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="45 Tương tác với thư mục làm việc | Cẩm nang dịch tễ học với R" />
  
  <meta name="twitter:description" content="The Epi R Handbook is a R reference manual for applied epidemiology and public health." />
  
  <!-- JS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script>
  <script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script>
    <script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet" />
    <script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script>
    <script src="libs/bs3compat-0.6.1/transition.js"></script>
    <script src="libs/bs3compat-0.6.1/tabs.js"></script>
    <script src="libs/bs3compat-0.6.1/bs3compat.js"></script>
    <link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet" />
    <script src="libs/bs4_book-1.0.0/bs4_book.js"></script>
    <script src="libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
    <link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
    <script src="libs/datatables-binding-0.31/datatables.js"></script>
    <link href="libs/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet" />
    <link href="libs/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet" />
    <script src="libs/dt-core-1.13.6/js/jquery.dataTables.min.js"></script>
    <link href="libs/nouislider-7.0.10/jquery.nouislider.min.css" rel="stylesheet" />
    <script src="libs/nouislider-7.0.10/jquery.nouislider.min.js"></script>
    <link href="libs/selectize-0.12.0/selectize.bootstrap3.css" rel="stylesheet" />
    <script src="libs/selectize-0.12.0/selectize.min.js"></script>
    <link href="libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet" />
    <script src="libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>
    <script src="libs/kePrint-0.0.1/kePrint.js"></script>
    <link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
    <link href="libs/tabwid-1.1.3/tabwid.css" rel="stylesheet" />
    <script src="libs/tabwid-1.1.3/tabwid.js"></script>
    <link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
    <script src="libs/leaflet-1.3.1/leaflet.js"></script>
    <link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
    <script src="libs/proj4-2.6.2/proj4.min.js"></script>
    <script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
    <link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
    <script src="libs/leaflet-binding-2.2.1/leaflet.js"></script>
    <script src="libs/leaflet-providers-2.0.0/leaflet-providers_2.0.0.js"></script>
    <script src="libs/leaflet-providers-plugin-2.2.1/leaflet-providers-plugin.js"></script>
    <script src="libs/viz-1.8.2/viz.js"></script>
    <link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet" />
    <script src="libs/grViz-binding-1.0.11/grViz.js"></script>
    <script src="libs/d3-4.5.0/d3.min.js"></script>
    <script src="libs/sankey-1/sankey.js"></script>
    <script src="libs/sankeyNetwork-binding-0.4/sankeyNetwork.js"></script>
    <script src="libs/plotly-binding-4.10.4/plotly.js"></script>
    <script src="libs/typedarray-0.1/typedarray.min.js"></script>
    <link href="libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet" />
    <script src="libs/plotly-main-2.11.1/plotly-latest.min.js"></script>
    <link href="libs/vis-9.1.0/vis-network.min.css" rel="stylesheet" />
    <script src="libs/vis-9.1.0/vis-network.min.js"></script>
    <script src="libs/visNetwork-binding-2.1.2/visNetwork.js"></script>
    <link href="libs/font-awesome-4.7.0/css/font-awesome.min.css" rel="stylesheet" />
    <script src="libs/plotly-basic-2.11.1/plotly-basic-2.11.1.min.js"></script>
    <script src="libs/plotly-cartesian-2.11.1/plotly-cartesian-2.11.1.min.js"></script>
    <script src="libs/proj4js-2.3.15/proj4.js"></script>
    <link href="libs/highcharts-9.3.1/css/motion.css" rel="stylesheet" />
    <script src="libs/highcharts-9.3.1/highcharts.js"></script>
    <script src="libs/highcharts-9.3.1/highcharts-3d.js"></script>
    <script src="libs/highcharts-9.3.1/highcharts-more.js"></script>
    <script src="libs/highcharts-9.3.1/modules/stock.js"></script>
    <script src="libs/highcharts-9.3.1/modules/map.js"></script>
    <script src="libs/highcharts-9.3.1/modules/data.js"></script>
    <script src="libs/highcharts-9.3.1/modules/exporting.js"></script>
    <script src="libs/highcharts-9.3.1/modules/offline-exporting.js"></script>
    <script src="libs/highcharts-9.3.1/modules/drilldown.js"></script>
    <script src="libs/highcharts-9.3.1/modules/item-series.js"></script>
    <script src="libs/highcharts-9.3.1/modules/overlapping-datalabels.js"></script>
    <script src="libs/highcharts-9.3.1/modules/annotations.js"></script>
    <script src="libs/highcharts-9.3.1/modules/export-data.js"></script>
    <script src="libs/highcharts-9.3.1/modules/funnel.js"></script>
    <script src="libs/highcharts-9.3.1/modules/heatmap.js"></script>
    <script src="libs/highcharts-9.3.1/modules/treemap.js"></script>
    <script src="libs/highcharts-9.3.1/modules/sankey.js"></script>
    <script src="libs/highcharts-9.3.1/modules/dependency-wheel.js"></script>
    <script src="libs/highcharts-9.3.1/modules/organization.js"></script>
    <script src="libs/highcharts-9.3.1/modules/solid-gauge.js"></script>
    <script src="libs/highcharts-9.3.1/modules/streamgraph.js"></script>
    <script src="libs/highcharts-9.3.1/modules/sunburst.js"></script>
    <script src="libs/highcharts-9.3.1/modules/vector.js"></script>
    <script src="libs/highcharts-9.3.1/modules/wordcloud.js"></script>
    <script src="libs/highcharts-9.3.1/modules/xrange.js"></script>
    <script src="libs/highcharts-9.3.1/modules/tilemap.js"></script>
    <script src="libs/highcharts-9.3.1/modules/venn.js"></script>
    <script src="libs/highcharts-9.3.1/modules/gantt.js"></script>
    <script src="libs/highcharts-9.3.1/modules/timeline.js"></script>
    <script src="libs/highcharts-9.3.1/modules/parallel-coordinates.js"></script>
    <script src="libs/highcharts-9.3.1/modules/bullet.js"></script>
    <script src="libs/highcharts-9.3.1/modules/coloraxis.js"></script>
    <script src="libs/highcharts-9.3.1/modules/dumbbell.js"></script>
    <script src="libs/highcharts-9.3.1/modules/lollipop.js"></script>
    <script src="libs/highcharts-9.3.1/modules/series-label.js"></script>
    <script src="libs/highcharts-9.3.1/plugins/motion.js"></script>
    <script src="libs/highcharts-9.3.1/custom/reset.js"></script>
    <script src="libs/highcharts-9.3.1/modules/boost.js"></script>
    <script src="libs/highchart-binding-0.9.4/highchart.js"></script>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-QXDW878QLX"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-QXDW878QLX');
    </script>

    <div class="alert alert-info alert-dismissible">
      <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
      <strong>Bạn cần trợ giúp khi học R?</strong> Hãy tham gia <a href="https://www.appliedepi.org/live/" class="alert-link">khóa học</a>, trải nghiệm <a href="https://www.appliedepi.org/tutorial/" class="alert-link">các học phần miễn phí</a>, gửi bài viết <a href="https://community.appliedepi.org/" class="alert-link">trên trang Cộng đồng</a>, hoặc liên hệ <a href="mailto:contact@appliedepi.org" class="alert-link">dịch vụ hỗ trợ của chúng tôi</a>.
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script>

  <!-- CSS -->
  <style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
      <link rel="stylesheet" href="style_bs4.css" />
  
</head>

<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book">
    <a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Cẩm nang dịch tễ học với R</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
      </form>

      <nav aria-label="Table of contents">
        <h2>Table of contents</h2>
        <div id="book-toc"></div>

        <div class="book-extra">
          <p><a id="book-repo" href="#">View book source <i class="fab fa-github"></i></a></li></p>
        </div>
      </nav>
    </div>
  </header>

  <main class="col-sm-12 col-md-9 col-lg-7" id="content">
<div id="directories" class="section level1" number="45">
<h1><span class="header-section-number">45</span> Tương tác với thư mục làm việc</h1>
<p>Trong chương này, chúng tôi sẽ bao gồm các tình huống phổ biến, nơi chúng ta sẽ tạo, tương tác, lưu và nhập với thư mục.</p>
<div id="chuẩn-bị-37" class="section level2" number="45.1">
<h2><span class="header-section-number">45.1</span> Chuẩn bị</h2>
<div id="fs-package" class="section level3 unnumbered">
<h3><strong>fs</strong> package</h3>
<p>Package <strong>fs</strong> thuộc hệ sinh thái <strong>tidyverse</strong> giúp thuận tiện cho việc tương tác với thư mục, cải thiện một số hàm trong <strong>base</strong> R. Trong các phần bên dưới, chúng ta sẽ dùng các hàm từ <strong>fs</strong>.</p>
<div class="sourceCode" id="cb1894"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1894-1"><a href="directories.html#cb1894-1" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(</span>
<span id="cb1894-2"><a href="directories.html#cb1894-2" tabindex="-1"></a>  fs,             <span class="co"># file/directory interactions</span></span>
<span id="cb1894-3"><a href="directories.html#cb1894-3" tabindex="-1"></a>  rio,            <span class="co"># import/export</span></span>
<span id="cb1894-4"><a href="directories.html#cb1894-4" tabindex="-1"></a>  here,           <span class="co"># relative file pathways</span></span>
<span id="cb1894-5"><a href="directories.html#cb1894-5" tabindex="-1"></a>  tidyverse)      <span class="co"># data management and visualization</span></span></code></pre></div>
</div>
<div id="in-thư-mục-dưới-dạng-cây-biểu-đồ-dendrogram" class="section level3 unnumbered">
<h3>In thư mục dưới dạng cây biểu đồ dendrogram</h3>
<p>Sử dụng hàm <code>dir_tree()</code> từ package <strong>fs</strong>.</p>
<p>Cung cấp đường dẫn thư mục cho đối số <code>path =</code> và quyết định xem có hay không chúng ta muốn hiển thị chỉ ở một cấp độ (<code>recurse = FALSE</code>) hay tất cả các tập tin trong tất cả các thư mục con (<code>recurse = TRUE</code>). Bên dưới chúng ta sử dụng hàm <code>here()</code> để hiển thị kết quả dưới dạng viết tốc ký trong dự án R và cụ thể thư mục con “data” của nó, mà chứa tất các số liệu được sử dụng cho cuốn sổ tay này. Chúng ta thiết lập nó để hiện thị tất cả các tệp bên trong thư mục “data” và các thư mục con của nó (vd: “cache”, “epidemic models”, “population”, “shp”, và “weather”).</p>
<div class="sourceCode" id="cb1895"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1895-1"><a href="directories.html#cb1895-1" tabindex="-1"></a>fs<span class="sc">::</span><span class="fu">dir_tree</span>(<span class="at">path =</span> <span class="fu">here</span>(<span class="st">&quot;data&quot;</span>), <span class="at">recurse =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## D:/Book Writing/epiRhandbook_vn/data
## ├── cache
## │   └── epidemic_models
## │       ├── 2015-04-30
## │       │   ├── estimated_reported_cases_samples.rds
## │       │   ├── estimate_samples.rds
## │       │   ├── latest_date.rds
## │       │   ├── reported_cases.rds
## │       │   ├── summarised_estimated_reported_cases.rds
## │       │   ├── summarised_estimates.rds
## │       │   └── summary.rds
## │       ├── epinow_res.rds
## │       ├── epinow_res_small.rds
## │       ├── generation_time.rds
## │       └── incubation_period.rds
## ├── case_linelists
## │   ├── cleaning_dict.csv
## │   ├── fluH7N9_China_2013.csv
## │   ├── linelist_cleaned.rds
## │   ├── linelist_cleaned.xlsx
## │   └── linelist_raw.xlsx
## ├── covid_example_data
## │   ├── covid_example_data.xlsx
## │   └── covid_shapefile
## │       ├── FultonCountyZipCodes.cpg
## │       ├── FultonCountyZipCodes.dbf
## │       ├── FultonCountyZipCodes.prj
## │       ├── FultonCountyZipCodes.sbn
## │       ├── FultonCountyZipCodes.sbx
## │       ├── FultonCountyZipCodes.shp
## │       ├── FultonCountyZipCodes.shp.xml
## │       └── FultonCountyZipCodes.shx
## ├── example
## │   ├── Central Hospital.csv
## │   ├── district_weekly_count_data.xlsx
## │   ├── fluH7N9_China_2013.csv
## │   ├── hospital_linelists.xlsx
## │   ├── linelists
## │   │   ├── 20201007linelist.csv
## │   │   ├── case_linelist20201006.csv
## │   │   ├── case_linelist_2020-10-02.csv
## │   │   ├── case_linelist_2020-10-03.csv
## │   │   ├── case_linelist_2020-10-04.csv
## │   │   ├── case_linelist_2020-10-05.csv
## │   │   └── case_linelist_2020-10-08.xlsx
## │   ├── Military Hospital.csv
## │   ├── Missing.csv
## │   ├── Other.csv
## │   ├── Port Hospital.csv
## │   └── St. Mark&#39;s Maternity Hospital (SMMH).csv
## ├── flexdashboard
## │   ├── outbreak_dashboard.html
## │   ├── outbreak_dashboard.Rmd
## │   ├── outbreak_dashboard_shiny.Rmd
## │   ├── outbreak_dashboard_test.html
## │   └── outbreak_dashboard_test.Rmd
## ├── gis
## │   ├── africa_countries.geo.json
## │   ├── covid_incidence.csv
## │   ├── covid_incidence_map.R
## │   ├── linelist_cleaned_with_adm3.rds
## │   ├── population
## │   │   ├── sle_admpop_adm3_2020.csv
## │   │   └── sle_population_statistics_sierraleone_2020.xlsx
## │   └── shp
## │       ├── README.txt
## │       ├── sle_adm3.CPG
## │       ├── sle_adm3.dbf
## │       ├── sle_adm3.prj
## │       ├── sle_adm3.sbn
## │       ├── sle_adm3.sbx
## │       ├── sle_adm3.shp
## │       ├── sle_adm3.shp.xml
## │       ├── sle_adm3.shx
## │       ├── sle_hf.CPG
## │       ├── sle_hf.dbf
## │       ├── sle_hf.prj
## │       ├── sle_hf.sbn
## │       ├── sle_hf.sbx
## │       ├── sle_hf.shp
## │       └── sle_hf.shx
## ├── godata
## │   ├── cases_clean.rds
## │   ├── contacts_clean.rds
## │   ├── followups_clean.rds
## │   └── relationships_clean.rds
## ├── likert_data.csv
## ├── linelist_cleaned.xlsx
## ├── make_evd_dataset.R
## ├── malaria_app
## │   ├── app.R
## │   ├── data
## │   │   └── facility_count_data.rds
## │   ├── funcs
## │   │   └── plot_epicurve.R
## │   ├── global.R
## │   ├── malaria_app.Rproj
## │   ├── server.R
## │   └── ui.R
## ├── malaria_facility_count_data.rds
## ├── phylo
## │   ├── sample_data_Shigella_tree.csv
## │   ├── Shigella_subtree_2.nwk
## │   ├── Shigella_subtree_2.txt
## │   └── Shigella_tree.txt
## ├── rmarkdown
## │   ├── outbreak_report.docx
## │   ├── outbreak_report.html
## │   ├── outbreak_report.pdf
## │   ├── outbreak_report.pptx
## │   ├── outbreak_report.Rmd
## │   ├── report_tabbed_example.html
## │   └── report_tabbed_example.Rmd
## ├── standardization
## │   ├── country_demographics.csv
## │   ├── country_demographics_2.csv
## │   ├── deaths_countryA.csv
## │   ├── deaths_countryB.csv
## │   └── world_standard_population_by_sex.csv
## ├── surveys
## │   ├── population.xlsx
## │   ├── survey_data.xlsx
## │   └── survey_dict.xlsx
## └── time_series
##     ├── campylobacter_germany.xlsx
##     └── weather
##         ├── germany_weather2002.nc
##         ├── germany_weather2003.nc
##         ├── germany_weather2004.nc
##         ├── germany_weather2005.nc
##         ├── germany_weather2006.nc
##         ├── germany_weather2007.nc
##         ├── germany_weather2008.nc
##         ├── germany_weather2009.nc
##         ├── germany_weather2010.nc
##         └── germany_weather2011.nc</code></pre>
</div>
</div>
<div id="liệt-kê-các-tập-tin-trong-một-thư-mục" class="section level2" number="45.2">
<h2><span class="header-section-number">45.2</span> Liệt kê các tập tin trong một thư mục</h2>
<p>Để chỉ liệt kê các tên tập tin trong một thư mục, chúng ta có thể sử dụng hàm <code>dir()</code> từ <strong>base</strong> Ví dụ, lệnh này liệt kê tên các tập tin của các tập tin trong thư mục con có tên “population” trong thư mục “data” của một dự án R. Đường dẫn tập tin tương đối được cung cấp bằng cách sử dụng hàm <code>here()</code> (đọc thêm trong chương <a href="importing.html#importing">Nhập xuất dữ liệu</a>).</p>
<div class="sourceCode" id="cb1897"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1897-1"><a href="directories.html#cb1897-1" tabindex="-1"></a><span class="co"># file names</span></span>
<span id="cb1897-2"><a href="directories.html#cb1897-2" tabindex="-1"></a><span class="fu">dir</span>(<span class="fu">here</span>(<span class="st">&quot;data&quot;</span>, <span class="st">&quot;gis&quot;</span>, <span class="st">&quot;population&quot;</span>))</span></code></pre></div>
<pre><code>## [1] &quot;sle_admpop_adm3_2020.csv&quot;                       
## [2] &quot;sle_population_statistics_sierraleone_2020.xlsx&quot;</code></pre>
<p>Để liệt kê đường dẫn đầy đủ của các tập tin trong thư mục, chúng ta có thể sử dụng hàm <code>dir_ls()</code> từ package <strong>fs</strong>. Một cách khác là dùng hàm <code>list.files()</code> trong <strong>base</strong> R.</p>
<div class="sourceCode" id="cb1899"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1899-1"><a href="directories.html#cb1899-1" tabindex="-1"></a><span class="co"># file paths</span></span>
<span id="cb1899-2"><a href="directories.html#cb1899-2" tabindex="-1"></a><span class="fu">dir_ls</span>(<span class="fu">here</span>(<span class="st">&quot;data&quot;</span>, <span class="st">&quot;gis&quot;</span>, <span class="st">&quot;population&quot;</span>))</span></code></pre></div>
<pre><code>## D:/Book Writing/epiRhandbook_vn/data/gis/population/sle_admpop_adm3_2020.csv
## D:/Book Writing/epiRhandbook_vn/data/gis/population/sle_population_statistics_sierraleone_2020.xlsx</code></pre>
<p>Để lấy tất cả thông tin chi tiết của mỗi tập tin trong một thư mục (ví dụ: đường dẫn, ngày sửa đổi, .v.v.), chúng ta có thể sử dụng hàm <code>dir_info()</code> của package <strong>fs</strong>.</p>
<p>Điều này có thể đặc biệt hữu ích nếu chúng ta muốn trích xuất thời gian sửa đổi sau cùng của tập tin, ví dụ như nếu chúng ta muốn nhập phiên bản mới nhất của tập tin. Ví dụ cho việc này, xem trong chương <a href="importing.html#importing">Nhập xuất dữ liệu</a>.</p>
<div class="sourceCode" id="cb1901"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1901-1"><a href="directories.html#cb1901-1" tabindex="-1"></a><span class="co"># file info</span></span>
<span id="cb1901-2"><a href="directories.html#cb1901-2" tabindex="-1"></a><span class="fu">dir_info</span>(<span class="fu">here</span>(<span class="st">&quot;data&quot;</span>, <span class="st">&quot;gis&quot;</span>, <span class="st">&quot;population&quot;</span>))</span></code></pre></div>
<p>Sau đây là data frame được trả về. Cuộn qua phải để xem tất cả các cột.</p>
<div class="datatables html-widget html-fill-item" id="htmlwidget-07bb04d8a3e5de3459dd" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-07bb04d8a3e5de3459dd">{"x":{"filter":"none","vertical":false,"data":[["D:/Book Writing/epiRhandbook_vn/data/gis/population/sle_admpop_adm3_2020.csv","D:/Book Writing/epiRhandbook_vn/data/gis/population/sle_population_statistics_sierraleone_2020.xlsx"],["file","file"],[26939,57850],[33206,33206],["2023-06-24T23:41:23Z","2023-06-24T23:41:23Z"],[null,null],[null,null],[1724206208,1724206208],[1,1],[0,0],[844424930291505,844424930291506],[4096,4096],[56,120],[0,0],[0,0],["2024-02-16T14:11:05Z","2023-06-24T23:41:23Z"],["2023-06-24T23:41:23Z","2023-06-24T23:41:23Z"],["2023-06-24T23:41:23Z","2023-06-24T23:41:23Z"]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>path<\/th>\n      <th>type<\/th>\n      <th>size<\/th>\n      <th>permissions<\/th>\n      <th>modification_time<\/th>\n      <th>user<\/th>\n      <th>group<\/th>\n      <th>device_id<\/th>\n      <th>hard_links<\/th>\n      <th>special_device_id<\/th>\n      <th>inode<\/th>\n      <th>block_size<\/th>\n      <th>blocks<\/th>\n      <th>flags<\/th>\n      <th>generation<\/th>\n      <th>access_time<\/th>\n      <th>change_time<\/th>\n      <th>birth_time<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":[2,3,7,8,9,10,11,12,13,14]},{"name":"path","targets":0},{"name":"type","targets":1},{"name":"size","targets":2},{"name":"permissions","targets":3},{"name":"modification_time","targets":4},{"name":"user","targets":5},{"name":"group","targets":6},{"name":"device_id","targets":7},{"name":"hard_links","targets":8},{"name":"special_device_id","targets":9},{"name":"inode","targets":10},{"name":"block_size","targets":11},{"name":"blocks","targets":12},{"name":"flags","targets":13},{"name":"generation","targets":14},{"name":"access_time","targets":15},{"name":"change_time","targets":16},{"name":"birth_time","targets":17}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="thông-tin-tệp" class="section level2" number="45.3">
<h2><span class="header-section-number">45.3</span> Thông tin tệp</h2>
<p>Để trích xuất thông tin chi tiết của một tập tin cụ thể, chúng ta có thể sử dụng hàme <code>file_info()</code> từ package <strong>fs</strong> (hoặc <code>file.info()</code> từ <strong>base</strong> R).</p>
<div class="sourceCode" id="cb1902"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1902-1"><a href="directories.html#cb1902-1" tabindex="-1"></a><span class="fu">file_info</span>(<span class="fu">here</span>(<span class="st">&quot;data&quot;</span>, <span class="st">&quot;case_linelists&quot;</span>, <span class="st">&quot;linelist_cleaned.rds&quot;</span>))</span></code></pre></div>
<div class="datatables html-widget html-fill-item" id="htmlwidget-3c21c39e1bbc740f9d3d" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-3c21c39e1bbc740f9d3d">{"x":{"filter":"none","vertical":false,"data":[["D:/Book Writing/epiRhandbook_vn/data/case_linelists/linelist_cleaned.rds"],["file"],[290215],[33206],["2023-06-24T23:41:23Z"],[null],[null],[1724206208],[1],[0],[1407374883712784],[4096],[568],[0],[0],["2024-02-16T14:13:52Z"],["2023-06-24T23:41:23Z"],["2023-06-24T23:41:23Z"]],"container":"<table class=\"white-space: nowrap\">\n  <thead>\n    <tr>\n      <th>path<\/th>\n      <th>type<\/th>\n      <th>size<\/th>\n      <th>permissions<\/th>\n      <th>modification_time<\/th>\n      <th>user<\/th>\n      <th>group<\/th>\n      <th>device_id<\/th>\n      <th>hard_links<\/th>\n      <th>special_device_id<\/th>\n      <th>inode<\/th>\n      <th>block_size<\/th>\n      <th>blocks<\/th>\n      <th>flags<\/th>\n      <th>generation<\/th>\n      <th>access_time<\/th>\n      <th>change_time<\/th>\n      <th>birth_time<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":[2,3,7,8,9,10,11,12,13,14]},{"name":"path","targets":0},{"name":"type","targets":1},{"name":"size","targets":2},{"name":"permissions","targets":3},{"name":"modification_time","targets":4},{"name":"user","targets":5},{"name":"group","targets":6},{"name":"device_id","targets":7},{"name":"hard_links","targets":8},{"name":"special_device_id","targets":9},{"name":"inode","targets":10},{"name":"block_size","targets":11},{"name":"blocks","targets":12},{"name":"flags","targets":13},{"name":"generation","targets":14},{"name":"access_time","targets":15},{"name":"change_time","targets":16},{"name":"birth_time","targets":17}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script>
<p>Ở đây, chúng ta sử dụng ký hiệu <code>$</code> để chỉ rõ kết quả và xuất chỉ mỗi giá trị về thời gian sửa đổi <code>modification_time</code>.</p>
<div class="sourceCode" id="cb1903"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1903-1"><a href="directories.html#cb1903-1" tabindex="-1"></a><span class="fu">file_info</span>(<span class="fu">here</span>(<span class="st">&quot;data&quot;</span>, <span class="st">&quot;case_linelists&quot;</span>, <span class="st">&quot;linelist_cleaned.rds&quot;</span>))<span class="sc">$</span>modification_time</span></code></pre></div>
<pre><code>## [1] &quot;2023-06-25 01:41:23 CEST&quot;</code></pre>
</div>
<div id="kiểm-tra-sự-tồn-tại" class="section level2" number="45.4">
<h2><span class="header-section-number">45.4</span> Kiểm tra sự tồn tại</h2>
<div id="đối-tượng-r" class="section level3 unnumbered">
<h3>Đối tượng R</h3>
<p>Bạn có thể sử dụng hàm <code>exists()</code> trong <strong>base</strong> R để kiểm tra xem một đối tượng R có tồn tại <em>bên trong</em> môi trường R hay không (cung cấp tên đối tượng trong dấu ngoặc kép).</p>
<div class="sourceCode" id="cb1905"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1905-1"><a href="directories.html#cb1905-1" tabindex="-1"></a><span class="fu">exists</span>(<span class="st">&quot;linelist&quot;</span>)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>Lưu ý rằng một số gói lệnh trong <strong>base</strong> R sử dụng các tên chung làm tên cho các đối tượng như “data” trong môi trường R, mà kết quả kiểm tra sẽ là TRUE trừ khi chúng ta chỉ rõ <code>inherit = FALSE</code>. Đây là một lý do để không đặt tên cho bộ số liệu của chúng ta là “data”.</p>
<div class="sourceCode" id="cb1907"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1907-1"><a href="directories.html#cb1907-1" tabindex="-1"></a><span class="fu">exists</span>(<span class="st">&quot;data&quot;</span>)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb1909"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1909-1"><a href="directories.html#cb1909-1" tabindex="-1"></a><span class="fu">exists</span>(<span class="st">&quot;data&quot;</span>, <span class="at">inherit =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<p>Nếu bạn đang viết một hàm, bạn nên sử dụng hàm <code>missing()</code> từ <strong>base</strong> R để kiểm tra xem có một đối số hiện diện hay không, thay vì dùng hàm <code>exists()</code>.</p>
</div>
<div id="thư-mục" class="section level3 unnumbered">
<h3>Thư mục</h3>
<p>Để kiểm tra xem một thư mục có tồn tại không, cung cấp đường dẫn tập tin (và tên tập tin) đến hàm <code>is_dir()</code> của package <strong>fs</strong>. Cuộn qua bên phải để thấy thông báo <code>TRUE</code> được in ra.</p>
<div class="sourceCode" id="cb1911"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1911-1"><a href="directories.html#cb1911-1" tabindex="-1"></a><span class="fu">is_dir</span>(<span class="fu">here</span>(<span class="st">&quot;data&quot;</span>))</span></code></pre></div>
<pre><code>## D:/Book Writing/epiRhandbook_vn/data 
##                                 TRUE</code></pre>
<p>Một cách làm khác là dùng hàm <code>file.exists()</code> từ <strong>base</strong> R.</p>
</div>
<div id="tệp" class="section level3 unnumbered">
<h3>Tệp</h3>
<p>Để kiểm tra xem một tập tin cụ thể có tồn tại hay không, sử dụng hàm <code>is_file()</code> của package <strong>fs</strong>. Cuộn qua bên phải để thấy thông báo <code>TRUE</code> được in ra.</p>
<div class="sourceCode" id="cb1913"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1913-1"><a href="directories.html#cb1913-1" tabindex="-1"></a><span class="fu">is_file</span>(<span class="fu">here</span>(<span class="st">&quot;data&quot;</span>, <span class="st">&quot;case_linelists&quot;</span>, <span class="st">&quot;linelist_cleaned.rds&quot;</span>))</span></code></pre></div>
<pre><code>## D:/Book Writing/epiRhandbook_vn/data/case_linelists/linelist_cleaned.rds 
##                                                                     TRUE</code></pre>
<p>Một cách làm khác là dùng hàm <code>file.exists()</code> từ <strong>base</strong> R.</p>
</div>
</div>
<div id="tạo-mới" class="section level2" number="45.5">
<h2><span class="header-section-number">45.5</span> Tạo mới</h2>
<div id="thư-mục-1" class="section level3 unnumbered">
<h3>Thư mục</h3>
<p>Để tạo một thư mục mới, bạn có thể sử dụng hàm <code>dir_create()</code> từ package <strong>fs</strong>. Nếu thư mục đã tồn tại, thư mục này sẽ không bị ghi đè và không bị trả lại lỗi.</p>
<div class="sourceCode" id="cb1915"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1915-1"><a href="directories.html#cb1915-1" tabindex="-1"></a><span class="fu">dir_create</span>(<span class="fu">here</span>(<span class="st">&quot;data&quot;</span>, <span class="st">&quot;test&quot;</span>))</span></code></pre></div>
<p>Một cách làm khác là dùng hàm <code>dir.create()</code> từ <strong>base</strong> R, mà sẽ hiển thị lỗi nếu thư mục đó đã tồn tại. Ngược lại, <code>dir_create()</code> sẽ không thông báo gì.</p>
</div>
<div id="tệp-1" class="section level3 unnumbered">
<h3>Tệp</h3>
<p>Chúng ta có thể tạo một tâp tin (rỗng) bằng hàm <code>file_create()</code> từ package <strong>fs</strong>. Nếu tập tin này đã tồn tại, nó sẽ không bị ghi đè hoặc thay đổi.</p>
<div class="sourceCode" id="cb1916"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1916-1"><a href="directories.html#cb1916-1" tabindex="-1"></a><span class="fu">file_create</span>(<span class="fu">here</span>(<span class="st">&quot;data&quot;</span>, <span class="st">&quot;test.rds&quot;</span>))</span></code></pre></div>
<p>Một cách làm khác là dùng hàm <code>file.create()</code> từ <strong>base</strong> R. Nhưng nếu tập tin này đã tồn tại, tùy chọn này sẽ cắt xén tập tin đó. Nếu dùng hàm <code>file_create()</code> tập tin này sẽ được giữ nguyên.</p>
</div>
<div id="tạo-nếu-không-tồn-tại" class="section level3 unnumbered">
<h3>Tạo nếu không tồn tại</h3>
<p>ĐANG XÂY DỰNG</p>
</div>
</div>
<div id="xóa" class="section level2" number="45.6">
<h2><span class="header-section-number">45.6</span> Xóa</h2>
<div id="đối-tượng-r-1" class="section level3 unnumbered">
<h3>Đối tượng R</h3>
<p>Dùng hàm <code>rm()</code> từ <strong>base</strong> R để loại bỏ một đối tượng R.</p>
</div>
<div id="thư-mục-2" class="section level3 unnumbered">
<h3>Thư mục</h3>
<p>Dùng hàm <code>dir_delete()</code> từ package <strong>fs</strong>.</p>
</div>
<div id="tệp-2" class="section level3 unnumbered">
<h3>Tệp</h3>
<p>Chúng ta có thể xóa các tệp bằng hàm <code>file_delete()</code> từ package <strong>fs</strong>.</p>
</div>
</div>
<div id="chạy-các-tệp-khác" class="section level2" number="45.7">
<h2><span class="header-section-number">45.7</span> Chạy các tệp khác</h2>
<div id="source" class="section level3 unnumbered">
<h3><code>source()</code></h3>
<p>Để chạy một R script từ một R script khác, bạn có thể sử dụng hàm <code>source()</code> (trong <strong>base</strong> R).</p>
<div class="sourceCode" id="cb1917"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1917-1"><a href="directories.html#cb1917-1" tabindex="-1"></a><span class="fu">source</span>(<span class="fu">here</span>(<span class="st">&quot;scripts&quot;</span>, <span class="st">&quot;cleaning_scripts&quot;</span>, <span class="st">&quot;clean_testing_data.R&quot;</span>))</span></code></pre></div>
<p>ở phía trên bên phải của tập lệnh. Điều này sẽ thực hiện tập lệnh này nhưng sẽ thực hiện một cách âm thầm (không có kết quả đầu ra trong bảng điều khiển R) trừ khi có chủ ý cụ thể. Xem các ví dụ ở chương [Bảng điều khiển tương tác] về cách sử dụng <code>source()</code> để tương tác với người dùng qua bảng điều khiên R ở chế độ hỏi và trả lời.</p>
<p><img src="images/source_button.png" width="82" height="300%" style="display: block; margin: auto;" /></p>
</div>
<div id="render" class="section level3 unnumbered">
<h3><code>render()</code></h3>
<p>Hàm <code>render()</code> là một biến thể của hàm <code>source()</code> mà thường được sử dụng nhất cho các tập lệnh của R markdown. Chúng ta cung cấp <code>input =</code> tập tin R markdown, và cũng vậy <code>output_format =</code> (thường là “html_document”, “pdf_document”, “word_document”, ““)</p>
<p>Xem chương <a href="rmarkdown.html#rmarkdown">Báo cáo với R Markdown</a> để biết thêm chi tiết. Ngoài ra, bạn có thể xem thêm tài liệu về <code>render()</code> <a href="https://rmarkdown.rstudio.com/docs/reference/render.html">tại đây</a> hoặc bằng cách gõ <code>?render</code>.</p>
</div>
<div id="chạy-các-tệp-trong-một-thư-mục" class="section level3 unnumbered">
<h3>Chạy các tệp trong một thư mục</h3>
<p>Bạn có thể tạo một <em>vòng lặp for</em> và sử dụng nó để <code>source()</code> từng tệp trong một thư mục, đã được nhận dạng bởi hàm <code>dir()</code>.</p>
<div class="sourceCode" id="cb1918"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1918-1"><a href="directories.html#cb1918-1" tabindex="-1"></a><span class="cf">for</span>(script <span class="cf">in</span> <span class="fu">dir</span>(<span class="fu">here</span>(<span class="st">&quot;scripts&quot;</span>), <span class="at">pattern =</span> <span class="st">&quot;.R$&quot;</span>)) {   <span class="co"># for each script name in the R Project&#39;s &quot;scripts&quot; folder (with .R extension)</span></span>
<span id="cb1918-2"><a href="directories.html#cb1918-2" tabindex="-1"></a>  <span class="fu">source</span>(<span class="fu">here</span>(<span class="st">&quot;scripts&quot;</span>, script))                        <span class="co"># source the file with the matching name that exists in the scripts folder</span></span>
<span id="cb1918-3"><a href="directories.html#cb1918-3" tabindex="-1"></a>}</span></code></pre></div>
<p>Nếu chúng ta chỉ muốn thực hiện một vài scripts, chúng ta có thể xác định chúng bằng tên như sau:</p>
<div class="sourceCode" id="cb1919"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1919-1"><a href="directories.html#cb1919-1" tabindex="-1"></a>scripts_to_run <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb1919-2"><a href="directories.html#cb1919-2" tabindex="-1"></a>     <span class="st">&quot;epicurves.R&quot;</span>,</span>
<span id="cb1919-3"><a href="directories.html#cb1919-3" tabindex="-1"></a>     <span class="st">&quot;demographic_tables.R&quot;</span>,</span>
<span id="cb1919-4"><a href="directories.html#cb1919-4" tabindex="-1"></a>     <span class="st">&quot;survival_curves.R&quot;</span></span>
<span id="cb1919-5"><a href="directories.html#cb1919-5" tabindex="-1"></a>)</span>
<span id="cb1919-6"><a href="directories.html#cb1919-6" tabindex="-1"></a></span>
<span id="cb1919-7"><a href="directories.html#cb1919-7" tabindex="-1"></a><span class="cf">for</span>(script <span class="cf">in</span> scripts_to_run) {</span>
<span id="cb1919-8"><a href="directories.html#cb1919-8" tabindex="-1"></a>  <span class="fu">source</span>(<span class="fu">here</span>(<span class="st">&quot;scripts&quot;</span>, script))</span>
<span id="cb1919-9"><a href="directories.html#cb1919-9" tabindex="-1"></a>}</span></code></pre></div>
<p>Đây là một <a href="https://cran.r-project.org/web/packages/fs/vignettes/function-comparisons.html">so sánh</a> giữa các hàm của <strong>fs</strong> và <strong>base</strong> R.</p>
</div>
<div id="nhập-tệp-vào-một-thư-mục" class="section level3 unnumbered">
<h3>Nhập tệp vào một thư mục</h3>
<p>Xem chương <a href="importing.html#importing">Nhập xuất dữ liệu</a> để nhập và xuất các tập tin riêng lẻ.</p>
<p>Ngoài ra cũng xem thêm chương <a href="importing.html#importing">Nhập xuất dữ liệu</a> để biết các phương pháp nhập một cách tự động các tập tin gần đây nhất dựa trên ngày trong tên tập tin <em>hoặc</em> bằng cách xem các thông tin chi tiết của tập tin.</p>
<p>Xem một ví dụ trong chương [Lặp, vòng lặp và danh sách] để thấy rõ cách sử dụng package <strong>purrr</strong>:</p>
<ul>
<li>Để tách một data frame và lưu nó ra dưới dạng nhiều tập tin<br />
</li>
<li>Tách một data frame và lưu từng phần vào một trang tính riêng biệt trong một tập tin Excel<br />
</li>
<li>Nhập nhiều tập tin CSV và kết hợp chúng thành một dataframe<br />
</li>
<li>Nhập một tập tin Excel có nhiều trang tính riêng biệt và kết hợp chúng thành một dataframe</li>
</ul>
</div>
</div>
<div id="base-r-3" class="section level2" number="45.8">
<h2><span class="header-section-number">45.8</span> <strong>base</strong> R</h2>
<p>Xem bên dưới các hàm <code>list.files()</code> và <code>dir()</code>, thực hiện cùng một thao tác liệt kê các tập tin trong một thư mục cụ thể. Chúng ta có thể cụ thể cho đối số <code>ignore.case =</code> hoặc cụ thể một pattern để tìm kiếm.</p>
<div class="sourceCode" id="cb1920"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1920-1"><a href="directories.html#cb1920-1" tabindex="-1"></a><span class="fu">list.files</span>(<span class="at">path =</span> <span class="fu">here</span>(<span class="st">&quot;data&quot;</span>))</span>
<span id="cb1920-2"><a href="directories.html#cb1920-2" tabindex="-1"></a></span>
<span id="cb1920-3"><a href="directories.html#cb1920-3" tabindex="-1"></a><span class="fu">list.files</span>(<span class="at">path =</span> <span class="fu">here</span>(<span class="st">&quot;data&quot;</span>), <span class="at">pattern =</span> <span class="st">&quot;.csv&quot;</span>)</span>
<span id="cb1920-4"><a href="directories.html#cb1920-4" tabindex="-1"></a><span class="co"># dir(path = here(&quot;data&quot;), pattern = &quot;.csv&quot;)</span></span>
<span id="cb1920-5"><a href="directories.html#cb1920-5" tabindex="-1"></a></span>
<span id="cb1920-6"><a href="directories.html#cb1920-6" tabindex="-1"></a><span class="fu">list.files</span>(<span class="at">path =</span> <span class="fu">here</span>(<span class="st">&quot;data&quot;</span>), <span class="at">pattern =</span> <span class="st">&quot;evd&quot;</span>, <span class="at">ignore.case =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p>Nếu một tập tin hiện tại đang “mở”, nó sẽ hiện thị trong thư mục với dấu ngã phía trước, chẳng hạn như “~$hospital_linelists.xlsx”.</p>
<!-- ======================================================= -->
</div>
<div id="nguồn-13" class="section level2" number="45.9">
<h2><span class="header-section-number">45.9</span> Nguồn</h2>
<p><a href="https://cran.r-project.org/web/packages/fs/vignettes/function-comparisons.html" class="uri">https://cran.r-project.org/web/packages/fs/vignettes/function-comparisons.html</a></p>

</div>
</div>
  </main>

  <div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page">
      <h2>On this page</h2>
      <div id="book-on-this-page"></div>

      <div class="book-extra">
        <ul class="list-unstyled">
          <li><a id="book-source" href="#">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="#">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
      </div>
    </nav>
  </div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5">
  <div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Cẩm nang dịch tễ học với R</strong>" was written by the handbook team. It was last built on 2024-02-16.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer>


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
<script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>

</html>
